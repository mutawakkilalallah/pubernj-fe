import{x as g,C as m,q as v,a as w,o as c,c as d,b as t,t as i,u as s,d as n,v as r,F as h,l as y,e as f,K as u,n as x,k}from"./index-ab4f3b6d.js";const D=g("table_santri",{state:()=>({isOpenDetail:!1,items:[],item:{},fotoDiri:"",meta:{},myPage:"",params:{cari:"",page:1,limit:25}}),actions:{nexPage(o){this.params.page=parseInt(o)+1,this.getData()},prevPage(o){this.params.page=parseInt(o)-1,this.getData()},setPage(o){this.params.page=parseInt(o),this.getData()},searchPage(){this.params.page=1,this.getData()},async getData(){const o={params:this.params};try{await m.get("santri",o).then(a=>{(a.data.code=200)&&(this.items=a.data.data,this.meta=a.headers)})}catch{}},async handleDoubelClick(o){try{this.isOpenDetail=!0,await m.get("santri/"+o).then(a=>{(a.data.code=200)&&(this.item=a.data.data,this.getImage(a.data.data.uuid,"medium"))})}catch{}},async getImage(o){try{const a={responseType:"blob"};await m.get("santri/image/"+o,a).then(_=>{this.fotoDiri=URL.createObjectURL(_.data)})}catch(a){console.log("error",a)}}}}),P=t("h3",null,"Data Santri",-1),L=t("hr",null,null,-1),N={class:"serach-box row"},U={class:"col-md-10 d-flex align-items-center mb-2"},C={class:"col-md-2 d-flex align-items-center"},S=t("hr",null,null,-1),V={class:"table-responsive"},K={class:"table table-sm table-hover mt-3"},T=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"NIUP"),t("th",{scope:"col"},"Nama Lengkap"),t("th",{scope:"col"},"JK"),t("th",{scope:"col"},"Wilayah"),t("th",{scope:"col"},"Daerah"),t("th",{scope:"col"},"Kab/Kota"),t("th",{scope:"col"},"Status Kepulangan")])],-1),I=["onDblclick"],O={class:"modal-dialog"},j={class:"modal-content"},B={class:"modal-header"},F=t("h1",{class:"modal-title fs-5",id:"modalDetailLabel"},"Detail Santri",-1),R={class:"modal-body"},E=t("p",{class:"text-sm text-warning fst-italic"},[k(" *) Data ini bersifat secondary, untuk data lebih lanjut silahkan lihat di "),t("a",{href:"https://nuruljadid.app",style:{"text-decoration":"none"},target:"_blank",class:"text-info"},[t("b",null,"PEDATREN")])],-1),$={class:"row"},M={class:"col-md-8 order-sm-2 order-md-2"},W={class:"mb-3 row"},q=t("label",{class:"col-sm-4 col-form-label"},"NIUP",-1),z={class:"col-sm-8"},A={class:"mb-3 row"},J=t("label",{class:"col-sm-4 col-form-label"},"Nama Lengkap",-1),G={class:"col-sm-8"},H={class:"mb-3 row"},Q=t("label",{class:"col-sm-4 col-form-label"},"Tanggal Lahir",-1),X={class:"col-sm-8"},Y=["value"],Z={class:"mb-3 row"},tt=t("label",{class:"col-sm-4 col-form-label"},"Wilayah",-1),at={class:"col-sm-8"},st={class:"mb-3 row"},et=t("label",{class:"col-sm-4 col-form-label"},"Daerah",-1),lt={class:"col-sm-8"},ot={class:"mb-3 row"},it=t("label",{class:"col-sm-4 col-form-label"},"Kamar",-1),nt={class:"col-sm-8"},rt={class:"mb-3 row"},ct=t("label",{class:"col-sm-4 col-form-label"},"Kecamatan",-1),dt={class:"col-sm-8"},mt=["value"],_t={class:"mb-3 row"},pt=t("label",{class:"col-sm-4 col-form-label"},"Kabupaten",-1),ht={class:"col-sm-8"},ut=["value"],bt={class:"mb-3 row"},gt=t("label",{class:"col-sm-4 col-form-label"},"Provinsi",-1),vt={class:"col-sm-8"},wt=["value"],yt={class:"col-md-4 order-sm-1 order-md-2 mb-5 text-end"},ft=["src"],xt={class:"modal-footer"},kt=t("button",{class:"btn btn-primary"},"Lihat Data Rombongan",-1),Lt={__name:"SantriPage",setup(o){const a=D();return v(()=>{a.getData()}),(_,l)=>{const b=w("app-paginate");return c(),d(h,null,[P,L,t("div",N,[t("div",U,[t("small",null,"Total data "+i(s(a).meta.x_total_data),1)]),t("div",C,[n(t("input",{type:"text","onUpdate:modelValue":[l[0]||(l[0]=e=>s(a).params.cari=e),l[1]||(l[1]=(...e)=>s(a).searchPage&&s(a).searchPage(...e))],class:"form-control form-control-sm mb-2",placeholder:"Cari Santri ..."},null,512),[[r,s(a).params.cari]])])]),S,t("div",V,[t("table",K,[T,t("tbody",null,[(c(!0),d(h,null,y(s(a).items,(e,p)=>(c(),d("tr",{style:{cursor:"pointer"},key:p,onDblclick:Dt=>s(a).handleDoubelClick(e.uuid)},[t("td",null,i(p+1+(s(a).params.page-1)*s(a).params.limit),1),t("td",null,i(e.raw.warga_pesantren.niup),1),t("td",null,i(e.nama_lengkap),1),t("td",null,i(e.raw.jenis_kelamin),1),t("td",null,i(e.raw.domisili_santri[e.raw.domisili_santri.length-1].wilayah),1),t("td",null,i(e.raw.domisili_santri[e.raw.domisili_santri.length-1].blok),1),t("td",null,i(e.raw.kabupaten),1),t("td",null,[t("i",null,i(e.status_kepulangan),1)])],40,I))),128))])])]),s(a).meta.x_total_data?(c(),f(b,{key:0,meta:s(a).meta,per_page:s(a).params.limit,onSetPage:l[2]||(l[2]=e=>s(a).setPage(e)),onNext:s(a).nexPage,onPrev:s(a).prevPage,onLast:s(a).setPage,onFirst:s(a).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):u("",!0),s(a).isOpenDetail===!0?(c(),d("div",{key:1,class:x(["modal fade modal-lg",{show:s(a).isOpenDetail}]),style:{display:"block"},id:"modalDetail",tabindex:"-1","aria-labelledby":"modalDetailLabel","aria-hidden":"true"},[t("div",O,[t("div",j,[t("div",B,[F,t("button",{class:"btn-close",type:"button",onClick:l[3]||(l[3]=e=>s(a).isOpenDetail=!1)})]),t("div",R,[E,t("div",$,[t("div",M,[t("div",W,[q,t("div",z,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[4]||(l[4]=e=>s(a).item.raw.warga_pesantren.niup=e)},null,512),[[r,s(a).item.raw.warga_pesantren.niup]])])]),t("div",A,[J,t("div",G,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[5]||(l[5]=e=>s(a).item.raw.nama_lengkap=e)},null,512),[[r,s(a).item.raw.nama_lengkap]])])]),t("div",H,[Q,t("div",X,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(a).item.raw.tempat_lahir+", "+s(a).item.raw.tanggal_lahir},null,8,Y)])]),t("div",Z,[tt,t("div",at,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[6]||(l[6]=e=>s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].wilayah=e)},null,512),[[r,s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].wilayah]])])]),t("div",st,[et,t("div",lt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[7]||(l[7]=e=>s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].blok=e)},null,512),[[r,s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].blok]])])]),t("div",ot,[it,t("div",nt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[8]||(l[8]=e=>s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].kamar=e)},null,512),[[r,s(a).item.raw.domisili_santri[s(a).item.raw.domisili_santri.length-1].kamar]])])]),t("div",rt,[ct,t("div",dt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(a).item.raw.kecamatan},null,8,mt)])]),t("div",_t,[pt,t("div",ht,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(a).item.raw.kabupaten},null,8,ut)])]),t("div",bt,[gt,t("div",vt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(a).item.raw.provinsi},null,8,wt)])])]),t("div",yt,[t("img",{src:s(a).fotoDiri,alt:"foto-diri",class:"img-thumbnail"},null,8,ft)])])]),t("div",xt,[kt,t("button",{class:"btn btn-secondary",onClick:l[9]||(l[9]=e=>s(a).isOpenDetail=!1)}," Tutup ")])])])],2)):u("",!0)],64)}}};export{Lt as default};
