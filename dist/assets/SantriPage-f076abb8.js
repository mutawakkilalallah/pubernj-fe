import{x as f,B as m,o as x,a as _,g as r,c as d,b as t,t as i,u as e,d as n,v as c,F as k,q as D,e as w,C as h,n as P,k as b,m as N,l as L}from"./index-b7bccb03.js";const C=f("table_santri",{state:()=>({isOpenDetail:!1,items:[],item:{},fotoDiri:"",meta:{},myPage:"",params:{cari:"",page:1,limit:25}}),actions:{nexPage(o){this.params.page=parseInt(o)+1,this.getData()},prevPage(o){this.params.page=parseInt(o)-1,this.getData()},setPage(o){this.params.page=parseInt(o),this.getData()},searchPage(){this.params.page=1,this.getData()},async getData(){const o={params:this.params};try{await m.get("santri",o).then(a=>{(a.data.code=200)&&(this.items=a.data.data,this.meta=a.headers)})}catch{}},async handleDoubelClick(o){try{this.isOpenDetail=!0,await m.get("santri/"+o).then(a=>{(a.data.code=200)&&(this.item=a.data.data,this.getImage(a.data.data.uuid,"medium"))})}catch{}},async getImage(o){try{const a={responseType:"blob"};await m.get("santri/image/"+o,a).then(p=>{this.fotoDiri=URL.createObjectURL(p.data)})}catch(a){console.log("error",a)}}}}),U={class:"z-2"},V=t("h3",{class:"titlePage"},"Data Santri",-1),S=t("hr",null,null,-1),T={class:"serach-box row"},I={class:"col-md-10 d-flex align-items-center mb-2"},K={class:"col-md-2 d-flex align-items-center"},O=t("hr",null,null,-1),B={class:"table-responsive"},F={class:"table table-sm table-hover mt-3"},R=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"NIUP"),t("th",{scope:"col"},"Nama Lengkap"),t("th",{scope:"col"},"JK"),t("th",{scope:"col"},"Wilayah"),t("th",{scope:"col"},"Daerah"),t("th",{scope:"col"},"Kab/Kota"),t("th",{scope:"col"},"Status Kepulangan")])],-1),z=["onDblclick"],E={class:"text-capitalize"},$={class:"modal-dialog"},j={class:"modal-content"},A={class:"modal-header"},M=t("h1",{class:"modal-title fs-5",id:"modalDetailLabel"},"Detail Santri",-1),W={class:"modal-body"},q={class:"alert alert-secondary p-1 fs-6",role:"alert"},J={class:"row"},G={class:"col-md-8 order-sm-2 order-md-2"},H={class:"mb-3 row"},Q=t("label",{class:"col-sm-4 col-form-label"},"NIUP",-1),X={class:"col-sm-8"},Y={class:"mb-3 row"},Z=t("label",{class:"col-sm-4 col-form-label"},"Nama Lengkap",-1),tt={class:"col-sm-8"},at={class:"mb-3 row"},et=t("label",{class:"col-sm-4 col-form-label"},"Tanggal Lahir",-1),st={class:"col-sm-8"},lt=["value"],ot={class:"mb-3 row"},it=t("label",{class:"col-sm-4 col-form-label"},"Wilayah",-1),nt={class:"col-sm-8"},ct={class:"mb-3 row"},rt=t("label",{class:"col-sm-4 col-form-label"},"Daerah",-1),dt={class:"col-sm-8"},mt={class:"mb-3 row"},_t=t("label",{class:"col-sm-4 col-form-label"},"Kamar",-1),pt={class:"col-sm-8"},ut={class:"mb-3 row"},ht=t("label",{class:"col-sm-4 col-form-label"},"Kecamatan",-1),bt={class:"col-sm-8"},gt=["value"],vt={class:"mb-3 row"},yt=t("label",{class:"col-sm-4 col-form-label"},"Kabupaten",-1),ft={class:"col-sm-8"},xt=["value"],kt={class:"mb-3 row"},Dt=t("label",{class:"col-sm-4 col-form-label"},"Provinsi",-1),wt={class:"col-sm-8"},Pt=["value"],Nt={class:"col-md-4 order-sm-1 order-md-2 mb-5 text-end"},Lt=["src"],Ct={class:"modal-footer"},Ut=t("button",{class:"btn btn-primary"},"Lihat Data Rombongan",-1),Tt={__name:"SantriPage",setup(o){const a=C();return x(()=>{a.getData()}),(p,l)=>{const g=_("app-paginate"),v=_("font-awesome-icon"),y=_("router-link");return r(),d("div",U,[V,S,t("div",T,[t("div",I,[t("small",null,"Total data "+i(e(a).meta.x_total_data),1)]),t("div",K,[n(t("input",{type:"text","onUpdate:modelValue":[l[0]||(l[0]=s=>e(a).params.cari=s),l[1]||(l[1]=(...s)=>e(a).searchPage&&e(a).searchPage(...s))],class:"form-control form-control-sm mb-2",placeholder:"Cari Santri ..."},null,512),[[c,e(a).params.cari]])])]),O,t("div",B,[t("table",F,[R,t("tbody",null,[(r(!0),d(k,null,D(e(a).items,(s,u)=>(r(),d("tr",{style:{cursor:"pointer"},key:u,onDblclick:Vt=>e(a).handleDoubelClick(s.uuid)},[t("td",null,i(u+1+(e(a).params.page-1)*e(a).params.limit),1),t("td",null,i(s.niup),1),t("td",null,i(s.nama_lengkap),1),t("td",null,i(s.jenis_kelamin),1),t("td",null,i(s.wilayah?s.wilayah:"-"),1),t("td",null,i(s.blok?s.blok:"-"),1),t("td",null,i(s.kabupaten),1),t("td",E,[t("i",null,i(s.status_kepulangan),1)])],40,z))),128))])])]),e(a).meta.x_total_data?(r(),w(g,{key:0,meta:e(a).meta,per_page:e(a).params.limit,onSetPage:l[2]||(l[2]=s=>e(a).setPage(s)),onNext:e(a).nexPage,onPrev:e(a).prevPage,onLast:e(a).setPage,onFirst:e(a).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):h("",!0),e(a).isOpenDetail===!0?(r(),d("div",{key:1,class:P(["modal fade modal-lg",{show:e(a).isOpenDetail}]),style:{display:"block"},id:"modalDetail",tabindex:"-1","aria-labelledby":"modalDetailLabel","aria-hidden":"true"},[t("div",$,[t("div",j,[t("div",A,[M,t("button",{class:"btn-close",type:"button",onClick:l[3]||(l[3]=s=>e(a).isOpenDetail=!1)})]),t("div",W,[t("p",q,[t("i",null,[b(v,{icon:"bell",class:"icon"}),N(" Data santri hanya bersifat temporary sebagai kebutuhan Pulang Bersama, untuk data lebih detail silahkan lihat di Aplikasi PEDATREN")])]),t("div",J,[t("div",G,[t("div",H,[Q,t("div",X,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[4]||(l[4]=s=>e(a).item.niup=s)},null,512),[[c,e(a).item.niup]])])]),t("div",Y,[Z,t("div",tt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[5]||(l[5]=s=>e(a).item.nama_lengkap=s)},null,512),[[c,e(a).item.nama_lengkap]])])]),t("div",at,[et,t("div",st,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:e(a).item.raw.tempat_lahir+", "+e(a).item.raw.tanggal_lahir},null,8,lt)])]),t("div",ot,[it,t("div",nt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[6]||(l[6]=s=>e(a).item.wilayah=s)},null,512),[[c,e(a).item.wilayah]])])]),t("div",ct,[rt,t("div",dt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[7]||(l[7]=s=>e(a).item.blok=s)},null,512),[[c,e(a).item.blok]])])]),t("div",mt,[_t,t("div",pt,[n(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":l[8]||(l[8]=s=>e(a).item.raw.domisili_santri[e(a).item.raw.domisili_santri.length-1].kamar=s)},null,512),[[c,e(a).item.raw.domisili_santri[e(a).item.raw.domisili_santri.length-1].kamar]])])]),t("div",ut,[ht,t("div",bt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:e(a).item.kecamatan},null,8,gt)])]),t("div",vt,[yt,t("div",ft,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:e(a).item.kabupaten},null,8,xt)])]),t("div",kt,[Dt,t("div",wt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:e(a).item.provinsi},null,8,Pt)])])]),t("div",Nt,[t("img",{src:e(a).fotoDiri,alt:"foto-diri",class:"img-thumbnail"},null,8,Lt)])])]),t("div",Ct,[b(y,{to:{name:"penumpang-detail",params:{uuid:e(a).item.uuid}}},{default:L(()=>[Ut]),_:1},8,["to"]),t("button",{class:"btn btn-secondary",onClick:l[9]||(l[9]=s=>e(a).isOpenDetail=!1)}," Tutup ")])])])],2)):h("",!0)])}}};export{Tt as default};
