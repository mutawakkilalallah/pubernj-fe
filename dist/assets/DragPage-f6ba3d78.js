import{C as x,I as f,y,o as d,c as u,b as t,d as h,Q as S,u as s,F as p,l as D,t as n,v,k as _,n as b}from"./index-b14a9fb6.js";const k=x("table_drag",{state:()=>({roles1:[],items1:[],params1:{cari:"",role:"daerah"},roles2:[],items2:[],params2:{cari:"",role:"wilayah"}}),actions:{async getData1(){const l={params:this.params1};try{await f.get("user",l).then(a=>{(a.data.code=200)&&(this.items1=a.data.data,this.roles1=a.data.filter.role)})}catch{}},async getData2(){const l={params:this.params2};try{await f.get("user",l).then(a=>{(a.data.code=200)&&(this.items2=a.data.data,this.roles2=a.data.filter.role)})}catch{}}}}),I=x("form_drag",{state:()=>({formSatu:{id_user:[],role:""},formDua:{id_user:[],role:""},lastSelectedIndexSatu:null,lastSelectedIndexDua:null}),actions:{handleRowClickSatu(l){if(event.shiftKey&&this.lastSelectedIndexSatu!==null){const a=Math.min(l,this.lastSelectedIndexSatu),r=Math.max(l,this.lastSelectedIndexSatu);for(let i=a+1;i<=r;i++)this.addIdUserSatu(i)}else this.addIdUserSatu(l);this.lastSelectedIndexSatu=l},handleRowClickDua(l){if(event.shiftKey&&this.lastSelectedIndexDua!==null){const a=Math.min(l,this.lastSelectedIndexDua),r=Math.max(l,this.lastSelectedIndexDua);for(let i=a+1;i<=r;i++)this.addIdUserDua(i)}else this.addIdUserDua(l);this.lastSelectedIndexDua=l},addIdUserSatu(l){const a=this.formSatu.id_user.indexOf(l);a===-1?this.formSatu.id_user.push(l):this.formSatu.id_user.splice(a,1),console.log(this.formSatu.id_user.length)},addIdUserDua(l){const a=this.formDua.id_user.indexOf(l);a===-1?this.formDua.id_user.push(l):this.formDua.id_user.splice(a,1),console.log(this.formDua.id_user.length)},dragStartSatu(l){},allowDropDua(l){l.preventDefault()},dropDua(l){l.preventDefault(),this.formDua.role="daerah",this.editDataRole(this.formDua),this.formDua.id_user=[],this.formDua.role=""},dragStartDua(l){},allowDropSatu(l){l.preventDefault()},dropSatu(l){l.preventDefault(),this.formSatu.role="wilayah",this.editDataRole(this.formSatu),this.formSatu.id_user=[],this.formSatu.role=""},async editDataRole(l){try{await f.put("user/roles",l).then(a=>{console.log("success");const r=k();r.getData1(),r.getData2()})}catch{}}}}),C={class:"row"},U={class:"col-md-6"},M=t("h3",null,"Drag & Drop (1)",-1),R=t("hr",null,null,-1),T={class:"filter-box mb-5 row"},A={class:"col-md-2"},N=t("option",{value:"",selected:""},"Semua Hak Akses",-1),V=["value"],H={class:"serach-box row"},K={class:"col-md-10 d-flex align-items-center mb-2"},$={class:"col-md-2 d-flex align-items-center"},B=t("hr",null,null,-1),F={class:"badge bg-success"},O={class:"table-responsive"},z=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Hak Akses"),t("th",{scope:"col"},"Daerah")])],-1),E=["onDragstart","onClick"],L={class:"col-md-6"},P=t("h3",null,"Drag & Drop (2)",-1),Q=t("hr",null,null,-1),j={class:"filter-box mb-5 row"},q={class:"col-md-2"},G=t("option",{value:"",selected:""},"Semua Hak Akses",-1),J=["value"],W={class:"serach-box row"},X={class:"col-md-10 d-flex align-items-center mb-2"},Y={class:"col-md-2 d-flex align-items-center"},Z=t("hr",null,null,-1),tt={class:"badge bg-success"},et={class:"table-responsive"},at=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Hak Akses"),t("th",{scope:"col"},"Daerah")])],-1),st=["onDragstart","onClick"],ot={__name:"DragPage",setup(l){const a=k(),r=I(),i=m=>r.formSatu.id_user.includes(m),w=m=>r.formDua.id_user.includes(m);return y(()=>{a.getData1(),a.getData2()}),(m,o)=>(d(),u("div",C,[t("div",U,[M,R,t("div",T,[t("div",A,[h(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[0]||(o[0]=e=>s(a).params1.role=e),onChange:o[1]||(o[1]=(...e)=>s(a).getData1&&s(a).getData1(...e))},[N,(d(!0),u(p,null,D(s(a).roles1,e=>(d(),u("option",{key:e,value:e.key},n(e.value),9,V))),128))],544),[[S,s(a).params1.role]])])]),t("div",H,[t("div",K,[t("small",null,"Total data "+n(s(a).items1.length),1)]),t("div",$,[h(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>s(a).params1.cari=e),class:"form-control form-control-sm mb-2",placeholder:"Cari User ...",onKeyup:o[3]||(o[3]=(...e)=>s(a).getData1&&s(a).getData1(...e))},null,544),[[v,s(a).params1.cari]])])]),B,_(" Total "),t("p",F,n(s(r).formSatu.id_user.length),1),_(" item dipilih "),t("div",O,[t("table",{class:"table table-sm table-hover mt-3",onDragover:o[4]||(o[4]=(...e)=>s(r).allowDropDua&&s(r).allowDropDua(...e)),onDrop:o[5]||(o[5]=(...e)=>s(r).dropDua&&s(r).dropDua(...e))},[z,t("tbody",null,[(d(!0),u(p,null,D(s(a).items1,(e,c)=>(d(),u("tr",{key:c,draggable:"true",onDragstart:g=>s(r).dragStartSatu(e.id),onClick:g=>s(r).handleRowClickSatu(e.id),class:b({"table-active":i(e.id)})},[t("td",null,n(c+1),1),t("td",null,n(e.santri.raw.nama_lengkap),1),t("td",null,n("@"+e.username),1),t("td",null,n(e.role),1),t("td",null,n(e.santri.raw.domisili_santri[e.santri.raw.domisili_santri.length-1].blok),1)],42,E))),128))])],32)])]),t("div",L,[P,Q,t("div",j,[t("div",q,[h(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[6]||(o[6]=e=>s(a).params2.role=e),onChange:o[7]||(o[7]=(...e)=>s(a).getData2&&s(a).getData2(...e))},[G,(d(!0),u(p,null,D(s(a).roles2,e=>(d(),u("option",{key:e,value:e.key},n(e.value),9,J))),128))],544),[[S,s(a).params2.role]])])]),t("div",W,[t("div",X,[t("small",null,"Total data "+n(s(a).items2.length),1)]),t("div",Y,[h(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=e=>s(a).params2.cari=e),class:"form-control form-control-sm mb-2",placeholder:"Cari User ...",onKeyup:o[9]||(o[9]=(...e)=>s(a).getData2&&s(a).getData2(...e))},null,544),[[v,s(a).params2.cari]])])]),Z,_(" Total "),t("p",tt,n(s(r).formDua.id_user.length),1),_(" item dipilih "),t("div",et,[t("table",{class:"table table-sm table-hover mt-3",onDragover:o[10]||(o[10]=(...e)=>s(r).allowDropSatu&&s(r).allowDropSatu(...e)),onDrop:o[11]||(o[11]=(...e)=>s(r).dropSatu&&s(r).dropSatu(...e))},[at,t("tbody",null,[(d(!0),u(p,null,D(s(a).items2,(e,c)=>(d(),u("tr",{key:c,draggable:"true",onDragstart:g=>s(r).dragStartDua(e.id),onClick:g=>s(r).handleRowClickDua(e.id),class:b({"table-active":w(e.id)})},[t("td",null,n(c+1),1),t("td",null,n(e.santri.raw.nama_lengkap),1),t("td",null,n("@"+e.username),1),t("td",null,n(e.role),1),t("td",null,n(e.santri.raw.domisili_santri[e.santri.raw.domisili_santri.length-1].blok),1)],42,st))),128))])],32)])])]))}};export{ot as default};
