import{x as U,D as w,C as h,S as T,o as S,a as C,g as l,c as d,b as t,u as e,z as p,d as r,E as u,F as _,q as b,t as m,v as g,k as P,l as N,m as v,n as k,w as E,s as j,G as D}from"./index-2c5b04cb.js";import{u as F}from"./index-206ed7f0.js";const f=U("table_armada",{state:()=>({user:localStorage.getItem("user")?w():null,items:[],itemsPendamping:[],filter:{area:[],dropspot:[]},meta:{},paramsPendamping:{cari:"",role:"pendamping"},params:{cari:"",area:"",dropspot:"",type:"",jenis:""}}),actions:{async getData(){const i={params:this.params};try{await h.get("armada",i).then(n=>{(n.data.code=200)&&(this.items=n.data.data,this.filter.area=n.data.filter.area,this.meta=n.headers)})}catch{}},async getPendamping(){const i={params:this.paramsPendamping};try{await h.get("user",i).then(n=>{(n.data.code=200)&&(this.itemsPendamping=n.data.data)})}catch{}},async getDropspot(){this.params.dropspot="",this.getData();const i={params:{area:this.params.area}};try{await h.get("dropspot",i).then(n=>{(n.data.code=200)&&(this.filter.dropspot=n.data.data)})}catch{}}}}),M=U("form_armada",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isOpenPendamping:!1,isArea:[],isDropspot:[],idEdit:"",idArea:"",namaArea:"",namaDropsot:"",data_pendamping:{},formPendamping:{user_uuid:""},form:{nama:"",type:"",jenis:"",harga:"",dropspot_id:""}}),actions:{resetForm(){this.idArea="",this.form.nama="",this.form.type="",this.form.jenis="",this.form.harga="",this.form.dropspot_id=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},setOpenPendamping(i){this.idEdit=i.id,this.data_pendamping=i.user?i.user:{},this.isOpenPendamping=!this.isOpenPendamping,this.formPendamping.user_uuid=""},async setPendamping(i){this.formPendamping.user_uuid=i;try{await h.put(`armada/pendamping/${this.idEdit}`,this.formPendamping).then(n=>{this.isOpenPendamping=!1,this.resetForm(),this.formPendamping.user_uuid="";const a=f();a.paramsPendamping.cari="",a.itemsPendamping=[],a.getData()})}catch{}},async deletePendamping(){try{await h.put(`armada/pendamping/delete/${this.idEdit}`).then(i=>{this.isOpenPendamping=!1,this.resetForm(),this.formPendamping.user_uuid="";const n=f();n.paramsPendamping.cari="",n.itemsPendamping=[],n.getData()})}catch{}},getArea(){try{h.get("area").then(i=>{this.isArea=i.data.data})}catch{}},async getDropspot(){this.form.dropspot_id="";const i={params:{area:this.idArea}};try{await h.get("dropspot",i).then(n=>{this.isDropspot=n.data.data})}catch{}},async tambahData(){try{await h.post("armada",this.form),this.isOpenAdd=!1,f().getData(),this.resetForm()}catch{}},handleDoubleClik(i){this.idEdit=i.id,this.idArea=i.dropspot.area_id,this.namaDropsot=i.dropspot.nama,this.form.nama=i.nama,this.form.type=i.type,this.form.jenis=i.jenis,this.form.harga=i.harga,this.getDropspot(),this.form.dropspot_id=i.dropspot_id,this.isOpenEdit=!0},async editData(){try{await h.put(`armada/${this.idEdit}`,this.form).then(i=>{this.isOpenEdit=!1,this.resetForm(),f().getData()})}catch{}},async deleteData(){T.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(i=>{i.isConfirmed&&h.delete(`armada/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),f().getData()})})}}}),B={class:"row"},L=t("div",{class:"col-md-8"},[t("h3",{class:"titlePage"},"Data Armada")],-1),$={key:0,class:"col-md-4 text-end"},H=t("hr",null,null,-1),I={class:"filter-box mb-5 row"},J={key:0,class:"col-md-2"},K=t("option",{value:"",selected:""},"Semua Area",-1),z=["value"],G=["disabled"],R=t("option",{value:"",selected:""},"Semua Dropsot",-1),q=["value"],Q={class:"col-md-2"},W=D('<option value="" selected>Semua Type</option><option value="bus" selected>BUS</option><option value="minibus" selected>MINIBUS</option><option value="elf" selected>ELF</option><option value="hiace" selected>HIACE</option><option value="mpv" selected>MPV</option>',6),X=[W],Y=t("option",{value:"",selected:""},"Semua Jenis",-1),Z=t("option",{value:"putra",selected:""},"PUTRA",-1),tt=t("option",{value:"putri",selected:""},"PUTRI",-1),et=[Y,Z,tt],st={class:"serach-box row"},at={class:"col-md-10 d-flex align-items-center mb-2"},ot={class:"col-md-2 d-flex align-items-center"},nt=t("hr",null,null,-1),it={class:"table-responsive"},lt={class:"table table-sm table-hover mt-3"},dt=t("th",{scope:"col"},"No",-1),rt=t("th",{scope:"col"},"Nama Armada",-1),mt=t("th",{scope:"col"},"Type",-1),pt=t("th",{scope:"col"},"Jenis",-1),ut={key:0,scope:"col"},ct={key:1,scope:"col"},ht=t("th",{scope:"col"},"Dropspot",-1),_t=["onDblclick"],bt={key:0},gt={class:"btn btn-primary btn-sm"},ft={key:1},yt=["onClick"],vt={class:"modal-dialog"},Pt={class:"modal-content"},kt={class:"modal-header"},Dt=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Armada",-1),At={class:"modal-body"},Ot={class:"form-group mb-3"},Ct=t("small",null,"Nama Armada",-1),Et=t("small",{class:"fst-italic text-danger"},"*) saat membuat armada penamaan masukkan urutan saja contoh 1,2,3 dari setiap area",-1),Ut={class:"form-group mb-3"},xt=t("small",null,"Type",-1),Vt=D('<option value="" selected>Pilih Type</option><option value="bus" selected>bus</option><option value="minibus" selected>minibus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',6),wt=[Vt],Tt={class:"form-group mb-3"},St=t("small",null,"Jenis",-1),Nt=t("option",{value:"",selected:""},"Pilih Jenis",-1),jt=t("option",{value:"putra",selected:""},"putra",-1),Ft=t("option",{value:"putri",selected:""},"putri",-1),Mt=[Nt,jt,Ft],Bt={class:"form-group mb-3"},Lt=t("small",null,"Area",-1),$t=t("option",{value:"",selected:""},"Pilih Area",-1),Ht=["value"],It={class:"form-group mb-3"},Jt=t("small",null,"Dropspot",-1),Kt=["disabled"],zt=t("option",{value:"",selected:""},"Pilih Dropsot",-1),Gt=["value"],Rt={class:"form-group mb-3"},qt=t("small",null,"Harga Armada",-1),Qt={class:"modal-footer"},Wt=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Xt={class:"modal-dialog"},Yt={class:"modal-content"},Zt={class:"modal-header"},te=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Armada",-1),ee={class:"modal-body"},se={class:"form-group mb-3"},ae=t("small",null,"Nama Armada",-1),oe={class:"form-group mb-3"},ne=t("small",null,"Type",-1),ie=D('<option value="bus" selected>bus</option><option value="minibus" selected>minibus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',5),le=[ie],de={class:"form-group mb-3"},re=t("small",null,"Jenis",-1),me=t("option",{value:"putra",selected:""},"putra",-1),pe=t("option",{value:"putri",selected:""},"putri",-1),ue=[me,pe],ce={class:"form-group mb-3"},he=t("small",null,"Area",-1),_e=t("option",{value:"",selected:""},"Pilih Area",-1),be=["value"],ge={class:"form-group mb-3"},fe=t("small",null,"Dropspot",-1),ye=["disabled"],ve={key:0,value:"",selected:""},Pe={value:"",selected:""},ke=["value"],De={class:"form-group mb-3"},Ae=t("small",null,"Harga Armada",-1),Oe={class:"modal-footer"},Ce={key:1,type:"submit",class:"btn btn-sm btn-primary"},Ee={class:"modal-dialog"},Ue={class:"modal-content"},xe={class:"modal-header"},Ve=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"}," Kelola Pendamping ",-1),we={class:"modal-body"},Te=t("b",null,"Nama Pendamping : ",-1),Se=t("b",null,"NO. HP : ",-1),Ne={class:"modal-body"},je={class:"table-responsive"},Fe={class:"table table-sm table-hover mt-3"},Me=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"})])],-1),Be=["onClick"],Le={class:"modal-footer"},Je={__name:"ArmadaPage",setup(i){const n=f(),a=M(),c=F();function x(){j.replace("/armada-print")}return S(()=>{n.getData(),a.getArea()}),($e,o)=>{const A=C("font-awesome-icon"),V=C("router-link");return l(),d(_,null,[t("div",B,[L,e(c).user.role!="pendamping"&&e(c).user.role!="p4nj"?(l(),d("div",$,[t("button",{class:"btn btn-outline-primary",type:"button",onClick:x}," Page Print ")])):p("",!0)]),H,t("div",I,[e(c).user.role!="pendamping"?(l(),d("div",J,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[0]||(o[0]=s=>e(n).params.area=s),onChange:o[1]||(o[1]=(...s)=>e(n).getDropspot&&e(n).getDropspot(...s))},[K,(l(!0),d(_,null,b(e(n).filter.area,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,z))),128))],544),[[u,e(n).params.area]]),r(t("select",{class:"form-select form-select-sm mb-2",disabled:e(n).params.area==="","onUpdate:modelValue":o[2]||(o[2]=s=>e(n).params.dropspot=s),onChange:o[3]||(o[3]=(...s)=>e(n).getData&&e(n).getData(...s))},[R,(l(!0),d(_,null,b(e(n).filter.dropspot,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,q))),128))],40,G),[[u,e(n).params.dropspot]])])):p("",!0),t("div",Q,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[4]||(o[4]=s=>e(n).params.type=s),onChange:o[5]||(o[5]=(...s)=>e(n).getData&&e(n).getData(...s))},X,544),[[u,e(n).params.type]]),r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[6]||(o[6]=s=>e(n).params.jenis=s),onChange:o[7]||(o[7]=(...s)=>e(n).getData&&e(n).getData(...s))},et,544),[[u,e(n).params.jenis]])])]),t("div",st,[t("div",at,[t("small",null,"Total data "+m(e(n).meta.x_total_data),1)]),t("div",ot,[r(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>e(n).params.cari=s),class:"form-control form-control-sm mb-2",placeholder:"Cari Armada ...",onKeyup:o[9]||(o[9]=(...s)=>e(n).getData&&e(n).getData(...s))},null,544),[[g,e(n).params.cari]])])]),nt,e(n).user.role=="sysadmin"?(l(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:o[10]||(o[10]=(...s)=>e(a).setOpenAdd&&e(a).setOpenAdd(...s))}," Tambah Armada ")):p("",!0),t("div",it,[t("table",lt,[t("thead",null,[t("tr",null,[dt,rt,mt,pt,e(c).user.role==="sysadmin"||e(c).user.role==="admin"?(l(),d("th",ut," Penumpang ")):p("",!0),e(c).user.role==="sysadmin"||e(c).user.role==="admin"?(l(),d("th",ct," Pendamping ")):p("",!0),ht])]),t("tbody",null,[(l(!0),d(_,null,b(e(n).items,(s,y)=>(l(),d("tr",{key:y,onDblclick:O=>e(n).user.role==="sysadmin"&&e(a).handleDoubleClik(s)},[t("td",null,m(y+1),1),t("td",null,m(s.nama),1),t("td",null,m(s.type.toUpperCase()),1),t("td",null,m(s.jenis.toUpperCase()),1),e(c).user.role==="sysadmin"||e(c).user.role==="admin"?(l(),d("td",bt,[P(V,{to:{name:"armada-detail",params:{id:s.id}}},{default:N(()=>[t("button",gt,[P(A,{icon:"clipboard",class:"icon"}),v(" Daftar Penumpang ")])]),_:2},1032,["to"])])):p("",!0),e(c).user.role==="sysadmin"||e(c).user.role==="admin"?(l(),d("td",ft,[t("button",{class:"btn btn-primary btn-sm",onClick:O=>e(a).setOpenPendamping(s)},[P(A,{icon:"user-md",class:"icon"}),v(" Pendamping ")],8,yt)])):p("",!0),t("td",null,m(s.dropspot.nama),1)],40,_t))),128))])])]),e(a).isOpenAdd===!0?(l(),d("div",{key:1,class:k(["modal fade",{show:e(a).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",vt,[t("div",Pt,[t("div",kt,[Dt,t("button",{class:"btn-close",type:"button",onClick:o[11]||(o[11]=(...s)=>e(a).setOpenAdd&&e(a).setOpenAdd(...s))})]),t("form",{onSubmit:o[20]||(o[20]=E((...s)=>e(a).tambahData&&e(a).tambahData(...s),["prevent"]))},[t("div",At,[t("div",Ot,[Ct,r(t("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=s=>e(a).form.nama=s),placeholder:"Masukkan nama armada ..",class:"form-control mt-2"},null,512),[[g,e(a).form.nama]]),Et]),t("div",Ut,[xt,r(t("select",{class:"form-select","onUpdate:modelValue":o[13]||(o[13]=s=>e(a).form.type=s)},wt,512),[[u,e(a).form.type]])]),t("div",Tt,[St,r(t("select",{class:"form-select","onUpdate:modelValue":o[14]||(o[14]=s=>e(a).form.jenis=s)},Mt,512),[[u,e(a).form.jenis]])]),t("div",Bt,[Lt,r(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=s=>e(a).idArea=s),onChange:o[16]||(o[16]=(...s)=>e(a).getDropspot&&e(a).getDropspot(...s))},[$t,(l(!0),d(_,null,b(e(a).isArea,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,Ht))),128))],544),[[u,e(a).idArea]])]),t("div",It,[Jt,r(t("select",{class:"form-select","onUpdate:modelValue":o[17]||(o[17]=s=>e(a).form.dropspot_id=s),disabled:e(a).idArea===""},[zt,(l(!0),d(_,null,b(e(a).isDropspot,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,Gt))),128))],8,Kt),[[u,e(a).form.dropspot_id]])]),t("div",Rt,[qt,r(t("input",{type:"text","onUpdate:modelValue":o[18]||(o[18]=s=>e(a).form.harga=s),placeholder:"Masukkan harga armada ..",class:"form-control mt-2"},null,512),[[g,e(a).form.harga]])])]),t("div",Qt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=(...s)=>e(a).setOpenAdd&&e(a).setOpenAdd(...s))}," Tutup "),Wt])],32)])])],2)):p("",!0),e(a).isOpenEdit===!0?(l(),d("div",{key:2,class:k(["modal fade",{show:e(a).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",Xt,[t("div",Yt,[t("div",Zt,[te,t("button",{class:"btn-close",type:"button",onClick:o[21]||(o[21]=(...s)=>e(a).setOpenEdit&&e(a).setOpenEdit(...s))})]),t("form",{onSubmit:o[31]||(o[31]=E((...s)=>e(a).editData&&e(a).editData(...s),["prevent"]))},[t("div",ee,[t("div",se,[ae,r(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[22]||(o[22]=s=>e(a).form.nama=s)},null,512),[[g,e(a).form.nama]])]),t("div",oe,[ne,r(t("select",{class:"form-select","onUpdate:modelValue":o[23]||(o[23]=s=>e(a).form.type=s)},le,512),[[u,e(a).form.type]])]),t("div",de,[re,r(t("select",{class:"form-select","onUpdate:modelValue":o[24]||(o[24]=s=>e(a).form.jenis=s)},ue,512),[[u,e(a).form.jenis]])]),t("div",ce,[he,r(t("select",{class:"form-select","onUpdate:modelValue":o[25]||(o[25]=s=>e(a).idArea=s),onChange:o[26]||(o[26]=(...s)=>e(a).getDropspot&&e(a).getDropspot(...s))},[_e,(l(!0),d(_,null,b(e(a).isArea,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,be))),128))],544),[[u,e(a).idArea]])]),t("div",ge,[fe,r(t("select",{class:"form-select","onUpdate:modelValue":o[27]||(o[27]=s=>e(a).form.dropspot_id=s),disabled:e(a).idArea===""},[e(a).form.dropspot_id===""?(l(),d("option",ve," Pilih Dropspot ")):p("",!0),t("option",Pe,m(e(a).namaDropsot),1),(l(!0),d(_,null,b(e(a).isDropspot,s=>(l(),d("option",{key:s,value:s.id},m(s.nama),9,ke))),128))],8,ye),[[u,e(a).form.dropspot_id]])]),t("div",De,[Ae,r(t("input",{type:"text","onUpdate:modelValue":o[28]||(o[28]=s=>e(a).form.harga=s),placeholder:"Masukkan harga armada ..",class:"form-control mt-2"},null,512),[[g,e(a).form.harga]])])]),t("div",Oe,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[29]||(o[29]=(...s)=>e(a).setOpenEdit&&e(a).setOpenEdit(...s))}," Tutup "),e(n).user.role=="sysadmin"?(l(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[30]||(o[30]=(...s)=>e(a).deleteData&&e(a).deleteData(...s))}," Hapus ")):p("",!0),e(n).user.role=="sysadmin"?(l(),d("button",Ce," Simpan ")):p("",!0)])],32)])])],2)):p("",!0),e(a).isOpenPendamping===!0?(l(),d("div",{key:3,class:k(["modal fade modal-lg",{show:e(a).isOpenPendamping}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",Ee,[t("div",Ue,[t("div",xe,[Ve,t("button",{class:"btn-close",type:"button",onClick:o[32]||(o[32]=(...s)=>e(a).setOpenPendamping&&e(a).setOpenPendamping(...s))})]),t("form",null,[t("div",we,[t("p",null,[Te,v(m(e(a).data_pendamping?e(a).data_pendamping.nama_lengkap:"-"),1)]),t("p",null,[Se,v(m(e(a).data_pendamping?e(a).data_pendamping.no_hp:"-"),1)]),e(a).data_pendamping.nama_lengkap?(l(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[33]||(o[33]=s=>e(a).deletePendamping())}," HAPUS PENDAMPING ")):p("",!0)]),t("div",Ne,[r(t("input",{type:"text","onUpdate:modelValue":o[34]||(o[34]=s=>e(n).paramsPendamping.cari=s),class:"form-control mb-2",placeholder:"Cari Pendamping ...",onKeyup:o[35]||(o[35]=(...s)=>e(n).getPendamping&&e(n).getPendamping(...s))},null,544),[[g,e(n).paramsPendamping.cari]]),t("div",je,[t("table",Fe,[Me,t("tbody",null,[(l(!0),d(_,null,b(e(n).itemsPendamping,(s,y)=>(l(),d("tr",{key:y},[t("td",null,m(y+1),1),t("td",null,m(s.nama_lengkap),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm",onClick:O=>e(a).setPendamping(s.uuid)}," Pilih ",8,Be)])]))),128))])])])]),t("div",Le,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[36]||(o[36]=(...s)=>e(a).setOpenPendamping&&e(a).setOpenPendamping(...s))}," Tutup ")])])])])],2)):p("",!0)],64)}}};export{Je as default};
