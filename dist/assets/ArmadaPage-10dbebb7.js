import{x as E,D as V,C as u,S as w,o as T,a as O,g as l,c as d,b as t,d as r,E as m,u as s,F as c,q as h,t as p,v as b,z as _,k as y,l as S,m as v,n as P,w as C,s as N,G as D}from"./index-4729d31f.js";const g=E("table_armada",{state:()=>({user:localStorage.getItem("user")?V():null,items:[],itemsPendamping:[],filter:{area:[],dropspot:[]},meta:{},paramsPendamping:{cari:"",role:"pendamping"},params:{cari:"",area:"",dropspot:"",type:"",jenis:""}}),actions:{async getData(){const i={params:this.params};try{await u.get("armada",i).then(n=>{(n.data.code=200)&&(this.items=n.data.data,this.filter.area=n.data.filter.area,this.meta=n.headers)})}catch{}},async getPendamping(){const i={params:this.paramsPendamping};try{await u.get("user",i).then(n=>{(n.data.code=200)&&(this.itemsPendamping=n.data.data)})}catch{}},async getDropspot(){this.params.dropspot="",this.getData();const i={params:{area:this.params.area}};try{await u.get("dropspot",i).then(n=>{(n.data.code=200)&&(this.filter.dropspot=n.data.data)})}catch{}}}}),j=E("form_armada",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isOpenPendamping:!1,isArea:[],isDropspot:[],idEdit:"",idArea:"",namaArea:"",namaDropsot:"",data_pendamping:{},formPendamping:{user_uuid:""},form:{nama:"",type:"",jenis:"",harga:"",dropspot_id:""}}),actions:{resetForm(){this.idArea="",this.form.nama="",this.form.type="",this.form.jenis="",this.form.harga="",this.form.dropspot_id=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},setOpenPendamping(i){this.idEdit=i.id,this.data_pendamping=i.user?i.user:{},this.isOpenPendamping=!this.isOpenPendamping,this.formPendamping.user_uuid=""},async setPendamping(i){this.formPendamping.user_uuid=i;try{await u.put(`armada/pendamping/${this.idEdit}`,this.formPendamping).then(n=>{this.isOpenPendamping=!1,this.resetForm(),this.formPendamping.user_uuid="";const a=g();a.paramsPendamping.cari="",a.itemsPendamping=[],a.getData()})}catch{}},async deletePendamping(){try{await u.put(`armada/pendamping/delete/${this.idEdit}`).then(i=>{this.isOpenPendamping=!1,this.resetForm(),this.formPendamping.user_uuid="";const n=g();n.paramsPendamping.cari="",n.itemsPendamping=[],n.getData()})}catch{}},getArea(){try{u.get("area").then(i=>{this.isArea=i.data.data})}catch{}},async getDropspot(){this.form.dropspot_id="";const i={params:{area:this.idArea}};try{await u.get("dropspot",i).then(n=>{this.isDropspot=n.data.data})}catch{}},async tambahData(){try{await u.post("armada",this.form),this.isOpenAdd=!1,g().getData(),this.resetForm()}catch{}},handleDoubleClik(i){this.idEdit=i.id,this.idArea=i.dropspot.area_id,this.namaDropsot=i.dropspot.nama,this.form.nama=i.nama,this.form.type=i.type,this.form.jenis=i.jenis,this.form.harga=i.harga,this.getDropspot(),this.form.dropspot_id=i.dropspot_id,this.isOpenEdit=!0},async editData(){try{await u.put(`armada/${this.idEdit}`,this.form).then(i=>{this.isOpenEdit=!1,this.resetForm(),g().getData()})}catch{}},async deleteData(){w.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(i=>{i.isConfirmed&&u.delete(`armada/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),g().getData()})})}}}),F=t("div",{class:"col-md-8"},[t("h3",{class:"titlePage"},"Data Armada")],-1),M=t("hr",null,null,-1),B={class:"filter-box mb-5 row"},L={class:"col-md-2"},$=t("option",{value:"",selected:""},"Semua Area",-1),H=["value"],I=["disabled"],J=t("option",{value:"",selected:""},"Semua Dropsot",-1),K=["value"],z={class:"col-md-2"},G=D('<option value="" selected>Semua Type</option><option value="bus" selected>BUS</option><option value="minibus" selected>MINIBUS</option><option value="elf" selected>ELF</option><option value="hiace" selected>HIACE</option><option value="mpv" selected>MPV</option>',6),R=[G],q=t("option",{value:"",selected:""},"Semua Jenis",-1),Q=t("option",{value:"putra",selected:""},"PUTRA",-1),W=t("option",{value:"putri",selected:""},"PUTRI",-1),X=[q,Q,W],Y={class:"serach-box row"},Z={class:"col-md-10 d-flex align-items-center mb-2"},tt={class:"col-md-2 d-flex align-items-center"},et=t("hr",null,null,-1),st={class:"table-responsive"},at={class:"table table-sm table-hover mt-3"},ot=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Armada"),t("th",{scope:"col"},"Type"),t("th",{scope:"col"},"Jenis"),t("th",{scope:"col"},"Penumpang"),t("th",{scope:"col"},"Pendamping"),t("th",{scope:"col"},"Dropspot")])],-1),nt=["onDblclick"],it={class:"btn btn-primary btn-sm"},lt=["onClick"],dt={class:"modal-dialog"},rt={class:"modal-content"},pt={class:"modal-header"},mt=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Armada",-1),ut={class:"modal-body"},ct={class:"form-group mb-3"},ht=t("small",null,"Nama Armada",-1),_t=t("small",{class:"fst-italic text-danger"},"*) saat membuat armada penamaan masukkan urutan saja contoh 1,2,3 dari setiap area",-1),bt={class:"form-group mb-3"},gt=t("small",null,"Type",-1),ft=D('<option value="" selected>Pilih Type</option><option value="bus" selected>bus</option><option value="minibus" selected>minibus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',6),vt=[ft],yt={class:"form-group mb-3"},Pt=t("small",null,"Jenis",-1),Dt=t("option",{value:"",selected:""},"Pilih Jenis",-1),kt=t("option",{value:"putra",selected:""},"putra",-1),At=t("option",{value:"putri",selected:""},"putri",-1),Ot=[Dt,kt,At],Ct={class:"form-group mb-3"},Et=t("small",null,"Area",-1),Ut=t("option",{value:"",selected:""},"Pilih Area",-1),xt=["value"],Vt={class:"form-group mb-3"},wt=t("small",null,"Dropspot",-1),Tt=["disabled"],St=t("option",{value:"",selected:""},"Pilih Dropsot",-1),Nt=["value"],jt={class:"form-group mb-3"},Ft=t("small",null,"Harga Armada",-1),Mt={class:"modal-footer"},Bt=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Lt={class:"modal-dialog"},$t={class:"modal-content"},Ht={class:"modal-header"},It=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Armada",-1),Jt={class:"modal-body"},Kt={class:"form-group mb-3"},zt=t("small",null,"Nama Armada",-1),Gt={class:"form-group mb-3"},Rt=t("small",null,"Type",-1),qt=D('<option value="bus" selected>bus</option><option value="minibus" selected>minibus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',5),Qt=[qt],Wt={class:"form-group mb-3"},Xt=t("small",null,"Jenis",-1),Yt=t("option",{value:"putra",selected:""},"putra",-1),Zt=t("option",{value:"putri",selected:""},"putri",-1),te=[Yt,Zt],ee={class:"form-group mb-3"},se=t("small",null,"Area",-1),ae=t("option",{value:"",selected:""},"Pilih Area",-1),oe=["value"],ne={class:"form-group mb-3"},ie=t("small",null,"Dropspot",-1),le=["disabled"],de={key:0,value:"",selected:""},re={value:"",selected:""},pe=["value"],me={class:"form-group mb-3"},ue=t("small",null,"Harga Armada",-1),ce={class:"modal-footer"},he={key:1,type:"submit",class:"btn btn-sm btn-primary"},_e={class:"modal-dialog"},be={class:"modal-content"},ge={class:"modal-header"},fe=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"}," Kelola Pendamping ",-1),ve={class:"modal-body"},ye=t("b",null,"Nama Pendamping : ",-1),Pe=t("b",null,"NO. HP : ",-1),De={class:"modal-body"},ke={class:"table-responsive"},Ae={class:"table table-sm table-hover mt-3"},Oe=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"})])],-1),Ce=["onClick"],Ee={class:"modal-footer"},Ve={__name:"ArmadaPage",setup(i){const n=g(),a=j();function U(){N.replace("/armada-print")}return T(()=>{n.getData(),a.getArea()}),(Ue,o)=>{const k=O("font-awesome-icon"),x=O("router-link");return l(),d(c,null,[t("div",{class:"row"},[F,t("div",{class:"col-md-4 text-end"},[t("button",{class:"btn btn-outline-primary",type:"button",onClick:U},"Page Print")])]),M,t("div",B,[t("div",L,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[0]||(o[0]=e=>s(n).params.area=e),onChange:o[1]||(o[1]=(...e)=>s(n).getDropspot&&s(n).getDropspot(...e))},[$,(l(!0),d(c,null,h(s(n).filter.area,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,H))),128))],544),[[m,s(n).params.area]]),r(t("select",{class:"form-select form-select-sm mb-2",disabled:s(n).params.area==="","onUpdate:modelValue":o[2]||(o[2]=e=>s(n).params.dropspot=e),onChange:o[3]||(o[3]=(...e)=>s(n).getData&&s(n).getData(...e))},[J,(l(!0),d(c,null,h(s(n).filter.dropspot,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,K))),128))],40,I),[[m,s(n).params.dropspot]])]),t("div",z,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[4]||(o[4]=e=>s(n).params.type=e),onChange:o[5]||(o[5]=(...e)=>s(n).getData&&s(n).getData(...e))},R,544),[[m,s(n).params.type]]),r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[6]||(o[6]=e=>s(n).params.jenis=e),onChange:o[7]||(o[7]=(...e)=>s(n).getData&&s(n).getData(...e))},X,544),[[m,s(n).params.jenis]])])]),t("div",Y,[t("div",Z,[t("small",null,"Total data "+p(s(n).meta.x_total_data),1)]),t("div",tt,[r(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=e=>s(n).params.cari=e),class:"form-control form-control-sm mb-2",placeholder:"Cari Armada ...",onKeyup:o[9]||(o[9]=(...e)=>s(n).getData&&s(n).getData(...e))},null,544),[[b,s(n).params.cari]])])]),et,s(n).user.role=="sysadmin"?(l(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:o[10]||(o[10]=(...e)=>s(a).setOpenAdd&&s(a).setOpenAdd(...e))}," Tambah Armada ")):_("",!0),t("div",st,[t("table",at,[ot,t("tbody",null,[(l(!0),d(c,null,h(s(n).items,(e,f)=>(l(),d("tr",{key:f,onDblclick:A=>s(n).user.role==="sysadmin"&&s(a).handleDoubleClik(e)},[t("td",null,p(f+1),1),t("td",null,p(e.nama),1),t("td",null,p(e.type.toUpperCase()),1),t("td",null,p(e.jenis.toUpperCase()),1),t("td",null,[y(x,{to:{name:"armada-detail",params:{id:e.id}}},{default:S(()=>[t("button",it,[y(k,{icon:"clipboard",class:"icon"}),v(" Daftar Penumpang ")])]),_:2},1032,["to"])]),t("td",null,[t("button",{class:"btn btn-primary btn-sm",onClick:A=>s(a).setOpenPendamping(e)},[y(k,{icon:"user-md",class:"icon"}),v(" Pendamping ")],8,lt)]),t("td",null,p(e.dropspot.nama),1)],40,nt))),128))])])]),s(a).isOpenAdd===!0?(l(),d("div",{key:1,class:P(["modal fade",{show:s(a).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",dt,[t("div",rt,[t("div",pt,[mt,t("button",{class:"btn-close",type:"button",onClick:o[11]||(o[11]=(...e)=>s(a).setOpenAdd&&s(a).setOpenAdd(...e))})]),t("form",{onSubmit:o[20]||(o[20]=C((...e)=>s(a).tambahData&&s(a).tambahData(...e),["prevent"]))},[t("div",ut,[t("div",ct,[ht,r(t("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=e=>s(a).form.nama=e),placeholder:"Masukkan nama armada ..",class:"form-control mt-2"},null,512),[[b,s(a).form.nama]]),_t]),t("div",bt,[gt,r(t("select",{class:"form-select","onUpdate:modelValue":o[13]||(o[13]=e=>s(a).form.type=e)},vt,512),[[m,s(a).form.type]])]),t("div",yt,[Pt,r(t("select",{class:"form-select","onUpdate:modelValue":o[14]||(o[14]=e=>s(a).form.jenis=e)},Ot,512),[[m,s(a).form.jenis]])]),t("div",Ct,[Et,r(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=e=>s(a).idArea=e),onChange:o[16]||(o[16]=(...e)=>s(a).getDropspot&&s(a).getDropspot(...e))},[Ut,(l(!0),d(c,null,h(s(a).isArea,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,xt))),128))],544),[[m,s(a).idArea]])]),t("div",Vt,[wt,r(t("select",{class:"form-select","onUpdate:modelValue":o[17]||(o[17]=e=>s(a).form.dropspot_id=e),disabled:s(a).idArea===""},[St,(l(!0),d(c,null,h(s(a).isDropspot,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,Nt))),128))],8,Tt),[[m,s(a).form.dropspot_id]])]),t("div",jt,[Ft,r(t("input",{type:"text","onUpdate:modelValue":o[18]||(o[18]=e=>s(a).form.harga=e),placeholder:"Masukkan harga armada ..",class:"form-control mt-2"},null,512),[[b,s(a).form.harga]])])]),t("div",Mt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=(...e)=>s(a).setOpenAdd&&s(a).setOpenAdd(...e))}," Tutup "),Bt])],32)])])],2)):_("",!0),s(a).isOpenEdit===!0?(l(),d("div",{key:2,class:P(["modal fade",{show:s(a).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",Lt,[t("div",$t,[t("div",Ht,[It,t("button",{class:"btn-close",type:"button",onClick:o[21]||(o[21]=(...e)=>s(a).setOpenEdit&&s(a).setOpenEdit(...e))})]),t("form",{onSubmit:o[31]||(o[31]=C((...e)=>s(a).editData&&s(a).editData(...e),["prevent"]))},[t("div",Jt,[t("div",Kt,[zt,r(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[22]||(o[22]=e=>s(a).form.nama=e)},null,512),[[b,s(a).form.nama]])]),t("div",Gt,[Rt,r(t("select",{class:"form-select","onUpdate:modelValue":o[23]||(o[23]=e=>s(a).form.type=e)},Qt,512),[[m,s(a).form.type]])]),t("div",Wt,[Xt,r(t("select",{class:"form-select","onUpdate:modelValue":o[24]||(o[24]=e=>s(a).form.jenis=e)},te,512),[[m,s(a).form.jenis]])]),t("div",ee,[se,r(t("select",{class:"form-select","onUpdate:modelValue":o[25]||(o[25]=e=>s(a).idArea=e),onChange:o[26]||(o[26]=(...e)=>s(a).getDropspot&&s(a).getDropspot(...e))},[ae,(l(!0),d(c,null,h(s(a).isArea,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,oe))),128))],544),[[m,s(a).idArea]])]),t("div",ne,[ie,r(t("select",{class:"form-select","onUpdate:modelValue":o[27]||(o[27]=e=>s(a).form.dropspot_id=e),disabled:s(a).idArea===""},[s(a).form.dropspot_id===""?(l(),d("option",de," Pilih Dropspot ")):_("",!0),t("option",re,p(s(a).namaDropsot),1),(l(!0),d(c,null,h(s(a).isDropspot,e=>(l(),d("option",{key:e,value:e.id},p(e.nama),9,pe))),128))],8,le),[[m,s(a).form.dropspot_id]])]),t("div",me,[ue,r(t("input",{type:"text","onUpdate:modelValue":o[28]||(o[28]=e=>s(a).form.harga=e),placeholder:"Masukkan harga armada ..",class:"form-control mt-2"},null,512),[[b,s(a).form.harga]])])]),t("div",ce,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[29]||(o[29]=(...e)=>s(a).setOpenEdit&&s(a).setOpenEdit(...e))}," Tutup "),s(n).user.role=="sysadmin"?(l(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[30]||(o[30]=(...e)=>s(a).deleteData&&s(a).deleteData(...e))}," Hapus ")):_("",!0),s(n).user.role=="sysadmin"?(l(),d("button",he," Simpan ")):_("",!0)])],32)])])],2)):_("",!0),s(a).isOpenPendamping===!0?(l(),d("div",{key:3,class:P(["modal fade modal-lg",{show:s(a).isOpenPendamping}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",_e,[t("div",be,[t("div",ge,[fe,t("button",{class:"btn-close",type:"button",onClick:o[32]||(o[32]=(...e)=>s(a).setOpenPendamping&&s(a).setOpenPendamping(...e))})]),t("form",null,[t("div",ve,[t("p",null,[ye,v(p(s(a).data_pendamping?s(a).data_pendamping.nama_lengkap:"-"),1)]),t("p",null,[Pe,v(p(s(a).data_pendamping?s(a).data_pendamping.no_hp:"-"),1)]),s(a).data_pendamping.nama_lengkap?(l(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[33]||(o[33]=e=>s(a).deletePendamping())}," HAPUS PENDAMPING ")):_("",!0)]),t("div",De,[r(t("input",{type:"text","onUpdate:modelValue":o[34]||(o[34]=e=>s(n).paramsPendamping.cari=e),class:"form-control mb-2",placeholder:"Cari Pendamping ...",onKeyup:o[35]||(o[35]=(...e)=>s(n).getPendamping&&s(n).getPendamping(...e))},null,544),[[b,s(n).paramsPendamping.cari]]),t("div",ke,[t("table",Ae,[Oe,t("tbody",null,[(l(!0),d(c,null,h(s(n).itemsPendamping,(e,f)=>(l(),d("tr",{key:f},[t("td",null,p(f+1),1),t("td",null,p(e.nama_lengkap),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary btn-sm",onClick:A=>s(a).setPendamping(e.uuid)}," Pilih ",8,Ce)])]))),128))])])])]),t("div",Ee,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[36]||(o[36]=(...e)=>s(a).setOpenPendamping&&s(a).setOpenPendamping(...e))}," Tutup ")])])])])],2)):_("",!0)],64)}}};export{Ve as default};
