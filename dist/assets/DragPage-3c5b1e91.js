import{C as k,I as S,y as I,o as u,c,b as t,t as n,u as s,d as p,Q as v,F as D,l as f,v as x,k as _,n as b}from"./index-f4a023c3.js";const y=k("table_drag",{state:()=>({roles1:[],items1:[],params1:{cari:"",role:"daerah"},roles2:[],items2:[],params2:{cari:"",role:"wilayah"}}),actions:{async getData1(){const l={params:this.params1};try{await S.get("user",l).then(e=>{(e.data.code=200)&&(this.items1=e.data.data,this.roles1=e.data.filter.role)})}catch{}},async getData2(){const l={params:this.params2};try{await S.get("user",l).then(e=>{(e.data.code=200)&&(this.items2=e.data.data,this.roles2=e.data.filter.role)})}catch{}}}}),w=k("form_drag",{state:()=>({formSatu:{id_user:[],role:""},formDua:{id_user:[],role:""},lastSelectedIndexSatu:null,lastSelectedIndexDua:null}),actions:{handleRowClickSatu(l){const e=l;if(event.shiftKey&&this.lastSelectedIndexSatu!==null){const o=Math.min(l,this.lastSelectedIndexSatu),d=Math.max(l,this.lastSelectedIndexSatu);if(e===d)for(let r=o+1;r<=d;r++)this.addIdUserSatu(r);else if(e===o)for(let r=o;r+1<=d;r++)this.addIdUserSatu(r);else for(let r=o;r<=d;r++)this.addIdUserSatu(r)}else this.addIdUserSatu(l);this.lastSelectedIndexSatu=l},handleRowClickDua(l){const e=l;if(event.shiftKey&&this.lastSelectedIndexDua!==null){const o=Math.min(l,this.lastSelectedIndexDua),d=Math.max(l,this.lastSelectedIndexDua);if(e===d)for(let r=o+1;r<=d;r++)this.addIdUserDua(r);else if(e===o)for(let r=o;r+1<=d;r++)this.addIdUserDua(r);else for(let r=o;r<=d;r++)this.addIdUserDua(r)}else this.addIdUserDua(l);this.lastSelectedIndexDua=l},addIdUserSatu(l){const e=this.formSatu.id_user.indexOf(l);e==-1?this.formSatu.id_user.push(l):this.formSatu.id_user.splice(e,1)},addIdUserDua(l){const e=this.formDua.id_user.indexOf(l);e===-1?this.formDua.id_user.push(l):this.formDua.id_user.splice(e,1)},dragStartSatu(l){this.formSatu.id_user.push(l)},allowDropDua(l){l.preventDefault()},dropDua(l){l.preventDefault(),this.formDua.role="daerah",this.editDataRole(this.formDua),this.formDua.id_user=[],this.formDua.role=""},dragStartDua(l){this.formDua.id_user.push(l)},allowDropSatu(l){l.preventDefault()},dropSatu(l){l.preventDefault(),this.formSatu.role="wilayah",this.editDataRole(this.formSatu),this.formSatu.id_user=[],this.formSatu.role=""},async editDataRole(l){try{await S.put("user/roles",l).then(e=>{const o=y();o.getData1(),o.getData2()})}catch{}}}}),U={class:"row"},C={class:"col-md-6"},M={class:"text-capitalize"},R=t("hr",null,null,-1),T={class:"filter-box mb-5 row"},A={class:"col-md-2"},N=t("option",{value:"",selected:""},"Semua Hak Akses",-1),V=["value"],H={class:"serach-box row"},K={class:"col-md-10 d-flex align-items-center mb-2"},$={class:"col-md-2 d-flex align-items-center"},z=t("hr",null,null,-1),B={class:"badge bg-success"},F={class:"table-responsive"},O=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Hak Akses"),t("th",{scope:"col"},"Daerah")])],-1),E=["onDragstart","onClick"],L={class:"col-md-6"},P={class:"text-capitalize"},Q=t("hr",null,null,-1),j={class:"filter-box mb-5 row"},q={class:"col-md-2"},G=t("option",{value:"",selected:""},"Semua Hak Akses",-1),J=["value"],W={class:"serach-box row"},X={class:"col-md-10 d-flex align-items-center mb-2"},Y={class:"col-md-2 d-flex align-items-center"},Z=t("hr",null,null,-1),tt={class:"badge bg-success"},et={class:"table-responsive"},at=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama"),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Hak Akses"),t("th",{scope:"col"},"Daerah")])],-1),st=["onDragstart","onClick"],ot={__name:"DragPage",setup(l){const e=y(),o=w(),d=h=>o.formSatu.id_user.includes(h),r=h=>o.formDua.id_user.includes(h);return I(()=>{e.getData1(),e.getData2()}),(h,i)=>(u(),c("div",U,[t("div",C,[t("h3",M,"Drag & Drop "+n(s(e).params1.role),1),R,t("div",T,[t("div",A,[p(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":i[0]||(i[0]=a=>s(e).params1.role=a),onChange:i[1]||(i[1]=(...a)=>s(e).getData1&&s(e).getData1(...a))},[N,(u(!0),c(D,null,f(s(e).roles1,a=>(u(),c("option",{key:a,value:a.key},n(a.value),9,V))),128))],544),[[v,s(e).params1.role]])])]),t("div",H,[t("div",K,[t("small",null,"Total data "+n(s(e).items1.length),1)]),t("div",$,[p(t("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=a=>s(e).params1.cari=a),class:"form-control form-control-sm mb-2",placeholder:"Cari User ...",onKeyup:i[3]||(i[3]=(...a)=>s(e).getData1&&s(e).getData1(...a))},null,544),[[x,s(e).params1.cari]])])]),z,_(" Total "),t("p",B,n(s(o).formSatu.id_user.length),1),_(" item dipilih "),t("div",F,[t("table",{class:"table table-sm table-hover mt-3",onDragover:i[4]||(i[4]=(...a)=>s(o).allowDropDua&&s(o).allowDropDua(...a)),onDrop:i[5]||(i[5]=(...a)=>s(o).dropDua&&s(o).dropDua(...a))},[O,t("tbody",null,[(u(!0),c(D,null,f(s(e).items1,(a,m)=>(u(),c("tr",{key:m,draggable:"true",onDragstart:g=>s(o).dragStartSatu(a.id),onClick:g=>s(o).handleRowClickSatu(a.id),class:b({"table-active":d(a.id)})},[t("td",null,n(m+1),1),t("td",null,n(a.santri.nama_lengkap),1),t("td",null,n("@"+a.username),1),t("td",null,n(a.role),1),t("td",null,n(a.santri.blok),1)],42,E))),128))])],32)])]),t("div",L,[t("h3",P,"Drag & Drop "+n(s(e).params2.role),1),Q,t("div",j,[t("div",q,[p(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":i[6]||(i[6]=a=>s(e).params2.role=a),onChange:i[7]||(i[7]=(...a)=>s(e).getData2&&s(e).getData2(...a))},[G,(u(!0),c(D,null,f(s(e).roles2,a=>(u(),c("option",{key:a,value:a.key},n(a.value),9,J))),128))],544),[[v,s(e).params2.role]])])]),t("div",W,[t("div",X,[t("small",null,"Total data "+n(s(e).items2.length),1)]),t("div",Y,[p(t("input",{type:"text","onUpdate:modelValue":i[8]||(i[8]=a=>s(e).params2.cari=a),class:"form-control form-control-sm mb-2",placeholder:"Cari User ...",onKeyup:i[9]||(i[9]=(...a)=>s(e).getData2&&s(e).getData2(...a))},null,544),[[x,s(e).params2.cari]])])]),Z,_(" Total "),t("p",tt,n(s(o).formDua.id_user.length),1),_(" item dipilih "),t("div",et,[t("table",{class:"table table-sm table-hover mt-3",onDragover:i[10]||(i[10]=(...a)=>s(o).allowDropSatu&&s(o).allowDropSatu(...a)),onDrop:i[11]||(i[11]=(...a)=>s(o).dropSatu&&s(o).dropSatu(...a))},[at,t("tbody",null,[(u(!0),c(D,null,f(s(e).items2,(a,m)=>(u(),c("tr",{key:m,draggable:"true",onDragstart:g=>s(o).dragStartDua(a.id),onClick:g=>s(o).handleRowClickDua(a.id),class:b({"table-active":r(a.id)})},[t("td",null,n(m+1),1),t("td",null,n(a.santri.nama_lengkap),1),t("td",null,n("@"+a.username),1),t("td",null,n(a.role),1),t("td",null,n(a.santri.blok),1)],42,st))),128))])],32)])])]))}};export{ot as default};
