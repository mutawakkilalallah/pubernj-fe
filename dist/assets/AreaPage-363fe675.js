import{x as k,D as v,C as u,S as g,g as i,c as d,b as t,t as p,u as s,d as r,v as m,z as c,F as f,q as O,n as _,w as y}from"./index-ed1e1048.js";const h=k("table_area",{state:()=>({user:localStorage.getItem("user")?v():null,items:[],totaldata:0,params:{cari:""}}),actions:{async getData(){const l={params:this.params};try{await u.get("area",l).then(n=>{(n.data.code=200)&&(this.items=n.data.data,this.totaldata=n.headers.x_total_data)})}catch{}}}}),A=k("form_area",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,idEdit:"",form:{nama:"",pic:"",no_hp:""}}),actions:{resetForm(){this.form.nama="",this.form.pic="",this.form.no_hp=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},async tambahData(){try{const l=await u.post("area",this.form);this.setOpenAdd(),this.resetForm(),h().getData()}catch{}},handleDoubleClick(l){this.idEdit=l.id,this.isOpenEdit=!0,this.form.nama=l.nama,this.form.pic=l.pic,this.form.no_hp=l.no_hp},async editData(){try{const l=await u.put(`area/${this.idEdit}`,this.form);this.isOpenEdit=!1,this.resetForm(),h().getData()}catch{}},async deleteData(){g.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&u.delete(`area/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),h().getData()})})}}}),D=t("h3",{class:"titlePage"},"Data Area",-1),E=t("hr",null,null,-1),C={class:"search-box row"},x={class:"col-md-10 d-flex align-items-center mb-2"},w={class:"col-md-2 d-flex align-items-center"},T=t("hr",null,null,-1),N={class:"table-responsive"},S={class:"table table-sm table-hover mt-3"},V=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Area"),t("th",{scope:"col"},"PIC"),t("th",{scope:"col"},"No. HP")])],-1),F=["onDblclick"],M={class:"modal-dialog"},P={class:"modal-content"},U={class:"modal-header"},B=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Area",-1),H={class:"modal-body"},L={class:"form-group mb-3"},$=t("small",null,"Nama Area",-1),I={class:"form-group mb-3"},z=t("small",null,"PIC",-1),K={class:"form-group mb-3"},q=t("small",null,"NO HP",-1),j={class:"modal-footer"},G=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),J={class:"modal-dialog"},Q={class:"modal-content"},R={class:"modal-header"},W=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Area",-1),X={class:"modal-body"},Y={class:"form-group mb-3"},Z=t("small",null,"Nama Area",-1),tt={class:"form-group mb-3"},st=t("small",null,"PIC",-1),at={class:"form-group mb-3"},et=t("small",null,"No. HP",-1),ot={class:"modal-footer"},nt={key:1,type:"submit",class:"btn btn-sm btn-primary"},rt={__name:"AreaPage",setup(l){const n=h(),e=A();return n.getData(),(lt,o)=>(i(),d(f,null,[D,E,t("div",C,[t("div",x,[t("small",null,"Total data "+p(s(n).items.length),1)]),t("div",w,[r(t("input",{type:"text",class:"form-control form-control-sm mb-2",placeholder:"Cari Area","onUpdate:modelValue":o[0]||(o[0]=a=>s(n).params.cari=a),onKeyup:o[1]||(o[1]=(...a)=>s(n).getData&&s(n).getData(...a))},null,544),[[m,s(n).params.cari]])])]),T,s(n).user.role=="sysadmin"?(i(),d("button",{key:0,type:"button",class:"btn btn-sm btn-primary",onClick:o[2]||(o[2]=a=>s(e).setOpenAdd())}," Tambah Area ")):c("",!0),t("div",N,[t("table",S,[V,t("tbody",null,[(i(!0),d(f,null,O(s(n).items,(a,b)=>(i(),d("tr",{key:b,onDblclick:it=>s(n).user.role=="sysadmin"&&s(e).handleDoubleClick(a)},[t("td",null,p(b+1),1),t("td",null,p(a.nama),1),t("td",null,p(a.pic),1),t("td",null,p(a.no_hp),1)],40,F))),128))])])]),s(e).isOpenAdd===!0?(i(),d("div",{key:1,class:_(["modal fade",{show:s(e).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",M,[t("div",P,[t("div",U,[B,t("button",{type:"button",class:"btn-close",onClick:o[3]||(o[3]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))})]),t("form",{onSubmit:o[8]||(o[8]=y((...a)=>s(e).tambahData&&s(e).tambahData(...a),["prevent"]))},[t("div",H,[t("div",L,[$,r(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>s(e).form.nama=a),class:"form-control mt-2",placeholder:"Masukkan nama area .."},null,512),[[m,s(e).form.nama]])]),t("div",I,[z,r(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=a=>s(e).form.pic=a),class:"form-control mt-2",placeholder:"Masukkan nama pic .."},null,512),[[m,s(e).form.pic]])]),t("div",K,[q,r(t("input",{type:"number",class:"form-control mt-2","onUpdate:modelValue":o[6]||(o[6]=a=>s(e).form.no_hp=a),placeholder:"Masukkan nama no hp .."},null,512),[[m,s(e).form.no_hp]])])]),t("div",j,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[7]||(o[7]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))}," Tutup "),G])],32)])])],2)):c("",!0),s(e).isOpenEdit===!0?(i(),d("div",{key:2,class:_(["modal fade",{show:s(e).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",J,[t("div",Q,[t("div",R,[W,t("button",{type:"button",class:"btn-close",onClick:o[9]||(o[9]=(...a)=>s(e).setOpenEdit&&s(e).setOpenEdit(...a))})]),t("form",{onSubmit:o[15]||(o[15]=y((...a)=>s(e).editData&&s(e).editData(...a),["prevent"]))},[t("div",X,[t("div",Y,[Z,r(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>s(e).form.nama=a),class:"form-control mt-2",placeholder:"Masukkan nama area .."},null,512),[[m,s(e).form.nama]])]),t("div",tt,[st,r(t("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=a=>s(e).form.pic=a),class:"form-control mt-2",placeholder:"Masukkan nama pic .."},null,512),[[m,s(e).form.pic]])]),t("div",at,[et,r(t("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=a=>s(e).form.no_hp=a),class:"form-control mt-2",placeholder:"Masukkan nomor handphone pic .."},null,512),[[m,s(e).form.no_hp]])])]),t("div",ot,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[13]||(o[13]=(...a)=>s(e).setOpenEdit&&s(e).setOpenEdit(...a))}," Tutup "),s(n).user.role==="sysadmin"?(i(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[14]||(o[14]=a=>s(e).deleteData())}," Hapus ")):c("",!0),s(n).user.role==="sysadmin"?(i(),d("button",nt," Simpan ")):c("",!0)])],32)])])],2)):c("",!0)],64))}};export{rt as default};
