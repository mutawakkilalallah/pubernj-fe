import{x as O,D as x,C as h,S as V,o as w,a as g,g as n,c as d,b as e,d as r,E as m,u as o,F as u,q as c,t as p,v as f,z as b,k as D,l as T,m as S,n as A,w as k,G as v}from"./index-ed1e1048.js";const _=O("table_armada",{state:()=>({user:localStorage.getItem("user")?x():null,items:[],filter:{area:[],dropspot:[]},meta:{},params:{cari:"",area:"",dropspot:"",type:""}}),actions:{async getData(){const l={params:this.params};try{await h.get("armada",l).then(i=>{(i.data.code=200)&&(this.items=i.data.data,this.filter.area=i.data.filter.area,this.meta=i.headers)})}catch{}},async getDropspot(){this.params.dropspot="",this.getData();const l={params:{area:this.params.area}};try{await h.get("dropspot",l).then(i=>{(i.data.code=200)&&(this.filter.dropspot=i.data.data)})}catch{}}}}),U=O("form_armada",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isArea:[],isDropspot:[],idEdit:"",idArea:"",namaArea:"",namaDropsot:"",form:{nama:"",type:"",dropspot_id:""}}),actions:{resetForm(){this.idArea="",this.form.nama="",this.form.type="",this.form.dropspot_id=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},getArea(){try{h.get("area").then(l=>{this.isArea=l.data.data})}catch{}},async getDropspot(){this.form.dropspot_id="";const l={params:{area:this.idArea}};try{await h.get("dropspot",l).then(i=>{this.isDropspot=i.data.data})}catch{}},async tambahData(){try{await h.post("armada",this.form),this.isOpenAdd=!1,_().getData(),this.resetForm()}catch{}},handleDoubleClik(l){this.idEdit=l.id,this.idArea=l.dropspot.area_id,this.namaDropsot=l.dropspot.nama,this.form.nama=l.nama,this.form.type=l.type,this.getDropspot(),this.form.dropspot_id=l.dropspot_id,this.isOpenEdit=!0},async editData(){try{await h.put(`armada/${this.idEdit}`,this.form).then(l=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})}catch{}},async deleteData(){V.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&h.delete(`armada/${this.idEdit}`).then(i=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})})}}}),N=e("h3",{class:"titlePage"},"Data Armada",-1),P=e("hr",null,null,-1),F={class:"filter-box mb-5 row"},B={class:"col-md-2"},M=e("option",{value:"",selected:""},"Semua Area",-1),L=["value"],I=["disabled"],H=e("option",{value:"",selected:""},"Semua Dropsot",-1),$=["value"],z={class:"col-md-2"},K=v('<option value="" selected>Semua Type</option><option value="bus" selected>BUS</option><option value="mini_bus" selected>MINI BUS</option><option value="elf" selected>ELF</option><option value="hiace" selected>HIACE</option><option value="mpv" selected>MPV</option>',6),q=[K],G={class:"serach-box row"},j={class:"col-md-10 d-flex align-items-center mb-2"},J={class:"col-md-2 d-flex align-items-center"},Q=e("hr",null,null,-1),R={class:"table-responsive"},W={class:"table table-sm table-hover mt-3"},X=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"No"),e("th",{scope:"col"},"Nama Armada"),e("th",{scope:"col"},"Type"),e("th",{scope:"col"},"Penumpang"),e("th",{scope:"col"},"Dropspot")])],-1),Y=["onDblclick"],Z={class:"btn btn-primary btn-sm"},tt={class:"modal-dialog"},et={class:"modal-content"},ot={class:"modal-header"},st=e("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Armada",-1),at={class:"modal-body"},it={class:"form-group mb-3"},lt=e("small",null,"Nama Armada",-1),nt={class:"form-group mb-3"},dt=e("small",null,"Type",-1),rt=v('<option value="" selected>Pilih Type</option><option value="bus" selected>bus</option><option value="mini_bus" selected>mini_bus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',6),pt=[rt],mt={class:"form-group mb-3"},ut=e("small",null,"Area",-1),ct=e("option",{value:"",selected:""},"Pilih Area",-1),ht=["value"],bt={class:"form-group mb-3"},_t=e("small",null,"Dropspot",-1),ft=["disabled"],vt=e("option",{value:"",selected:""},"Pilih Dropsot",-1),yt=["value"],gt={class:"modal-footer"},Dt=e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),At={class:"modal-dialog"},kt={class:"modal-content"},Ot={class:"modal-header"},Ct=e("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Armada",-1),Et={class:"modal-body"},xt={class:"form-group mb-3"},Vt=e("small",null,"Nama Armada",-1),wt={class:"form-group mb-3"},Tt=e("small",null,"Type",-1),St=v('<option value="bus" selected>bus</option><option value="mini_bus" selected>mini_bus</option><option value="elf" selected>elf</option><option value="hiace" selected>hiace</option><option value="mpv" selected>mpv</option>',5),Ut=[St],Nt={class:"form-group mb-3"},Pt=e("small",null,"Area",-1),Ft=e("option",{value:"",selected:""},"Pilih Area",-1),Bt=["value"],Mt={class:"form-group mb-3"},Lt=e("small",null,"Dropspot",-1),It=["disabled"],Ht={key:0,value:"",selected:""},$t={value:"",selected:""},zt=["value"],Kt={class:"modal-footer"},qt={key:1,type:"submit",class:"btn btn-sm btn-primary"},Qt={__name:"ArmadaPage",setup(l){const i=_(),a=U();return w(()=>{i.getData(),a.getArea()}),(Gt,s)=>{const C=g("font-awesome-icon"),E=g("router-link");return n(),d(u,null,[N,P,e("div",F,[e("div",B,[r(e("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":s[0]||(s[0]=t=>o(i).params.area=t),onChange:s[1]||(s[1]=(...t)=>o(i).getDropspot&&o(i).getDropspot(...t))},[M,(n(!0),d(u,null,c(o(i).filter.area,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,L))),128))],544),[[m,o(i).params.area]]),r(e("select",{class:"form-select form-select-sm mb-2",disabled:o(i).params.area==="","onUpdate:modelValue":s[2]||(s[2]=t=>o(i).params.dropspot=t),onChange:s[3]||(s[3]=(...t)=>o(i).getData&&o(i).getData(...t))},[H,(n(!0),d(u,null,c(o(i).filter.dropspot,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,$))),128))],40,I),[[m,o(i).params.dropspot]])]),e("div",z,[r(e("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":s[4]||(s[4]=t=>o(i).params.type=t),onChange:s[5]||(s[5]=(...t)=>o(i).getData&&o(i).getData(...t))},q,544),[[m,o(i).params.type]])])]),e("div",G,[e("div",j,[e("small",null,"Total data "+p(o(i).meta.x_total_data),1)]),e("div",J,[r(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=t=>o(i).params.cari=t),class:"form-control form-control-sm mb-2",placeholder:"Cari Armada ...",onKeyup:s[7]||(s[7]=(...t)=>o(i).getData&&o(i).getData(...t))},null,544),[[f,o(i).params.cari]])])]),Q,o(i).user.role=="sysadmin"?(n(),d("button",{key:0,class:"btn btn-sm btn-primary",onClick:s[8]||(s[8]=(...t)=>o(a).setOpenAdd&&o(a).setOpenAdd(...t))}," Tambah Armada ")):b("",!0),e("div",R,[e("table",W,[X,e("tbody",null,[(n(!0),d(u,null,c(o(i).items,(t,y)=>(n(),d("tr",{key:y,onDblclick:jt=>o(i).user.role==="sysadmin"&&o(a).handleDoubleClik(t)},[e("td",null,p(y+1),1),e("td",null,p(t.nama),1),e("td",null,p(t.type.toUpperCase()),1),e("td",null,[D(E,{to:{name:"armada-detail",params:{id:t.id}}},{default:T(()=>[e("button",Z,[D(C,{icon:"clipboard",class:"icon"}),S(" Daftar Penumpang ")])]),_:2},1032,["to"])]),e("td",null,p(t.dropspot.nama),1)],40,Y))),128))])])]),o(a).isOpenAdd===!0?(n(),d("div",{key:1,class:A(["modal fade",{show:o(a).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[e("div",tt,[e("div",et,[e("div",ot,[st,e("button",{class:"btn-close",type:"button",onClick:s[9]||(s[9]=(...t)=>o(a).setOpenAdd&&o(a).setOpenAdd(...t))})]),e("form",{onSubmit:s[16]||(s[16]=k((...t)=>o(a).tambahData&&o(a).tambahData(...t),["prevent"]))},[e("div",at,[e("div",it,[lt,r(e("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=t=>o(a).form.nama=t),placeholder:"Masukkan nama armada ..",class:"form-control mt-2"},null,512),[[f,o(a).form.nama]])]),e("div",nt,[dt,r(e("select",{class:"form-select","onUpdate:modelValue":s[11]||(s[11]=t=>o(a).form.type=t)},pt,512),[[m,o(a).form.type]])]),e("div",mt,[ut,r(e("select",{class:"form-select","onUpdate:modelValue":s[12]||(s[12]=t=>o(a).idArea=t),onChange:s[13]||(s[13]=(...t)=>o(a).getDropspot&&o(a).getDropspot(...t))},[ct,(n(!0),d(u,null,c(o(a).isArea,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,ht))),128))],544),[[m,o(a).idArea]])]),e("div",bt,[_t,r(e("select",{class:"form-select","onUpdate:modelValue":s[14]||(s[14]=t=>o(a).form.dropspot_id=t),disabled:o(a).idArea===""},[vt,(n(!0),d(u,null,c(o(a).isDropspot,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,yt))),128))],8,ft),[[m,o(a).form.dropspot_id]])])]),e("div",gt,[e("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:s[15]||(s[15]=(...t)=>o(a).setOpenAdd&&o(a).setOpenAdd(...t))}," Tutup "),Dt])],32)])])],2)):b("",!0),o(a).isOpenEdit===!0?(n(),d("div",{key:2,class:A(["modal fade",{show:o(a).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[e("div",At,[e("div",kt,[e("div",Ot,[Ct,e("button",{class:"btn-close",type:"button",onClick:s[17]||(s[17]=(...t)=>o(a).setOpenEdit&&o(a).setOpenEdit(...t))})]),e("form",{onSubmit:s[25]||(s[25]=k((...t)=>o(a).editData&&o(a).editData(...t),["prevent"]))},[e("div",Et,[e("div",xt,[Vt,r(e("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":s[18]||(s[18]=t=>o(a).form.nama=t)},null,512),[[f,o(a).form.nama]])]),e("div",wt,[Tt,r(e("select",{class:"form-select","onUpdate:modelValue":s[19]||(s[19]=t=>o(a).form.type=t)},Ut,512),[[m,o(a).form.type]])]),e("div",Nt,[Pt,r(e("select",{class:"form-select","onUpdate:modelValue":s[20]||(s[20]=t=>o(a).idArea=t),onChange:s[21]||(s[21]=(...t)=>o(a).getDropspot&&o(a).getDropspot(...t))},[Ft,(n(!0),d(u,null,c(o(a).isArea,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,Bt))),128))],544),[[m,o(a).idArea]])]),e("div",Mt,[Lt,r(e("select",{class:"form-select","onUpdate:modelValue":s[22]||(s[22]=t=>o(a).form.dropspot_id=t),disabled:o(a).idArea===""},[o(a).form.dropspot_id===""?(n(),d("option",Ht," Pilih Dropspot ")):b("",!0),e("option",$t,p(o(a).namaDropsot),1),(n(!0),d(u,null,c(o(a).isDropspot,t=>(n(),d("option",{key:t,value:t.id},p(t.nama),9,zt))),128))],8,It),[[m,o(a).form.dropspot_id]])])]),e("div",Kt,[e("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:s[23]||(s[23]=(...t)=>o(a).setOpenEdit&&o(a).setOpenEdit(...t))}," Tutup "),o(i).user.role=="sysadmin"?(n(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:s[24]||(s[24]=(...t)=>o(a).deleteData&&o(a).deleteData(...t))}," Hapus ")):b("",!0),o(i).user.role=="sysadmin"?(n(),d("button",qt," Simpan ")):b("",!0)])],32)])])],2)):b("",!0)],64)}}};export{Qt as default};
