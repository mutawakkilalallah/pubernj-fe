import{x as g,C as b,S as D,q as A,o as d,c as r,b as t,d as i,L as u,u as e,F as c,l as h,t as m,v as p,n as y,w as v,K as k,M as O}from"./index-ab4f3b6d.js";const _=g("table_dropspot",{state:()=>({items:[],params:{cari:"",area:""}}),actions:{async getData(){const l={params:this.params};try{await b.get("dropspot",l).then(n=>{(n.data.code=200)&&(this.items=n.data.data)})}catch{}}}}),E=g("form_dropspot",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isArea:[],idEdit:"",namaArea:"",form:{nama:"",type:"",area_id:"",cakupan:"",harga:""}}),actions:{resetForm(){this.form.nama="",this.form.type="",this.form.area_id="",this.form.cakupan="",this.form.harga=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},getArea(){try{b.get("area").then(l=>{this.isArea=l.data.data})}catch{}},async tambahData(){try{const l=await b.post("dropspot",this.form);this.isOpenAdd=!1,_().getData(),this.resetForm()}catch{}},handleDoubleClik(l){this.idEdit=l.id,this.namaArea=l.area?l.area.nama:"kosong",this.form.nama=l.nama,this.form.type=l.type,this.form.area_id=l.area_id,this.form.cakupan=l.cakupan,this.form.harga=l.harga,this.isOpenEdit=!0},async editData(){try{await b.put(`dropspot/${this.idEdit}`,this.form).then(l=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})}catch{}},async deleteData(){D.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&b.delete(`dropspot/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})})}}}),C=t("h3",null,"Data Dropspot",-1),x=t("hr",null,null,-1),T={class:"filter-box mb-5 row"},V={class:"col-md-2"},w=t("option",{value:"",selected:""},"Semua Area",-1),U=["value"],S={class:"serach-box row"},F={class:"col-md-10 d-flex align-items-center mb-2"},M={class:"col-md-2 d-flex align-items-center"},N=t("hr",null,null,-1),B={class:"table-responsive"},L={class:"table table-sm table-hover mt-3"},H=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Dropspot"),t("th",{scope:"col"},"Type"),t("th",{scope:"col"},"Area"),t("th",{scope:"col"},"Cakupan"),t("th",{scope:"col"},"Harga")])],-1),K=["onDblclick"],P={class:"modal-dialog"},$={class:"modal-content"},q={class:"modal-header"},z=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Dropsot",-1),j={class:"modal-body"},G={class:"form-group mb-3"},I=t("small",null,"Nama Dropspot",-1),J={class:"form-group mb-3"},Q=t("small",null,"Type",-1),R=O('<option value="" selected>Pilih Type</option><option value="by_provinsi" selected>by_provinsi</option><option value="by_kabupaten" selected>by_kabupaten</option><option value="by_kecamatan" selected>by_kecamatan</option><option value="by_desa" selected>by_desa</option>',5),W=[R],X={class:"form-group mb-3"},Y=t("small",null,"Area",-1),Z=t("option",{value:"",selected:""},"Pilih Area",-1),tt=["value"],at={class:"form-group mb-3"},et=t("small",null,"Cakupan Daerah",-1),st={class:"form-group mb-3"},ot=t("small",null,"Harga",-1),lt={class:"modal-footer"},nt=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),it={class:"modal-dialog"},dt={class:"modal-content"},rt={class:"modal-header"},mt=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropspot",-1),pt={class:"modal-body"},ut={class:"form-group mb-3"},ct=t("small",null,"Nama Dropspot",-1),bt={class:"form-group mb-3"},ht=t("small",null,"Type",-1),_t=t("option",{value:"by_provinsi",selected:""},"by_provinsi",-1),ft=t("option",{value:"by_kabupaten",selected:""},"by_kabupaten",-1),yt=t("option",{value:"by_kecamatan",selected:""},"by_kecamatan",-1),vt=t("option",{value:"by_desa",selected:""},"by_desa",-1),kt=[_t,ft,yt,vt],gt={class:"form-group mb-3"},Dt=t("small",null,"Area",-1),At={value:"",selected:""},Ot=["value"],Et={class:"form-group mb-3"},Ct=t("small",null,"Cakupan Daerah",-1),xt={class:"form-group mb-3"},Tt=t("small",null,"Harga",-1),Vt={class:"modal-footer"},wt=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Mt={__name:"DropspotPage",setup(l){const n=_(),s=E();return n.getData(),s.getArea(),A(()=>{s.getArea()}),(Ut,o)=>(d(),r(c,null,[C,x,t("div",T,[t("div",V,[i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[0]||(o[0]=a=>e(n).params.area=a),onChange:o[1]||(o[1]=(...a)=>e(n).getData&&e(n).getData(...a))},[w,(d(!0),r(c,null,h(e(s).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,U))),128))],544),[[u,e(n).params.area]])])]),t("div",S,[t("div",F,[t("small",null,"Total data "+m(e(n).items.length),1)]),t("div",M,[i(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>e(n).params.cari=a),class:"form-control form-control-sm mb-2",placeholder:"Cari Dropspot ...",onKeyup:o[3]||(o[3]=(...a)=>e(n).getData&&e(n).getData(...a))},null,544),[[p,e(n).params.cari]])])]),N,t("button",{class:"btn btn-sm btn-primary",onClick:o[4]||(o[4]=(...a)=>e(s).setOpenAdd&&e(s).setOpenAdd(...a))}," Tambah Dropspot "),t("div",B,[t("table",L,[H,t("tbody",null,[(d(!0),r(c,null,h(e(n).items,(a,f)=>(d(),r("tr",{key:f,onDblclick:St=>e(s).handleDoubleClik(a)},[t("td",null,m(f+1),1),t("td",null,m(a.nama),1),t("td",null,m(a.type),1),t("td",null,m(a.area.nama),1),t("td",null,m(a.cakupan),1),t("td",null,m(a.harga),1)],40,K))),128))])])]),e(s).isOpenAdd===!0?(d(),r("div",{key:0,class:y(["modal fade",{show:e(s).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",P,[t("div",$,[t("div",q,[z,t("button",{class:"btn-close",type:"button",onClick:o[5]||(o[5]=(...a)=>e(s).setOpenAdd&&e(s).setOpenAdd(...a))})]),t("form",{onSubmit:o[12]||(o[12]=v((...a)=>e(s).tambahData&&e(s).tambahData(...a),["prevent"]))},[t("div",j,[t("div",G,[I,i(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=a=>e(s).form.nama=a),placeholder:"Masukkan nama dropspot ..",class:"form-control mt-2"},null,512),[[p,e(s).form.nama]])]),t("div",J,[Q,i(t("select",{class:"form-select","onUpdate:modelValue":o[7]||(o[7]=a=>e(s).form.type=a)},W,512),[[u,e(s).form.type]])]),t("div",X,[Y,i(t("select",{class:"form-select","onUpdate:modelValue":o[8]||(o[8]=a=>e(s).form.area_id=a)},[Z,(d(!0),r(c,null,h(e(s).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,tt))),128))],512),[[u,e(s).form.area_id]])]),t("div",at,[et,i(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=a=>e(s).form.cakupan=a),placeholder:"Masukkan cakupan daerah ..",class:"form-control mt-2"},null,512),[[p,e(s).form.cakupan]])]),t("div",st,[ot,i(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>e(s).form.harga=a),placeholder:"Masukkan cakupan harga ..",class:"form-control mt-2"},null,512),[[p,e(s).form.harga]])])]),t("div",lt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[11]||(o[11]=(...a)=>e(s).setOpenAdd&&e(s).setOpenAdd(...a))}," Tutup "),nt])],32)])])],2)):k("",!0),e(s).isOpenEdit===!0?(d(),r("div",{key:1,class:y(["modal fade",{show:e(s).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",it,[t("div",dt,[t("div",rt,[mt,t("button",{class:"btn-close",type:"button",onClick:o[13]||(o[13]=(...a)=>e(s).setOpenEdit&&e(s).setOpenEdit(...a))})]),t("form",{onSubmit:o[21]||(o[21]=v((...a)=>e(s).editData&&e(s).editData(...a),["prevent"]))},[t("div",pt,[t("div",ut,[ct,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[14]||(o[14]=a=>e(s).form.nama=a)},null,512),[[p,e(s).form.nama]])]),t("div",bt,[ht,i(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=a=>e(s).form.type=a)},kt,512),[[u,e(s).form.type]])]),t("div",gt,[Dt,i(t("select",{class:"form-select","onUpdate:modelValue":o[16]||(o[16]=a=>e(s).form.area_id=a)},[t("option",At,m(e(s).namaArea),1),(d(!0),r(c,null,h(e(s).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,Ot))),128))],512),[[u,e(s).form.area_id]])]),t("div",Et,[Ct,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[17]||(o[17]=a=>e(s).form.cakupan=a)},null,512),[[p,e(s).form.cakupan]])]),t("div",xt,[Tt,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[18]||(o[18]=a=>e(s).form.harga=a)},null,512),[[p,e(s).form.harga]])])]),t("div",Vt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=(...a)=>e(s).setOpenEdit&&e(s).setOpenEdit(...a))}," Tutup "),t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:o[20]||(o[20]=(...a)=>e(s).deleteData&&e(s).deleteData(...a))}," Hapus "),wt])],32)])])],2)):k("",!0)],64))}};export{Mt as default};
