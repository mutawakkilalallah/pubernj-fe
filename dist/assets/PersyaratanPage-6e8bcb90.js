import{x as D,C as _,S as P,a as x,c as r,b as s,u as t,d as m,D as d,F as g,s as k,z as y,t as u,v as S,e as C,E as w,g as i,w as B,l as p}from"./index-c2692dc6.js";import{u as A}from"./index-95481d5d.js";const T=D("table_persyaratan",{state:()=>({items:[],meta:{},myPage:"",filter:{wilayah:[],blok:[]},params:{cari:"",wilayah:"",blok:"",jenis_kelamin:"",lunas_bps:"",lunas_kosmara:"",tuntas_fa:"",bebas_kamtib:"",page:1,limit:25},params2:{limit:""}}),actions:{nexPage(l){this.params.page=parseInt(l)+1,this.getData()},prevPage(l){this.params.page=parseInt(l)-1,this.getData()},setPage(l){this.params.page=parseInt(l),this.getData()},searchPage(){this.params.page=1,this.getData()},async getData(){const l={params:this.params};try{await _.get("penumpang/persyaratan",l).then(n=>{(n.data.code=200)&&(this.totalData=n.headers.x_total_data,this.items=n.data.data,this.meta=n.headers,this.filter.area=n.data.filter.area,this.params2.limit=n.headers.x_total_data,this.getDataExport())})}catch{}},async handleReset(){this.params={cari:"",wilayah:"",blok:"",pembayaran:"",jenis_kelamin:"",lunas_bps:"",lunas_kosmara:"",tuntas_fa:"",bebas_kamtib:"",page:1,limit:25},this.getData()},async getWilayah(){try{await _.get("santri/filter/wilayah").then(l=>{(l.data.code=200)&&(this.filter.wilayah=l.data)})}catch{}},async getBlok(){this.params.blok="",this.getData();try{await _.get(`santri/filter/blok?alias_wilayah=${this.params.wilayah}`).then(l=>{(l.data.code=200)&&(this.filter.blok=l.data)})}catch{}},async ubahPersyaratan(l,n,e,v,o,c){P.fire({title:"Konfirmasi",text:`Apakah anda yakin "${v}" status "${o}" untuk (${c}) ?`,icon:e,showCancelButton:!0,confirmButtonText:"Iya"}).then(b=>{b.isConfirmed&&_.put(`penumpang/persyaratan/${n}`,{type:l}).then(a=>{this.getData()})})}}}),V=w('<div class="row"><div class="col-md-8"><h3 class="titlePage">Data Persyaratan Santri</h3></div><div class="col-md-4 text-end g-2"><button class="btn btn-sm btn-outline-primary" type="button"> Export </button></div></div><hr>',2),U={class:"filter-box row"},N={key:0,class:"col-md-2"},L=s("option",{value:"",selected:""},"Semua Wilayah",-1),M=["value"],I=["disabled"],$=s("option",{value:"",selected:""},"Semua Daerah",-1),E=["value"],F={class:"col-md-2"},K=s("option",{value:"",selected:""},"Semua Status BPS",-1),j=s("option",{value:1},"Lunas",-1),R=s("option",{value:0},"Belum Lunas",-1),q=[K,j,R],W=s("option",{value:"",selected:""},"Semua Status KOSMARA",-1),O=s("option",{value:1},"Lunas",-1),z=s("option",{value:0},"Belum Lunas",-1),J=[W,O,z],G=s("option",{value:"",selected:""},"Semua Status FA",-1),H=s("option",{value:1},"Tuntas",-1),Q=s("option",{value:0},"Belum Tuntas",-1),X=[G,H,Q],Y=s("option",{value:"",selected:""},"Semua Status KAMTIB",-1),Z=s("option",{value:1},"Bebas",-1),tt=s("option",{value:0},"Belum Bebas",-1),at=[Y,Z,tt],et={class:"col-md-2"},st=s("option",{value:"",selected:""},"Semua Jenis Kelamin",-1),ot=s("option",{value:"L"},"Laki-Laki",-1),nt=s("option",{value:"P"},"Perempuan",-1),lt=[st,ot,nt],it={class:"serach-box row mt-2"},rt={class:"col-md-6 mb-2 d-flex"},ct={class:"col-sm-3 col-md-1 me-3"},mt=w('<option value="25" selected>25</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option><option value="1000">1000</option>',6),dt=[mt],ut={class:"col-sm-9 col-md-11"},pt={class:"col-md-6 mb-2"},ht={class:"row justify-content-end"},_t={class:"col-md-3"},gt={class:"col-auto d-flex flex-column align-items-end"},bt={class:"table-responsive"},kt={class:"table table-sm table-hover mt-3"},yt=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"No"),s("th",{scope:"col"},"NIUP"),s("th",{scope:"col"},"Nama Santri"),s("th",{scope:"col",class:"text-center"},"BPS"),s("th",{scope:"col",class:"text-center"},"KOSMARA"),s("th",{scope:"col",class:"text-center"},"FA"),s("th",{scope:"col",class:"text-center"},"KAMTIB"),s("th",{scope:"col"},"Wilayah"),s("th",{scope:"col"},"Daerah")])],-1),vt=["onContextmenu"],ft={key:0,class:"text-center bg-success"},xt={key:1,class:"text-center bg-danger"},wt={key:2,class:"text-center bg-success"},Dt={key:3,class:"text-center bg-danger"},Pt=["onClick"],St=["onClick"],Ct=["onClick"],Bt=["onClick"],At={key:0},Ut={__name:"PersyaratanPage",setup(l){const n=A(),e=T();return e.getData(),n.user.role!="p4nj"&&e.getWilayah(),(v,o)=>{const c=x("font-awesome-icon"),b=x("app-paginate");return i(),r(g,null,[V,s("div",U,[t(n).user.role!="pendamping"&&t(n).user.role!="p4nj"&&t(n).user.role!="armada"?(i(),r("div",N,[m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[0]||(o[0]=a=>t(e).params.wilayah=a),onChange:o[1]||(o[1]=(...a)=>t(e).getBlok&&t(e).getBlok(...a))},[L,(i(!0),r(g,null,k(t(e).filter.wilayah,a=>(i(),r("option",{key:a,value:a.alias_wilayah},u(a.wilayah),9,M))),128))],544),[[d,t(e).params.wilayah]]),m(s("select",{class:"form-select form-select-sm mb-2",disabled:t(e).params.wilayah==="","onUpdate:modelValue":o[2]||(o[2]=a=>t(e).params.blok=a),onChange:o[3]||(o[3]=(...a)=>t(e).getData&&t(e).getData(...a))},[$,(i(!0),r(g,null,k(t(e).filter.blok,a=>(i(),r("option",{key:a,value:a.id_blok},u(a.blok),9,E))),128))],40,I),[[d,t(e).params.blok]])])):y("",!0),s("div",F,[m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[4]||(o[4]=a=>t(e).params.lunas_bps=a),onChange:o[5]||(o[5]=(...a)=>t(e).getData&&t(e).getData(...a))},q,544),[[d,t(e).params.lunas_bps]]),m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[6]||(o[6]=a=>t(e).params.lunas_kosmara=a),onChange:o[7]||(o[7]=(...a)=>t(e).getData&&t(e).getData(...a))},J,544),[[d,t(e).params.lunas_kosmara]]),m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[8]||(o[8]=a=>t(e).params.tuntas_fa=a),onChange:o[9]||(o[9]=(...a)=>t(e).getData&&t(e).getData(...a))},X,544),[[d,t(e).params.tuntas_fa]]),m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[10]||(o[10]=a=>t(e).params.bebas_kamtib=a),onChange:o[11]||(o[11]=(...a)=>t(e).getData&&t(e).getData(...a))},at,544),[[d,t(e).params.bebas_kamtib]])]),s("div",et,[m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[12]||(o[12]=a=>t(e).params.jenis_kelamin=a),onChange:o[13]||(o[13]=(...a)=>t(e).getData&&t(e).getData(...a))},lt,544),[[d,t(e).params.jenis_kelamin]])])]),s("div",it,[s("div",rt,[s("div",ct,[m(s("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":o[14]||(o[14]=a=>t(e).params.limit=a),onChange:o[15]||(o[15]=(...a)=>t(e).getData&&t(e).getData(...a))},dt,544),[[d,t(e).params.limit]])]),s("div",ut,[s("small",null,"Total data "+u(t(e).meta.x_total_data),1)])]),s("div",pt,[s("div",ht,[s("div",_t,[m(s("input",{type:"text","onUpdate:modelValue":[o[16]||(o[16]=a=>t(e).params.cari=a),o[17]||(o[17]=(...a)=>t(e).searchPage&&t(e).searchPage(...a))],class:"form-control form-control-sm mb-2",placeholder:"Cari Penumpang ..."},null,512),[[S,t(e).params.cari]])]),s("div",gt,[s("button",{class:"btn btn-danger btn-sm",onClick:o[18]||(o[18]=(...a)=>t(e).handleReset&&t(e).handleReset(...a))}," RESET ")])])])]),s("div",bt,[s("table",kt,[yt,s("tbody",null,[(i(!0),r(g,null,k(t(e).items,(a,f)=>(i(),r("tr",{style:{cursor:"pointer"},key:f,onContextmenu:B(h=>t(e).showContextMenu(h,a),["prevent"])},[s("td",null,u(f+1+(t(e).params.page-1)*t(e).params.limit),1),s("td",null,u(a.santri.niup),1),s("td",null,u(a.santri.nama_lengkap),1),a.persyaratan.lunas_bps?(i(),r("td",ft,[p(c,{icon:"check-circle",class:"icon text-white"})])):(i(),r("td",xt,[p(c,{icon:"times-square",class:"icon text-white"})])),a.persyaratan.lunas_kosmara?(i(),r("td",wt,[p(c,{icon:"check-circle",class:"icon text-white"})])):(i(),r("td",Dt,[p(c,{icon:"times-square",class:"icon text-white"})])),a.persyaratan.tuntas_fa?(i(),r("td",{key:4,class:"text-center bg-success",onClick:h=>(t(n).user.role==="sysadmin"||t(n).user.role==="admin"||t(n).user.role==="wilayah"||t(n).user.role==="daerah")&&t(e).ubahPersyaratan("fa",a.id,"error","membatalkan","TUNTAS FA",a.santri.nama_lengkap)},[p(c,{icon:"check-circle",class:"icon text-white"})],8,Pt)):(i(),r("td",{key:5,class:"text-center bg-danger",onClick:h=>(t(n).user.role==="sysadmin"||t(n).user.role==="admin"||t(n).user.role==="wilayah"||t(n).user.role==="daerah")&&t(e).ubahPersyaratan("fa",a.id,"info","memberikan","TUNTAS FA",a.santri.nama_lengkap)},[p(c,{icon:"times-square",class:"icon text-white"})],8,St)),a.persyaratan.bebas_kamtib?(i(),r("td",{key:6,class:"text-center bg-success",onClick:h=>(t(n).user.role==="sysadmin"||t(n).user.role==="admin"||t(n).user.role==="wilayah"||t(n).user.role==="daerah")&&t(e).ubahPersyaratan("kamtib",a.id,"error","membatalkan","BEBAS KAMTIB",a.santri.nama_lengkap)},[p(c,{icon:"check-circle",class:"icon text-white"})],8,Ct)):(i(),r("td",{key:7,class:"text-center bg-danger",onClick:h=>(t(n).user.role==="sysadmin"||t(n).user.role==="admin"||t(n).user.role==="wilayah"||t(n).user.role==="daerah")&&t(e).ubahPersyaratan("kamtib",a.id,"info","memberikan","BEBAS KAMTIB",a.santri.nama_lengkap)},[p(c,{icon:"times-square",class:"icon text-white"})],8,Bt)),s("td",null,u(a.santri.wilayah),1),s("td",null,u(a.santri.blok),1)],40,vt))),128))])])]),t(e).items.length>0?(i(),r("div",At,[t(e).meta.x_total_data?(i(),C(b,{key:0,meta:t(e).meta,per_page:t(e).params.limit,onSetPage:o[19]||(o[19]=a=>t(e).setPage(a)),onNext:t(e).nexPage,onPrev:t(e).prevPage,onLast:t(e).setPage,onFirst:t(e).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):y("",!0)])):y("",!0)],64)}}};export{Ut as default};
