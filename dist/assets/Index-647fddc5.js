import{m as k,z as h,S as g,E as D,c as d,b as t,d as i,I as u,u as s,F as c,j as b,t as r,v as p,n as y,G as v,o as m}from"./index-12a07d37.js";const _=k("table_dropspot",{state:()=>({items:[],params:{cari:"",area:""}}),actions:{async getData(){const l={params:this.params};try{await h.get("dropspot",l).then(n=>{(n.data.code=200)&&(this.items=n.data.data)})}catch{}}}}),A=k("form_dropspot",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isArea:[],idEdit:"",namaArea:"",form:{nama:"",type:"",area_id:"",cakupan:"",harga:""}}),actions:{setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit},getArea(){try{h.get("area").then(l=>{this.isArea=l.data.data})}catch{}},async tambahData(){try{const l=await h.post("dropspot",this.form);this.isOpenAdd=!1,_().getData(),this.form={}}catch{}},handleDoubleClik(l){this.idEdit=l.id,this.namaArea=l.area?l.area.nama:"kosong",this.form.nama=l.nama,this.form.type=l.type,this.form.area_id=l.area_id,this.form.cakupan=l.cakupan,this.form.harga=l.harga,this.isOpenEdit=!0},async editData(){try{await h.put(`dropspot/${this.idEdit}`,this.form).then(l=>{this.isOpenEdit=!1,this.form={},_().getData()})}catch{}},async deleteData(){g.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&h.delete(`dropspot/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.form={},_().getData()})})}}}),O=t("h3",null,"Data Dropspot",-1),C=t("hr",null,null,-1),E={class:"filter-box mb-5 row"},x={class:"col-md-2"},T=t("option",{value:"",selected:""},"Semua Area",-1),V=["value"],U={class:"serach-box row"},w={class:"col-md-10 d-flex align-items-center mb-2"},S={class:"col-md-2 d-flex align-items-center"},$=t("hr",null,null,-1),B={class:"table-responsive"},M={class:"table table-sm table-hover mt-3"},N=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Dropspot"),t("th",{scope:"col"},"Type"),t("th",{scope:"col"},"Area"),t("th",{scope:"col"},"Cakupan"),t("th",{scope:"col"},"Harga")])],-1),H=["onDblclick"],L={class:"modal-dialog"},F={class:"modal-content"},z={class:"modal-header"},I=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Dropsot",-1),K={class:"modal-body"},P={class:"form-group mb-3"},j=t("small",null,"Nama Dropspot",-1),G={class:"form-group mb-3"},q=t("small",null,"Type",-1),J=t("option",{value:"",selected:""},"Pilih Type",-1),Q=t("option",{value:"by_provinsi",selected:""},"by_provinsi",-1),R=t("option",{value:"by_kabupaten",selected:""},"by_kabupaten",-1),W=t("option",{value:"by_kecamatan",selected:""},"by_kecamatan",-1),X=[J,Q,R,W],Y={class:"form-group mb-3"},Z=t("small",null,"Area",-1),tt=t("option",{value:"",selected:""},"Pilih Area",-1),at=["value"],st={class:"form-group mb-3"},et=t("small",null,"Cakupan Daerah",-1),ot={class:"form-group mb-3"},lt=t("small",null,"Harga",-1),nt={class:"modal-footer"},it={class:"modal-dialog"},dt={class:"modal-content"},rt={class:"modal-header"},mt=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropspot",-1),pt={class:"modal-body"},ut={class:"form-group mb-3"},ct=t("small",null,"Nama Dropspot",-1),ht={class:"form-group mb-3"},bt=t("small",null,"Type",-1),_t=t("option",{value:"by_provinsi",selected:""},"by_provinsi",-1),ft=t("option",{value:"by_kabupaten",selected:""},"by_kabupaten",-1),yt=t("option",{value:"by_kecamatan",selected:""},"by_kecamatan",-1),vt=[_t,ft,yt],kt={class:"form-group mb-3"},gt=t("small",null,"Area",-1),Dt={value:"",selected:""},At=["value"],Ot={class:"form-group mb-3"},Ct=t("small",null,"Cakupan Daerah",-1),Et={class:"form-group mb-3"},xt=t("small",null,"Harga",-1),Tt={class:"modal-footer"},St={__name:"Index",setup(l){const n=_(),e=A();return n.getData(),e.getArea(),D(()=>{e.getArea()}),(Vt,o)=>(m(),d(c,null,[O,C,t("div",E,[t("div",x,[i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[0]||(o[0]=a=>s(n).params.area=a),onChange:o[1]||(o[1]=(...a)=>s(n).getData&&s(n).getData(...a))},[T,(m(!0),d(c,null,b(s(e).isArea,a=>(m(),d("option",{key:a,value:a.id},r(a.nama),9,V))),128))],544),[[u,s(n).params.area]])])]),t("div",U,[t("div",w,[t("small",null,"Total data "+r(s(n).items.length),1)]),t("div",S,[i(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>s(n).params.cari=a),class:"form-control form-control-sm mb-2",placeholder:"Cari Dropspot ...",onKeyup:o[3]||(o[3]=(...a)=>s(n).getData&&s(n).getData(...a))},null,544),[[p,s(n).params.cari]])])]),$,t("button",{class:"btn btn-sm btn-primary",onClick:o[4]||(o[4]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))}," Tambah Dropspot "),t("div",B,[t("table",M,[N,t("tbody",null,[(m(!0),d(c,null,b(s(n).items,(a,f)=>(m(),d("tr",{key:f,onDblclick:Ut=>s(e).handleDoubleClik(a)},[t("td",null,r(f+1),1),t("td",null,r(a.nama),1),t("td",null,r(a.type),1),t("td",null,r(a.area.nama),1),t("td",null,r(a.cakupan),1),t("td",null,r(a.harga),1)],40,H))),128))])])]),s(e).isOpenAdd===!0?(m(),d("div",{key:0,class:y(["modal fade",{show:s(e).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",L,[t("div",F,[t("div",z,[I,t("button",{class:"btn-close",type:"button",onClick:o[5]||(o[5]=a=>s(e).isOpenAdd=!1)})]),t("div",K,[t("div",P,[j,i(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=a=>s(e).form.nama=a),placeholder:"Masukkan nama dropspot ..",class:"form-control mt-2"},null,512),[[p,s(e).form.nama]])]),t("div",G,[q,i(t("select",{class:"form-select","onUpdate:modelValue":o[7]||(o[7]=a=>s(e).form.type=a)},X,512),[[u,s(e).form.type]])]),t("div",Y,[Z,i(t("select",{class:"form-select","onUpdate:modelValue":o[8]||(o[8]=a=>s(e).form.area_id=a)},[tt,(m(!0),d(c,null,b(s(e).isArea,a=>(m(),d("option",{key:a,value:a.id},r(a.nama),9,at))),128))],512),[[u,s(e).form.area_id]])]),t("div",st,[et,i(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=a=>s(e).form.cakupan=a),placeholder:"Masukkan cakupan daerah ..",class:"form-control mt-2"},null,512),[[p,s(e).form.cakupan]])]),t("div",ot,[lt,i(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>s(e).form.harga=a),placeholder:"Masukkan cakupan harga ..",class:"form-control mt-2"},null,512),[[p,s(e).form.harga]])])]),t("div",nt,[t("button",{class:"btn btn-sm btn-secondary",onClick:o[11]||(o[11]=a=>s(e).isOpenAdd=!1)}," Tutup "),t("button",{class:"btn btn-sm btn-primary",onClick:o[12]||(o[12]=(...a)=>s(e).tambahData&&s(e).tambahData(...a))}," Simpan ")])])])],2)):v("",!0),s(e).isOpenEdit===!0?(m(),d("div",{key:1,class:y(["modal fade",{show:s(e).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",it,[t("div",dt,[t("div",rt,[mt,t("button",{class:"btn-close",type:"button",onClick:o[13]||(o[13]=a=>s(e).isOpenEdit=!1)})]),t("div",pt,[t("div",ut,[ct,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[14]||(o[14]=a=>s(e).form.nama=a)},null,512),[[p,s(e).form.nama]])]),t("div",ht,[bt,i(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=a=>s(e).form.type=a)},vt,512),[[u,s(e).form.type]])]),t("div",kt,[gt,i(t("select",{class:"form-select","onUpdate:modelValue":o[16]||(o[16]=a=>s(e).form.area_id=a)},[t("option",Dt,r(s(e).namaArea),1),(m(!0),d(c,null,b(s(e).isArea,a=>(m(),d("option",{key:a,value:a.id},r(a.nama),9,At))),128))],512),[[u,s(e).form.area_id]])]),t("div",Ot,[Ct,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[17]||(o[17]=a=>s(e).form.cakupan=a)},null,512),[[p,s(e).form.cakupan]])]),t("div",Et,[xt,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[18]||(o[18]=a=>s(e).form.harga=a)},null,512),[[p,s(e).form.harga]])])]),t("div",Tt,[t("button",{class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=a=>s(e).isOpenEdit=!1)}," Tutup "),t("button",{class:"btn btn-sm btn-danger",onClick:o[20]||(o[20]=(...a)=>s(e).deleteData&&s(e).deleteData(...a))}," Hapus "),t("button",{class:"btn btn-sm btn-primary",onClick:o[21]||(o[21]=(...a)=>s(e).editData&&s(e).editData(...a))}," Simpan ")])])])],2)):v("",!0)],64))}};export{St as default};
