import{a as u}from"./axios-4a70c6fc.js";import{S as h}from"./sweetalert2.all-bb7cf6a6.js";import{o as n,c as i,a,w as d,k as f,F as p,i as c,t as r,v as m,n as g,b as k}from"./index-d563b1f1.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const y={data(){return{showModalTambah:!1,showModalEdit:!1,namaTambah:"",areaIdTambah:"",cakupanTambah:"",hargaTambah:"",editDropspotId:null,namaEdit:"",areaIdEdit:null,areaNamaEdit:"",cakupanEdit:"",hargaEdit:"",filterAreaId:"",cariDropspot:"",jumlahData:0,area:[],dropspot:[]}},mounted(){this.getData()},methods:{async getData(){const l=await u.get("https://puber-api.kildev.my.id/dropspot",{headers:{"x-auth-token":localStorage.getItem("token")},params:{cari:this.cariDropspot,area:this.filterAreaId}});this.area=l.data.filter.area,this.dropspot=l.data.data,this.jumlahData=l.headers.x_total_data},handleDoubleClick(l,s,b,_,e,o){this.editDropspotId=l,this.namaEdit=s,this.areaIdEdit=b,this.areaNamaEdit=_,this.cakupanEdit=e,this.hargaEdit=o,this.showModalEdit=!0},async tambahData(){const l={nama:this.namaTambah,area_id:this.areaIdTambah,cakupan:this.cakupanTambah,harga:this.hargaTambah};try{const s=await u.post("https://puber-api.kildev.my.id/dropspot",l,{headers:{"x-auth-token":localStorage.getItem("token")}});this.showModalTambah=!1,h.fire("Berhasil",s.data.message,"success"),this.getData(),this.namaTambah="",this.areaIdTambah="",this.cakupanTambah="",this.hargaTambah=""}catch(s){console.log(s.response),h.fire(s.response.data.message,s.response.data.error,"error")}},async editData(){const l={nama:this.namaEdit,area_id:this.areaIdEdit,cakupan:this.cakupanEdit,harga:this.hargaEdit};try{const s=await u.put(`https://puber-api.kildev.my.id/dropspot/${this.editDropspotId}`,l,{headers:{"x-auth-token":localStorage.getItem("token")}});this.showModalEdit=!1,h.fire("Berhasil",s.data.message,"success"),this.getData()}catch(s){console.log(s.response),h.fire(s.response.data.message,s.response.data.error,"error")}},async deleteData(){h.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&u.delete(`https://puber-api.kildev.my.id/dropspot/${this.editDropspotId}`,{headers:{"x-auth-token":localStorage.getItem("token")}}).then(s=>{this.showModalEdit=!1,h.fire("Berhasil",s.data.message,"success"),this.getData()})})}}},T=a("h3",null,"Data Dropspot",-1),E=a("hr",null,null,-1),w={class:"filter-box mb-5 row"},x={class:"col-md-2"},I=a("option",{value:"",selected:""},"Semua Area",-1),C=["value"],M={class:"search-box row"},S={class:"col-md-10 d-flex align-items-center mb-2"},V={class:"col-md-2 d-flex align-items-center"},A=a("hr",null,null,-1),B={class:"table-responsive"},N={class:"table table-sm table-hover mt-3"},U=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"No"),a("th",{scope:"col"},"Nama Dropspot"),a("th",{scope:"col"},"Area"),a("th",{scope:"col"},"Cakupan"),a("th",{scope:"col"},"Harga")])],-1),H=["onDblclick"],L={class:"modal-dialog"},j={class:"modal-content"},F={class:"modal-header"},K=a("h1",{class:"modal-title fs-5",id:"modalTambahLabel"}," Tambah Dropspot ",-1),z={class:"modal-body"},P={class:"form-group mb-3"},R=a("small",null,"Nama Dropspot",-1),q={class:"form-group mb-3"},G=a("small",null,"Area",-1),J=a("option",{value:"",selected:""},"Pilih Area",-1),O=["value"],Q={class:"form-group mb-3"},W=a("small",null,"Cakupan Daerah",-1),X={class:"form-group mb-3"},Y=a("small",null,"Harga",-1),Z={class:"modal-footer"},$={class:"modal-dialog"},aa={class:"modal-content"},ta={class:"modal-header"},sa=a("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropspot",-1),ea={class:"modal-body"},oa={class:"form-group mb-3"},la=a("small",null,"Nama Dropspot",-1),na={class:"form-group mb-3"},ia=a("small",null,"Area",-1),ra={class:"form-select"},da=["value"],ma=["value"],ha={class:"form-group mb-3"},pa=a("small",null,"Cakupan Daerah",-1),ua={class:"form-group mb-3"},ca=a("small",null,"Harga",-1),ba={class:"modal-footer"};function _a(l,s,b,_,e,o){return n(),i(p,null,[T,E,a("div",w,[a("div",x,[d(a("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.filterAreaId=t),onChange:s[1]||(s[1]=(...t)=>o.getData&&o.getData(...t)),class:"form-select form-select-sm"},[I,(n(!0),i(p,null,c(e.area,t=>(n(),i("option",{key:t.id,value:t.id},r(t.nama),9,C))),128))],544),[[f,e.filterAreaId]])])]),a("div",M,[a("div",S,[a("small",null,"Total data "+r(e.jumlahData),1)]),a("div",V,[d(a("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>e.cariDropspot=t),class:"form-control form-control-sm mb-2",placeholder:"Cari Dropspot ...",onKeyup:s[3]||(s[3]=(...t)=>o.getData&&o.getData(...t))},null,544),[[m,e.cariDropspot]])])]),A,a("button",{type:"button",class:"btn btn-sm btn-primary",onClick:s[4]||(s[4]=t=>e.showModalTambah=!0)}," Tambah Dropspot "),a("div",B,[a("table",N,[U,a("tbody",null,[(n(!0),i(p,null,c(e.dropspot,(t,v)=>(n(),i("tr",{key:t.id,onDblclick:fa=>o.handleDoubleClick(t.id,t.nama,t.area.id,t.area.nama,t.cakupan,t.harga)},[a("td",null,r(v+1),1),a("td",null,r(t.nama),1),a("td",null,r(t.area.nama),1),a("td",null,r(t.cakupan),1),a("td",null,"Rp. "+r(t.harga),1)],40,H))),128))])])]),e.showModalTambah?(n(),i("div",{key:0,class:g(["modal fade",{show:e.showModalTambah}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[a("div",L,[a("div",j,[a("div",F,[K,a("button",{type:"button",class:"btn-close",onClick:s[5]||(s[5]=t=>e.showModalTambah=!1)})]),a("div",z,[a("div",P,[R,d(a("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=t=>e.namaTambah=t),class:"form-control mt-2",placeholder:"Masukkan nama dropspot .."},null,512),[[m,e.namaTambah]])]),a("div",q,[G,d(a("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>e.areaIdTambah=t),class:"form-select"},[J,(n(!0),i(p,null,c(e.area,t=>(n(),i("option",{key:t.id,value:t.id},r(t.nama),9,O))),128))],512),[[f,e.areaIdTambah]])]),a("div",Q,[W,d(a("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=t=>e.cakupanTambah=t),class:"form-control mt-2",placeholder:"Masukkan caukpan daerah .."},null,512),[[m,e.cakupanTambah]])]),a("div",X,[Y,d(a("input",{type:"text","onUpdate:modelValue":s[9]||(s[9]=t=>e.hargaTambah=t),class:"form-control mt-2",placeholder:"Masukkan harga .."},null,512),[[m,e.hargaTambah]])])]),a("div",Z,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:s[10]||(s[10]=t=>e.showModalTambah=!1)}," Tutup "),a("button",{type:"button",class:"btn btn-sm btn-primary",onClick:s[11]||(s[11]=(...t)=>o.tambahData&&o.tambahData(...t))}," Simpan ")])])])],2)):k("",!0),e.showModalEdit?(n(),i("div",{key:1,class:g(["modal fade",{show:e.showModalEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[a("div",$,[a("div",aa,[a("div",ta,[sa,a("button",{type:"button",class:"btn-close",onClick:s[12]||(s[12]=t=>e.showModalEdit=!1)})]),a("div",ea,[a("div",oa,[la,d(a("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":s[13]||(s[13]=t=>e.namaEdit=t)},null,512),[[m,e.namaEdit]])]),a("div",na,[ia,a("select",ra,[a("option",{value:e.areaIdEdit,selected:""},r(e.areaNamaEdit),9,da),(n(!0),i(p,null,c(e.area,t=>(n(),i("option",{key:t.id,value:t.id},r(t.nama),9,ma))),128))])]),a("div",ha,[pa,d(a("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":s[14]||(s[14]=t=>e.cakupanEdit=t)},null,512),[[m,e.cakupanEdit]])]),a("div",ua,[ca,d(a("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":s[15]||(s[15]=t=>e.hargaEdit=t)},null,512),[[m,e.hargaEdit]])])]),a("div",ba,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:s[16]||(s[16]=t=>e.showModalEdit=!1)}," Tutup "),a("button",{type:"button",class:"btn btn-sm btn-danger",onClick:s[17]||(s[17]=(...t)=>o.deleteData&&o.deleteData(...t))}," Hapus "),a("button",{type:"button",class:"btn btn-sm btn-primary",onClick:s[18]||(s[18]=(...t)=>o.editData&&o.editData(...t))}," Simpan ")])])])],2)):k("",!0)],64)}const ya=D(y,[["render",_a]]);export{ya as default};
