import{x as g,y as n,z as s,A as l,B as r,C as i,D as h,E as u,G as d,H as c}from"./index-93a656cc.js";const k=g("auth",{state:()=>({token:localStorage.getItem("token")?n():null,user:localStorage.getItem("user")?s():null,foto:"",stast:{},loading:!1}),getters:{isAuth(t){return t.token!==null||t.token!==void 0},getToken:()=>n(),useGetter:()=>s()!==null||s()!==void 0,getNamaLengkap:()=>l()!==null||l()!==void 0,getFotoProfil:()=>r()!==null||r()!==void 0},actions:{async login(t){this.loading=!0;try{await i.post("login",t).then(e=>{h(e.data.token),u(e.data.data);const a=n(),o=s();a?(this.SET_TOKEN_USER(a,o),this.loading=!1):(this.loading=!1,d.push("/login"))})}catch{this.loading=!1}},async getImage(t,e){this.loading=!0;try{const a={responseType:"blob"};await i.get("santri/image/"+t+"?size="+e,a).then(o=>{this.foto=URL.createObjectURL(o.data),this.loading=!1})}catch{this.loading=!1}},async getStats(){try{await i.get("dashboard").then(t=>{console.log(t.data.data),this.stast=t.data.data})}catch{}},SET_TOKEN_USER(t,e){c(t),this.token=t,this.user=e,d.push("/")}}});export{k as u};
