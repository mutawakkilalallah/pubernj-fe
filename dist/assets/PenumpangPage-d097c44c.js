import{x as b,C as u,q as v,a as f,o as n,c as r,b as t,d,L as h,u as s,F as p,l as c,t as o,v as D,e as y,K as k,M as P}from"./index-85cf10b6.js";const x=b("table_penumpang",{state:()=>({items:[],meta:{},myPage:"",filter:{area:[],dropspot:[]},areaId:"",params:{cari:"",dropspot:"",page:1,limit:25}}),actions:{nexPage(i){this.params.page=parseInt(i)+1,this.getData()},prevPage(i){this.params.page=parseInt(i)-1,this.getData()},setPage(i){this.params.page=parseInt(i),this.getData()},searchPage(){this.params.page=1,this.getData()},async getData(){const i={params:this.params};try{await u.get("penumpang",i).then(a=>{(a.data.code=200)&&(this.totalData=a.headers.x_total_data,this.items=a.data.data,this.meta=a.headers,this.filter.area=a.data.filter.area)})}catch{}},async getDropspot(){const i={params:{area:this.areaId}};try{await u.get("dropspot",i).then(a=>{console.log(a.data),(a.data.code=200)&&(this.filter.dropspot=a.data.data)})}catch{}}}}),S=t("h3",null,"Data Penumpang",-1),w=t("hr",null,null,-1),I={class:"filter-box mb-5 row"},N={class:"col-md-2"},C=t("option",{value:"",selected:""},"Semua Area",-1),T=["value"],V=["disabled"],B=t("option",{value:"",selected:""},"Semua Dropsot",-1),F=["value"],K=P('<div class="col-md-2"><select class="form-select form-select-sm mb-2"><option value="" selected>Semua Tujuan</option><option value="">-- Sudah Ditentukan --</option><option value="">-- Tanpa Dropspot --</option></select></div>',1),L={class:"serach-box row"},M={class:"col-md-10 d-flex align-items-center mb-2"},U={class:"col-md-2 d-flex align-items-center"},R=t("hr",null,null,-1),j={class:"table-responsive"},A={class:"table table-sm table-hover mt-3"},q=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"NIUP"),t("th",{scope:"col"},"Nama Santri"),t("th",{scope:"col"},"Wilayah"),t("th",{scope:"col"},"Daerah"),t("th",{scope:"col"},"Kecamatan"),t("th",{scope:"col"},"Kabupaten"),t("th",{scope:"col"},"Provinsi"),t("th",{scope:"col"},"Dropsot"),t("th",{scope:"col"},"Area"),t("th",{scope:"col"},"Tarif"),t("th",{scope:"col"},"Jumlah Bayar"),t("th",{scope:"col"},"Status Pembayaran")])],-1),E=["onDblclick"],J={key:0},W={key:1,class:"text-danger"},$=t("i",null,"belum-ditentukan",-1),z=[$],G={key:2},H={key:3,class:"text-danger"},O=t("i",null,"belum-ditentukan",-1),Q=[O],X={key:4},Y={key:5,class:"text-danger"},at={__name:"PenumpangPage",setup(i){const a=x();return v(()=>{a.getData()}),(_,l)=>{const g=f("app-paginate");return n(),r(p,null,[S,w,t("div",I,[t("div",N,[d(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":l[0]||(l[0]=e=>s(a).areaId=e),onChange:l[1]||(l[1]=(...e)=>s(a).getDropspot&&s(a).getDropspot(...e))},[C,(n(!0),r(p,null,c(s(a).filter.area,e=>(n(),r("option",{key:e,value:e.id},o(e.nama),9,T))),128))],544),[[h,s(a).areaId]]),d(t("select",{class:"form-select form-select-sm mb-2",disabled:s(a).areaId==="","onUpdate:modelValue":l[2]||(l[2]=e=>s(a).params.dropspot=e),onChange:l[3]||(l[3]=(...e)=>s(a).getData&&s(a).getData(...e))},[B,(n(!0),r(p,null,c(s(a).filter.dropspot,e=>(n(),r("option",{key:e,value:e.id},o(e.nama),9,F))),128))],40,V),[[h,s(a).params.dropspot]])]),K]),t("div",L,[t("div",M,[t("small",null,"Total data "+o(s(a).totalData),1)]),t("div",U,[d(t("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>s(a).params.cari=e),class:"form-control form-control-sm mb-2",placeholder:"Cari Penumpang ...",onKeyup:l[5]||(l[5]=(...e)=>s(a).getData&&s(a).getData(...e))},null,544),[[D,s(a).params.cari]])])]),R,t("div",j,[t("table",A,[q,t("tbody",null,[(n(!0),r(p,null,c(s(a).items,(e,m)=>(n(),r("tr",{key:m,onDblclick:Z=>_.form.handleDoubleClik(e)},[t("td",null,o(m+1+(s(a).params.page-1)*s(a).params.limit),1),t("td",null,o(e.santri_niup),1),t("td",null,o(e.santri_nama),1),t("td",null,o(e.santri_wilayah),1),t("td",null,o(e.santri_blok),1),t("td",null,o(e.raw.kecamatan),1),t("td",null,o(e.raw.kabupaten),1),t("td",null,o(e.raw.provinsi),1),e.dropspot?(n(),r("td",J,o(e.dropspot.nama),1)):(n(),r("td",W,z)),e.dropspot?(n(),r("td",G,o(e.dropspot.area.nama),1)):(n(),r("td",H,Q)),e.dropspot?(n(),r("td",X,o("Rp. "+e.dropspot.harga),1)):(n(),r("td",Y,"Rp. 0")),t("td",null,o("Rp. "+e.jumlah_bayar),1),t("td",null,[t("i",null,o(e.status_bayar),1)])],40,E))),128))])])]),s(a).meta.x_total_data?(n(),y(g,{key:0,meta:s(a).meta,per_page:s(a).params.limit,onSetPage:l[6]||(l[6]=e=>s(a).setPage(e)),onNext:s(a).nexPage,onPrev:s(a).prevPage,onLast:s(a).setPage,onFirst:s(a).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):k("",!0)],64)}}};export{at as default};
