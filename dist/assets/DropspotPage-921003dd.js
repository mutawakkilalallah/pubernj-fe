import{x as g,C as h,S as D,q as A,o as d,c as r,b as t,d as i,L as u,u as s,F as c,l as b,t as m,v as p,n as y,w as v,K as k}from"./index-85cf10b6.js";const _=g("table_dropspot",{state:()=>({items:[],params:{cari:"",area:""}}),actions:{async getData(){const l={params:this.params};try{await h.get("dropspot",l).then(n=>{(n.data.code=200)&&(this.items=n.data.data)})}catch{}}}}),O=g("form_dropspot",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isArea:[],idEdit:"",namaArea:"",form:{nama:"",type:"",area_id:"",cakupan:"",harga:""}}),actions:{resetForm(){this.form.nama="",this.form.type="",this.form.area_id="",this.form.cakupan="",this.form.harga=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},getArea(){try{h.get("area").then(l=>{this.isArea=l.data.data})}catch{}},async tambahData(){try{const l=await h.post("dropspot",this.form);this.isOpenAdd=!1,_().getData(),this.resetForm()}catch{}},handleDoubleClik(l){this.idEdit=l.id,this.namaArea=l.area?l.area.nama:"kosong",this.form.nama=l.nama,this.form.type=l.type,this.form.area_id=l.area_id,this.form.cakupan=l.cakupan,this.form.harga=l.harga,this.isOpenEdit=!0},async editData(){try{await h.put(`dropspot/${this.idEdit}`,this.form).then(l=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})}catch{}},async deleteData(){D.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&h.delete(`dropspot/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),_().getData()})})}}}),E=t("h3",null,"Data Dropspot",-1),C=t("hr",null,null,-1),x={class:"filter-box mb-5 row"},T={class:"col-md-2"},V=t("option",{value:"",selected:""},"Semua Area",-1),w=["value"],U={class:"serach-box row"},S={class:"col-md-10 d-flex align-items-center mb-2"},F={class:"col-md-2 d-flex align-items-center"},M=t("hr",null,null,-1),B={class:"table-responsive"},L={class:"table table-sm table-hover mt-3"},N=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Dropspot"),t("th",{scope:"col"},"Type"),t("th",{scope:"col"},"Area"),t("th",{scope:"col"},"Cakupan"),t("th",{scope:"col"},"Harga")])],-1),H=["onDblclick"],K={class:"modal-dialog"},P={class:"modal-content"},$={class:"modal-header"},q=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Dropsot",-1),z={class:"modal-body"},j={class:"form-group mb-3"},G=t("small",null,"Nama Dropspot",-1),I={class:"form-group mb-3"},J=t("small",null,"Type",-1),Q=t("option",{value:"",selected:""},"Pilih Type",-1),R=t("option",{value:"by_provinsi",selected:""},"by_provinsi",-1),W=t("option",{value:"by_kabupaten",selected:""},"by_kabupaten",-1),X=t("option",{value:"by_kecamatan",selected:""},"by_kecamatan",-1),Y=[Q,R,W,X],Z={class:"form-group mb-3"},tt=t("small",null,"Area",-1),at=t("option",{value:"",selected:""},"Pilih Area",-1),st=["value"],et={class:"form-group mb-3"},ot=t("small",null,"Cakupan Daerah",-1),lt={class:"form-group mb-3"},nt=t("small",null,"Harga",-1),it={class:"modal-footer"},dt=t("button",{type:"submit",class:"btn btn-sm btn-primary"}," Simpan ",-1),rt={class:"modal-dialog"},mt={class:"modal-content"},pt={class:"modal-header"},ut=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropspot",-1),ct={class:"modal-body"},ht={class:"form-group mb-3"},bt=t("small",null,"Nama Dropspot",-1),_t={class:"form-group mb-3"},ft=t("small",null,"Type",-1),yt=t("option",{value:"by_provinsi",selected:""},"by_provinsi",-1),vt=t("option",{value:"by_kabupaten",selected:""},"by_kabupaten",-1),kt=t("option",{value:"by_kecamatan",selected:""},"by_kecamatan",-1),gt=[yt,vt,kt],Dt={class:"form-group mb-3"},At=t("small",null,"Area",-1),Ot={value:"",selected:""},Et=["value"],Ct={class:"form-group mb-3"},xt=t("small",null,"Cakupan Daerah",-1),Tt={class:"form-group mb-3"},Vt=t("small",null,"Harga",-1),wt={class:"modal-footer"},Ut=t("button",{type:"submit",class:"btn btn-sm btn-primary"}," Simpan ",-1),Bt={__name:"DropspotPage",setup(l){const n=_(),e=O();return n.getData(),e.getArea(),A(()=>{e.getArea()}),(St,o)=>(d(),r(c,null,[E,C,t("div",x,[t("div",T,[i(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[0]||(o[0]=a=>s(n).params.area=a),onChange:o[1]||(o[1]=(...a)=>s(n).getData&&s(n).getData(...a))},[V,(d(!0),r(c,null,b(s(e).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,w))),128))],544),[[u,s(n).params.area]])])]),t("div",U,[t("div",S,[t("small",null,"Total data "+m(s(n).items.length),1)]),t("div",F,[i(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>s(n).params.cari=a),class:"form-control form-control-sm mb-2",placeholder:"Cari Dropspot ...",onKeyup:o[3]||(o[3]=(...a)=>s(n).getData&&s(n).getData(...a))},null,544),[[p,s(n).params.cari]])])]),M,t("button",{class:"btn btn-sm btn-primary",onClick:o[4]||(o[4]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))}," Tambah Dropspot "),t("div",B,[t("table",L,[N,t("tbody",null,[(d(!0),r(c,null,b(s(n).items,(a,f)=>(d(),r("tr",{key:f,onDblclick:Ft=>s(e).handleDoubleClik(a)},[t("td",null,m(f+1),1),t("td",null,m(a.nama),1),t("td",null,m(a.type),1),t("td",null,m(a.area.nama),1),t("td",null,m(a.cakupan),1),t("td",null,m(a.harga),1)],40,H))),128))])])]),s(e).isOpenAdd===!0?(d(),r("div",{key:0,class:y(["modal fade",{show:s(e).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",K,[t("div",P,[t("div",$,[q,t("button",{class:"btn-close",type:"button",onClick:o[5]||(o[5]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))})]),t("form",{onSubmit:o[12]||(o[12]=v((...a)=>s(e).tambahData&&s(e).tambahData(...a),["prevent"]))},[t("div",z,[t("div",j,[G,i(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=a=>s(e).form.nama=a),placeholder:"Masukkan nama dropspot ..",class:"form-control mt-2"},null,512),[[p,s(e).form.nama]])]),t("div",I,[J,i(t("select",{class:"form-select","onUpdate:modelValue":o[7]||(o[7]=a=>s(e).form.type=a)},Y,512),[[u,s(e).form.type]])]),t("div",Z,[tt,i(t("select",{class:"form-select","onUpdate:modelValue":o[8]||(o[8]=a=>s(e).form.area_id=a)},[at,(d(!0),r(c,null,b(s(e).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,st))),128))],512),[[u,s(e).form.area_id]])]),t("div",et,[ot,i(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=a=>s(e).form.cakupan=a),placeholder:"Masukkan cakupan daerah ..",class:"form-control mt-2"},null,512),[[p,s(e).form.cakupan]])]),t("div",lt,[nt,i(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>s(e).form.harga=a),placeholder:"Masukkan cakupan harga ..",class:"form-control mt-2"},null,512),[[p,s(e).form.harga]])])]),t("div",it,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[11]||(o[11]=(...a)=>s(e).setOpenAdd&&s(e).setOpenAdd(...a))}," Tutup "),dt])],32)])])],2)):k("",!0),s(e).isOpenEdit===!0?(d(),r("div",{key:1,class:y(["modal fade",{show:s(e).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",rt,[t("div",mt,[t("div",pt,[ut,t("button",{class:"btn-close",type:"button",onClick:o[13]||(o[13]=(...a)=>s(e).setOpenEdit&&s(e).setOpenEdit(...a))})]),t("form",{onSubmit:o[21]||(o[21]=v((...a)=>s(e).editData&&s(e).editData(...a),["prevent"]))},[t("div",ct,[t("div",ht,[bt,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[14]||(o[14]=a=>s(e).form.nama=a)},null,512),[[p,s(e).form.nama]])]),t("div",_t,[ft,i(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=a=>s(e).form.type=a)},gt,512),[[u,s(e).form.type]])]),t("div",Dt,[At,i(t("select",{class:"form-select","onUpdate:modelValue":o[16]||(o[16]=a=>s(e).form.area_id=a)},[t("option",Ot,m(s(e).namaArea),1),(d(!0),r(c,null,b(s(e).isArea,a=>(d(),r("option",{key:a,value:a.id},m(a.nama),9,Et))),128))],512),[[u,s(e).form.area_id]])]),t("div",Ct,[xt,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[17]||(o[17]=a=>s(e).form.cakupan=a)},null,512),[[p,s(e).form.cakupan]])]),t("div",Tt,[Vt,i(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[18]||(o[18]=a=>s(e).form.harga=a)},null,512),[[p,s(e).form.harga]])])]),t("div",wt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=(...a)=>s(e).setOpenEdit&&s(e).setOpenEdit(...a))}," Tutup "),t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:o[20]||(o[20]=(...a)=>s(e).deleteData&&s(e).deleteData(...a))}," Hapus "),Ut])],32)])])],2)):k("",!0)],64))}};export{Bt as default};
