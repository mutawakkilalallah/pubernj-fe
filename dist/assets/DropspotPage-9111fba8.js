import{x as k,D as A,C as h,S as O,o as E,g as i,c as r,b as t,d,E as u,u as a,F as c,q as _,t as m,v as p,z as b,n as v,w as g,G as D}from"./index-ed1e1048.js";const f=k("table_dropspot",{state:()=>({user:localStorage.getItem("user")?A():null,items:[],params:{cari:"",area:""}}),actions:{async getData(){const l={params:this.params};try{await h.get("dropspot",l).then(n=>{(n.data.code=200)&&(this.items=n.data.data)})}catch{}}}}),C=k("form_dropspot",{state:()=>({isOpenAdd:!1,isOpenEdit:!1,isArea:[],idEdit:"",namaArea:"",form:{nama:"",type:"",area_id:"",cakupan:"",harga:""}}),actions:{resetForm(){this.form.nama="",this.form.type="",this.form.area_id="",this.form.cakupan="",this.form.harga=""},setOpenAdd(){this.isOpenAdd=!this.isOpenAdd},setOpenEdit(){this.isOpenEdit=!this.isOpenEdit,this.resetForm()},getArea(){try{h.get("area").then(l=>{this.isArea=l.data.data})}catch{}},async tambahData(){try{const l=await h.post("dropspot",this.form);this.isOpenAdd=!1,f().getData(),this.resetForm()}catch{}},handleDoubleClik(l){this.idEdit=l.id,this.namaArea=l.area?l.area.nama:"kosong",this.form.nama=l.nama,this.form.type=l.type,this.form.area_id=l.area_id,this.form.cakupan=l.cakupan,this.form.harga=l.harga,this.isOpenEdit=!0},async editData(){try{await h.put(`dropspot/${this.idEdit}`,this.form).then(l=>{this.isOpenEdit=!1,this.resetForm(),f().getData()})}catch{}},async deleteData(){O.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menghapus data ?",icon:"info",showCancelButton:!0,confirmButtonText:"Hapus",confirmButtonColor:"#DC3545"}).then(l=>{l.isConfirmed&&h.delete(`dropspot/${this.idEdit}`).then(n=>{this.isOpenEdit=!1,this.resetForm(),f().getData()})})}}}),x=t("h3",{class:"titlePage"},"Data Dropspot",-1),V=t("hr",null,null,-1),T={class:"filter-box mb-5 row"},U={class:"col-md-2"},w=t("option",{value:"",selected:""},"Semua Area",-1),S=["value"],F={class:"serach-box row"},M={class:"col-md-10 d-flex align-items-center mb-2"},N={class:"col-md-2 d-flex align-items-center"},B=t("hr",null,null,-1),H={class:"table-responsive"},L={class:"table table-sm table-hover mt-3"},P=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Nama Dropspot"),t("th",{scope:"col"},"Area"),t("th",{scope:"col"},"Harga"),t("th",{scope:"col"},"Cakupan")])],-1),$=["onDblclick"],z={class:"modal-dialog"},K={class:"modal-content"},q={class:"modal-header"},G=t("h1",{class:"modal-title fs-5",id:"modalTambahLabel"},"Tambah Dropsot",-1),I={class:"modal-body"},R={class:"form-group mb-3"},j=t("small",null,"Nama Dropspot",-1),J={class:"form-group mb-3"},Q=t("small",null,"Type",-1),W=D('<option value="" selected>Pilih Type</option><option value="by_negara" selected>by_negara</option><option value="by_provinsi" selected>by_provinsi</option><option value="by_kabupaten" selected>by_kabupaten</option><option value="by_kecamatan" selected>by_kecamatan</option><option value="by_desa" selected>by_desa</option>',6),X=[W],Y={class:"form-group mb-3"},Z=t("small",null,"Area",-1),tt=t("option",{value:"",selected:""},"Pilih Area",-1),et=["value"],at={class:"form-group mb-3"},st=t("small",null,"Cakupan Daerah",-1),ot={class:"form-group mb-3"},nt=t("small",null,"Harga",-1),lt={class:"modal-footer"},it=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),rt={class:"modal-dialog"},dt={class:"modal-content"},mt={class:"modal-header"},pt=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropspot",-1),ut={class:"modal-body"},ct={class:"form-group mb-3"},bt=t("small",null,"Nama Dropspot",-1),ht={class:"form-group mb-3"},_t=t("small",null,"Type",-1),ft=D('<option value="by_negara" selected>by_negara</option><option value="by_provinsi" selected>by_provinsi</option><option value="by_kabupaten" selected>by_kabupaten</option><option value="by_kecamatan" selected>by_kecamatan</option><option value="by_desa" selected>by_desa</option>',5),yt=[ft],vt={class:"form-group mb-3"},gt=t("small",null,"Area",-1),kt={value:"",selected:""},Dt=["value"],At={class:"form-group mb-3"},Ot=t("small",null,"Cakupan Daerah",-1),Et={class:"form-group mb-3"},Ct=t("small",null,"Harga",-1),xt={class:"modal-footer"},Vt={key:1,type:"submit",class:"btn btn-sm btn-primary"},St={__name:"DropspotPage",setup(l){const n=f(),s=C();return n.getData(),s.getArea(),E(()=>{s.getArea()}),(Tt,o)=>(i(),r(c,null,[x,V,t("div",T,[t("div",U,[d(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[0]||(o[0]=e=>a(n).params.area=e),onChange:o[1]||(o[1]=(...e)=>a(n).getData&&a(n).getData(...e))},[w,(i(!0),r(c,null,_(a(s).isArea,e=>(i(),r("option",{key:e,value:e.id},m(e.nama),9,S))),128))],544),[[u,a(n).params.area]])])]),t("div",F,[t("div",M,[t("small",null,"Total data "+m(a(n).items.length),1)]),t("div",N,[d(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>a(n).params.cari=e),class:"form-control form-control-sm mb-2",placeholder:"Cari Dropspot ...",onKeyup:o[3]||(o[3]=(...e)=>a(n).getData&&a(n).getData(...e))},null,544),[[p,a(n).params.cari]])])]),B,a(n).user.role=="sysadmin"?(i(),r("button",{key:0,class:"btn btn-sm btn-primary",onClick:o[4]||(o[4]=(...e)=>a(s).setOpenAdd&&a(s).setOpenAdd(...e))}," Tambah Dropspot ")):b("",!0),t("div",H,[t("table",L,[P,t("tbody",null,[(i(!0),r(c,null,_(a(n).items,(e,y)=>(i(),r("tr",{key:y,onDblclick:Ut=>a(n).user.role==="sysadmin"&&a(s).handleDoubleClik(e)},[t("td",null,m(y+1),1),t("td",null,m(e.nama),1),t("td",null,m(e.area.nama),1),t("td",null,m("Rp. "+e.harga),1),t("td",null,m(e.cakupan),1)],40,$))),128))])])]),a(s).isOpenAdd===!0?(i(),r("div",{key:1,class:v(["modal fade",{show:a(s).isOpenAdd}]),style:{display:"block"},id:"modalTambah",tabindex:"-1","aria-labelledby":"modalTambahLabel","aria-hidden":"true"},[t("div",z,[t("div",K,[t("div",q,[G,t("button",{class:"btn-close",type:"button",onClick:o[5]||(o[5]=(...e)=>a(s).setOpenAdd&&a(s).setOpenAdd(...e))})]),t("form",{onSubmit:o[12]||(o[12]=g((...e)=>a(s).tambahData&&a(s).tambahData(...e),["prevent"]))},[t("div",I,[t("div",R,[j,d(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>a(s).form.nama=e),placeholder:"Masukkan nama dropspot ..",class:"form-control mt-2"},null,512),[[p,a(s).form.nama]])]),t("div",J,[Q,d(t("select",{class:"form-select","onUpdate:modelValue":o[7]||(o[7]=e=>a(s).form.type=e)},X,512),[[u,a(s).form.type]])]),t("div",Y,[Z,d(t("select",{class:"form-select","onUpdate:modelValue":o[8]||(o[8]=e=>a(s).form.area_id=e)},[tt,(i(!0),r(c,null,_(a(s).isArea,e=>(i(),r("option",{key:e,value:e.id},m(e.nama),9,et))),128))],512),[[u,a(s).form.area_id]])]),t("div",at,[st,d(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=e=>a(s).form.cakupan=e),placeholder:"Masukkan cakupan daerah ..",class:"form-control mt-2"},null,512),[[p,a(s).form.cakupan]])]),t("div",ot,[nt,d(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=e=>a(s).form.harga=e),placeholder:"Masukkan cakupan harga ..",class:"form-control mt-2"},null,512),[[p,a(s).form.harga]])])]),t("div",lt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[11]||(o[11]=(...e)=>a(s).setOpenAdd&&a(s).setOpenAdd(...e))}," Tutup "),it])],32)])])],2)):b("",!0),a(s).isOpenEdit===!0?(i(),r("div",{key:2,class:v(["modal fade",{show:a(s).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",rt,[t("div",dt,[t("div",mt,[pt,t("button",{class:"btn-close",type:"button",onClick:o[13]||(o[13]=(...e)=>a(s).setOpenEdit&&a(s).setOpenEdit(...e))})]),t("form",{onSubmit:o[21]||(o[21]=g((...e)=>a(s).editData&&a(s).editData(...e),["prevent"]))},[t("div",ut,[t("div",ct,[bt,d(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[14]||(o[14]=e=>a(s).form.nama=e)},null,512),[[p,a(s).form.nama]])]),t("div",ht,[_t,d(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=e=>a(s).form.type=e)},yt,512),[[u,a(s).form.type]])]),t("div",vt,[gt,d(t("select",{class:"form-select","onUpdate:modelValue":o[16]||(o[16]=e=>a(s).form.area_id=e)},[t("option",kt,m(a(s).namaArea),1),(i(!0),r(c,null,_(a(s).isArea,e=>(i(),r("option",{key:e,value:e.id},m(e.nama),9,Dt))),128))],512),[[u,a(s).form.area_id]])]),t("div",At,[Ot,d(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[17]||(o[17]=e=>a(s).form.cakupan=e)},null,512),[[p,a(s).form.cakupan]])]),t("div",Et,[Ct,d(t("input",{type:"text",class:"form-control mt-2","onUpdate:modelValue":o[18]||(o[18]=e=>a(s).form.harga=e)},null,512),[[p,a(s).form.harga]])])]),t("div",xt,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:o[19]||(o[19]=(...e)=>a(s).setOpenEdit&&a(s).setOpenEdit(...e))}," Tutup "),a(n).user.role=="sysadmin"?(i(),r("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:o[20]||(o[20]=(...e)=>a(s).deleteData&&a(s).deleteData(...e))}," Hapus ")):b("",!0),a(n).user.role=="sysadmin"?(i(),r("button",Vt," Simpan ")):b("",!0)])],32)])])],2)):b("",!0)],64))}};export{St as default};
