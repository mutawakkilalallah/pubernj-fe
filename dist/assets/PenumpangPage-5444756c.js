import{x as L,C as c,i as j,S as U,a as I,g as r,c as l,b as a,u as t,l as P,q as F,d as u,y as V,E as b,F as h,s as _,t as d,z as m,v as C,w as y,n as f,e as B,f as M,G as S}from"./index-e66b72c4.js";import{u as O,F as K,w as N}from"./FileSaver.min-b7e0e5a3.js";import{u as z}from"./index-095a8fe3.js";const v=L("table_penumpang",{state:()=>({items:[],meta:{},myPage:"",filter:{area:[],dropspot:[],wilayah:[],blok:[],armada:[]},params:{cari:"",dropspot:"",area:"",wilayah:"",blok:"",pembayaran:"",jenis_kelamin:"",armada:"",page:1,limit:25},params2:{limit:""},itemsExport:[],btnDisable:!0}),actions:{nexPage(i){this.params.page=parseInt(i)+1,this.getData()},prevPage(i){this.params.page=parseInt(i)-1,this.getData()},setPage(i){this.params.page=parseInt(i),this.getData()},searchPage(){this.params.page=1,this.getData()},async getData(){const i={params:this.params};try{await c.get("penumpang",i).then(o=>{(o.data.code=200)&&(this.totalData=o.headers.x_total_data,this.items=o.data.data,this.meta=o.headers,this.filter.area=o.data.filter.area,this.params2.limit=o.headers.x_total_data,this.getDataExport())})}catch{}},async unduhTemplate(){try{await c.get("penumpang/unduh-template",{responseType:"blob"}).then(i=>{const o=new Blob([i.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=window.URL.createObjectURL(o),p=document.createElement("a");p.href=e,p.setAttribute("download","template_puber.xlsx"),document.body.appendChild(p),p.click(),p.remove()})}catch{}},async getDataExport(){const i={params:this.params2};try{await c.get("penumpang",i).then(o=>{(o.data.code=200)&&(this.itemsExport=o.data.data)})}catch{}},exportExel(){if(this.itemsExport.length>0){const i=this.tanggal(),o=this.formatJson(this.itemsExport),e=O.json_to_sheet(o),p=O.book_new();O.book_append_sheet(p,e,"Data");const x=this.writeExcelBuffer(p);this.saveExcelFile(x,`Data Penumpang ${i}.xlsx`)}else this.btnDisable=!1},saveExcelFile(i,o){const e=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});K.saveAs(e,o)},writeExcelBuffer(i){return N(i,{bookType:"xlsx",type:"array"})},formatJson(i){const o=[];return i.forEach(e=>{const p={niup:"",nama:"",kecamatan:"",kabupaten:"",provinsi:"",daerah:"",wilayah:"",lembaga:"",status_kepulangan:"",dropspot:"",armada:"",area:"",tarif:"",status_pembayaran:""};p.niup=e.santri.niup,p.nama=e.santri.nama_lengkap,p.kecamatan=e.santri.kecamatan,p.kabupaten=e.santri.kabupaten,p.provinsi=e.santri.provinsi,p.daerah=e.santri.blok,p.wilayah=e.santri.wilayah,p.lembaga="",p.status_kepulangan=e.santri.status_kepulangan,p.dropspot=e.dropspot.nama,p.armada="",p.area=e.dropspot.area.nama,p.tarif=e.dropspot.harga,p.status_pembayaran=e.status_bayar,o.push(p)}),o},tanggal(){const i=new Date,o=i.getDate(),e=i.getMonth()+1,p=i.getFullYear();return(o<=9?"0"+o:o)+"-"+(e<=9?"0"+e:e)+"-"+p},async getDropspot(){this.params.dropspot="",this.getData();const i={params:{area:this.params.area}};try{await c.get("dropspot",i).then(o=>{(o.data.code=200)&&(this.filter.dropspot=o.data.data)})}catch{}},async getWilayah(){try{await c.get("santri/filter/wilayah").then(i=>{(i.data.code=200)&&(this.filter.wilayah=i.data)})}catch{}},async getBlok(){this.params.blok="",this.getData();try{await c.get(`santri/filter/blok?alias_wilayah=${this.params.wilayah}`).then(i=>{(i.data.code=200)&&(this.filter.blok=i.data)})}catch{}},async getArmada(){try{await c.get("armada").then(i=>{(i.data.code=200)&&(this.filter.armada=i.data.data)})}catch{}}}}),$=L("form_penumpang",{state:()=>({contextMenuVisible:!1,contextMenuPosition:{x:0,y:0},isOpenEditDropspot:!1,isOpenEditPembayaran:!1,isOpenImportPembayaran:!1,isArea:[],isDropspot:[],idEdit:"",idDelete:"",idArea:"",dataEdit:{},formImportPembayaran:{excelFile:null},formEditDropspot:{dropspot_id:""},formEditPembayaran:{jumlah_bayar:"",status_bayar:""},isOpen:!1,edited:!1,editedDrop:!1,person:{},fotoDiri:""}),actions:{setOpen(){this.isOpen=!this.isOpen},showContextMenu(i,o){i.preventDefault(),this.dataEdit=o,this.idEdit=o.id,this.contextMenuPosition={x:i.pageX,y:i.pageY},this.contextMenuVisible=!0,document.addEventListener("click",this.handleOutsideClick)},handleOutsideClick(i){this.contextMenuVisible=!1,document.removeEventListener("click",this.handleOutsideClick)},resetFormEditDropspot(){this.formEditDropspot.dropspot_id=""},resetFormEditPembayaran(){this.formEditPembayaran.jumlah_bayar="",this.formEditPembayaran.status_bayar=""},resetFormImportPembayaran(){this.formImportPembayaran.excelFile=null},setOpenEditDropspot(){this.isOpenEditDropspot=!this.isOpenEditDropspot,this.resetFormEditDropspot()},setOpenImportPembayaran(){this.isOpenImportPembayaran=!this.isOpenImportPembayaran,this.resetFormImportPembayaran()},setOpenEditPembayaran(){this.isOpenEditPembayaran=!this.isOpenEditPembayaran,this.resetFormEditPembayaran()},handleOpenEditDropspot(){this.idArea=this.dataEdit.dropspot.area_id,this.getArea(),this.getDropspot(),this.formEditDropspot.dropspot_id=this.dataEdit.dropspot_id,this.isOpenEditDropspot=!0},handleOpenEditPembayaran(){this.formEditPembayaran.status_bayar=this.dataEdit.status_bayar,this.formEditPembayaran.jumlah_bayar=this.dataEdit.jumlah_bayar,this.isOpenEditPembayaran=!0},goToDetail(){j.push(`penumpang/${this.dataEdit.santri_uuid}/detail`)},goToDetailClick(i){this.idEdit=i.id,this.isOpen=!0,this.dataEdit=i,this.getDataDetail(i.santri_uuid),this.getImage(i.santri.niup)},setClickEdirPembayaran(){this.edited=!this.edited,this.formEditPembayaran.status_bayar=this.dataEdit.status_bayar,this.formEditPembayaran.jumlah_bayar=this.dataEdit.jumlah_bayar},setClickEditDrop(){this.editedDrop=!this.editedDrop,this.idArea=this.dataEdit.dropspot.area_id,this.getArea(),this.getDropspot(),this.formEditDropspot.dropspot_id=this.dataEdit.dropspot_id},handleFileChange(i){this.formImportPembayaran.excelFile=i.target.files[0]},getArea(){try{c.get("area").then(i=>{this.isArea=i.data.data})}catch{}},async getDropspot(){this.formEditDropspot.dropspot_id="";const i={params:{area:this.idArea}};try{await c.get("dropspot",i).then(o=>{this.isDropspot=o.data.data})}catch{}},async getDataDetail(i){try{await c.get(`penumpang/${i}`).then(o=>{(o.data.code=200)&&(this.person=o.data.data,this.getImage(o.data.data.santri.niup,"medium"))})}catch{}},async getImage(i){try{const o={responseType:"blob"};await c.get("santri/image/"+i,o).then(e=>{this.fotoDiri=URL.createObjectURL(e.data)})}catch(o){console.log("error",o)}},async editDropspot(){try{await c.put(`penumpang/dropspot/${this.idEdit}`,this.formEditDropspot).then(i=>{this.isOpenEditDropspot=!1,this.resetFormEditDropspot(),v().getData(),this.editedDrop=!1,this.isOpen=!1})}catch{}},async importPembayaran(){try{const i=new FormData;i.append("excelFile",this.formImportPembayaran.excelFile),await c.post("penumpang/import-pembayaran",i).then(o=>{this.isOpenImportPembayaran=!1,this.resetFormImportPembayaran(),v().getData()})}catch{}},async editPembayaran(){try{await c.put(`penumpang/pembayaran/${this.idEdit}`,this.formEditPembayaran).then(i=>{this.isOpenEditPembayaran=!1,this.dataEdit.jumlah_bayar=this.formEditPembayaran.jumlah_bayar,this.dataEdit.status_bayar=this.formEditPembayaran.status_bayar,this.resetFormEditPembayaran(),v().getData(),this.edited=!1})}catch{}},async deleteRombongan(){this.isOpen=!1,U.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin mengeluarkan dari rombongan ?",icon:"info",showCancelButton:!0,confirmButtonText:"keluarkan",confirmButtonColor:"#DC3545"}).then(i=>{i.isConfirmed&&c.delete(`penumpang/${this.dataEdit.santri_uuid}`).then(o=>{this.isOpenEdit=!1,v().getData()})})}}});const R={class:"row"},J=a("div",{class:"col-md-8 text-start"},[a("h3",{class:"titlePage"},"Data Penumpang")],-1),W={class:"col-md-4 text-end g-2"},H=a("hr",null,null,-1),Y={class:"mb-5 pb-3"},q={class:"filter-box mb-5 row"},G={key:0,class:"col-md-2"},X=a("option",{value:"",selected:""},"Semua Wilayah",-1),Q=["value"],Z=["disabled"],tt=a("option",{value:"",selected:""},"Semua Daerah",-1),at=["value"],et={key:1,class:"col-md-2"},st=a("option",{value:"",selected:""},"Semua Area",-1),ot=["value"],nt=["disabled"],it=a("option",{value:"",selected:""},"Semua Dropsot",-1),rt=["value"],lt={class:"col-md-2"},dt=S('<option value="" selected>Semua Status Pembayaran</option><option value="belum-lunas">Belum Lunas</option><option value="lunas">Lunas</option><option value="kurang">Kurang</option><option value="lebih">Lebih</option>',5),pt=[dt],mt=a("option",{value:"",selected:""},"Semua Jenis Kelamin",-1),ut=a("option",{value:"L"},"Laki-Laki",-1),ct=a("option",{value:"P"},"Perempuan",-1),bt=[mt,ut,ct],ht={key:2,class:"col-md-2"},_t=a("option",{value:"",selected:""},"Semua Armada",-1),yt=["value"],gt={class:"serach-box row"},ft={class:"col-md-10 d-flex align-items-center mb-2"},vt={class:"col-md-2 d-flex align-items-center"},kt=a("hr",null,null,-1),Et={class:"table-responsive"},Dt={class:"table table-sm table-hover mt-3"},Pt=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"No"),a("th",{scope:"col"},"NIUP"),a("th",{scope:"col"},"Nama Santri"),a("th",{scope:"col"},"Dropsot"),a("th",{scope:"col"},"Area"),a("th",{scope:"col"},"Tarif"),a("th",{scope:"col"},"Jumlah Bayar"),a("th",{scope:"col"},"Status Pembayaran"),a("th",{scope:"col"},"Wilayah"),a("th",{scope:"col"},"Daerah"),a("th",{scope:"col"},"Kecamatan"),a("th",{scope:"col"},"Kabupaten"),a("th",{scope:"col"},"Provinsi")])],-1),xt=["onDblclick","onContextmenu","onClick"],wt={key:0},Ct={key:1,class:"text-danger"},Ot=a("i",null,"belum-ditentukan",-1),St=[Ot],At={key:2},It={key:3,class:"text-danger"},Ft=a("i",null,"belum-ditentukan",-1),Lt=[Ft],Tt={key:4},jt={key:5,class:"text-danger"},Ut={key:0,class:"badge bg-danger text-capitalize"},Vt={key:1,class:"badge bg-success text-capitalize"},Bt={key:2,class:"badge bg-warning text-capitalize"},Mt={key:3,class:"badge bg-info text-capitalize"},Kt={key:0},Nt={class:"list-group list-group-flush"},zt={class:"modal-dialog"},$t={class:"modal-content"},Rt={class:"modal-header"},Jt=a("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropsot",-1),Wt={class:"modal-body"},Ht={class:"form-group mb-3"},Yt=a("small",null,"Area",-1),qt=a("option",{value:"",selected:""},"Pilih Area",-1),Gt=["value"],Xt={class:"form-group mb-3"},Qt=a("small",null,"Dropspot",-1),Zt=["disabled"],ta={key:0,value:"",selected:""},aa=["value"],ea={class:"modal-footer"},sa=a("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),oa={class:"modal-dialog"},na={class:"modal-content"},ia={class:"modal-header"},ra=a("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Pembayaran",-1),la={class:"modal-body"},da={class:"form-group mb-3"},pa=a("small",null,"Jumlah Pembayaran",-1),ma={class:"form-group mb-3"},ua=a("small",null,"Status Pembayaran",-1),ca=S('<option value="" selected>Pilih Status</option><option value="lunas" selected>Lunas</option><option value="belum-lunas" selected>Belum Lunas</option><option value="lebih" selected>Lebih</option><option value="kurang" selected>Kurang</option>',5),ba=[ca],ha={class:"modal-footer"},_a=a("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),ya={class:"modal-dialog"},ga={class:"modal-content"},fa={class:"modal-header"},va=a("h1",{class:"modal-title fs-5",id:"modalEditLabel"}," Import Pembayaran ",-1),ka={class:"modal-body"},Ea={class:"form-group mb-3"},Da=a("small",null,"File Excel (.xlsx only)",-1),Pa={class:"modal-footer"},xa=a("button",{type:"submit",class:"btn btn-sm btn-primary"},"Proses",-1),wa={class:"modal-dialog modal-fullscreen p-4"},Ca={class:"modal-content"},Oa={class:"modal-header"},Sa=a("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Detail Data Penumpang",-1),Aa={class:"modal-body"},Ia={class:"row"},Fa={class:"col-md-3"},La=["src"],Ta={class:"col-md-2"},ja=a("b",null,"NIUP",-1),Ua=a("b",null,"Nama",-1),Va=a("b",null,"Jenis Kelamin",-1),Ba=a("b",null,"Tetala",-1),Ma=a("b",null,"Umur",-1),Ka={class:"col-md-2"},Na=a("b",null,"Wilayah",-1),za=a("b",null,"Daerah",-1),$a=a("b",null,"Kamar",-1),Ra=a("b",null,"Lembaga",-1),Ja=a("b",null,"Jurusan",-1),Wa={class:"col-md-5"},Ha=a("b",null,"Provinsi",-1),Ya=a("b",null,"Kabupaten",-1),qa=a("b",null,"Kecamatan",-1),Ga=a("b",null,"Kode Pos",-1),Xa=a("b",null,"Jalan",-1),Qa=a("hr",null,null,-1),Za={class:"row"},te={class:"col-md-4"},ae={class:"card"},ee={class:"card-header bg-primary text-white"},se=a("div",{class:"float-start"},"Tujuan",-1),oe={class:"card-body"},ne={key:0},ie=a("p",{class:"card-title mb-0"},"Dropspot :",-1),re={class:"card-text"},le=a("p",{class:"card-title mb-0 mt-3"},"Daerah :",-1),de={class:"card-text"},pe=a("p",{class:"card-title mb-0 mt-3"},"PIC :",-1),me={class:"card-text mb-0"},ue=a("br",null,null,-1),ce={class:"card-text"},be={key:1},he={class:"modal-body"},_e={class:"form-group mb-3"},ye=a("small",null,"Area",-1),ge=a("option",{value:"",selected:""},"Pilih Area",-1),fe=["value"],ve={class:"form-group mb-3"},ke=a("small",null,"Dropspot",-1),Ee=["disabled"],De={key:0,value:"",selected:""},Pe=["value"],xe={class:"modal-footer"},we=a("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Ce={class:"col-md-4"},Oe={class:"card"},Se={class:"card-header bg-primary text-white"},Ae=a("div",{class:"float-start"},"Pembayaran",-1),Ie={class:"card-body"},Fe={key:0},Le=a("p",{class:"card-title mb-0"},"Tarif :",-1),Te={class:"card-text"},je=a("p",{class:"card-title mb-0 mt-3"},"Jumlah Pembayaran :",-1),Ue={class:"card-text"},Ve=a("p",{class:"card-title mb-0 mt-3"},"Status Pembayaran :",-1),Be={key:0,class:"badge bg-danger"},Me={key:1,class:"badge bg-success text-capitalize"},Ke={key:2,class:"badge bg-warning text-capitalize"},Ne={key:3,class:"badge bg-info text-capitalize"},ze={key:1},$e={class:"modal-body"},Re={class:"form-group mb-3"},Je=a("small",null,"Jumlah Pembayaran",-1),We={class:"form-group mb-3"},He=a("small",null,"Status Pembayaran",-1),Ye=S('<option value="" selected>Pilih Status</option><option value="lunas" selected>Lunas</option><option value="belum-lunas" selected>Belum Lunas</option><option value="lebih" selected>Lebih</option><option value="kurang" selected>Kurang</option>',5),qe=[Ye],Ge={class:"modal-footer"},Xe=a("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Qe={class:"col-md-4"},Ze={class:"card"},ts=a("div",{class:"card-header bg-primary text-white"}," Armada ",-1),as={class:"card-body"},es=a("p",{class:"card-title mb-0"},"BUS :",-1),ss={class:"card-text"},os=a("p",{class:"card-title mb-0 mt-3"},"Pendamping :",-1),ns={class:"card-text"},is=a("p",{class:"card-title mb-0 mt-3"},"No. HP :",-1),rs={class:"card-text"},ls={class:"modal-footer"},us={__name:"PenumpangPage",setup(i){const o=v(),e=$(),p=z();o.getData(),p.user.role!="p4nj"&&o.getWilayah(),o.getArmada();function x(){o.exportExel()}const k=E=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(E),T=E=>{const n=[];return n.push(E),n.filter(w=>w===e.idEdit)[0]};return(E,n)=>{const g=I("font-awesome-icon"),w=I("app-paginate");return r(),l(h,null,[a("div",R,[J,a("div",W,[a("button",{class:"btn btn-sm btn-outline-info me-2",type:"button",onClick:n[0]||(n[0]=s=>t(e).setOpenImportPembayaran())},[P(g,{icon:"file-import",class:"icon"}),F(" Import Pembayaran ")]),a("button",{class:"btn btn-sm btn-outline-warning me-2",type:"button",onClick:n[1]||(n[1]=(...s)=>t(o).unduhTemplate&&t(o).unduhTemplate(...s))},[P(g,{icon:"download",class:"icon"}),F(" Unduh Template ")]),a("button",{class:"btn btn-sm btn-outline-primary",type:"button",onClick:x}," Export "),u(a("p",null,"Click Kembali",512),[[V,t(o).btnDisable===!1]])])]),H,a("div",Y,[a("div",q,[t(p).user.role!="pendamping"&&t(p).user.role!="p4nj"&&t(p).user.role!="armada"?(r(),l("div",G,[u(a("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":n[2]||(n[2]=s=>t(o).params.wilayah=s),onChange:n[3]||(n[3]=(...s)=>t(o).getBlok&&t(o).getBlok(...s))},[X,(r(!0),l(h,null,_(t(o).filter.wilayah,s=>(r(),l("option",{key:s,value:s.alias_wilayah},d(s.wilayah),9,Q))),128))],544),[[b,t(o).params.wilayah]]),u(a("select",{class:"form-select form-select-sm mb-2",disabled:t(o).params.wilayah==="","onUpdate:modelValue":n[4]||(n[4]=s=>t(o).params.blok=s),onChange:n[5]||(n[5]=(...s)=>t(o).getData&&t(o).getData(...s))},[tt,(r(!0),l(h,null,_(t(o).filter.blok,s=>(r(),l("option",{key:s,value:s.id_blok},d(s.blok),9,at))),128))],40,Z),[[b,t(o).params.blok]])])):m("",!0),t(p).user.role!="pendamping"?(r(),l("div",et,[u(a("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":n[6]||(n[6]=s=>t(o).params.area=s),onChange:n[7]||(n[7]=(...s)=>t(o).getDropspot&&t(o).getDropspot(...s))},[st,(r(!0),l(h,null,_(t(o).filter.area,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,ot))),128))],544),[[b,t(o).params.area]]),u(a("select",{class:"form-select form-select-sm mb-2",disabled:t(o).params.area==="","onUpdate:modelValue":n[8]||(n[8]=s=>t(o).params.dropspot=s),onChange:n[9]||(n[9]=(...s)=>t(o).getData&&t(o).getData(...s))},[it,(r(!0),l(h,null,_(t(o).filter.dropspot,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,rt))),128))],40,nt),[[b,t(o).params.dropspot]])])):m("",!0),a("div",lt,[u(a("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":n[10]||(n[10]=s=>t(o).params.pembayaran=s),onChange:n[11]||(n[11]=(...s)=>t(o).getData&&t(o).getData(...s))},pt,544),[[b,t(o).params.pembayaran]]),u(a("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":n[12]||(n[12]=s=>t(o).params.jenis_kelamin=s),onChange:n[13]||(n[13]=(...s)=>t(o).getData&&t(o).getData(...s))},bt,544),[[b,t(o).params.jenis_kelamin]])]),t(p).user.role==="pendamping"?(r(),l("div",ht,[u(a("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":n[14]||(n[14]=s=>t(o).params.armada=s),onChange:n[15]||(n[15]=(...s)=>t(o).getData&&t(o).getData(...s))},[_t,(r(!0),l(h,null,_(t(o).filter.armada,s=>(r(),l("option",{key:s.id,value:s.id},d(s.nama),9,yt))),128))],544),[[b,t(o).params.armada]])])):m("",!0)]),a("div",gt,[a("div",ft,[a("small",null,"Total data "+d(t(o).totalData),1)]),a("div",vt,[u(a("input",{type:"text","onUpdate:modelValue":n[16]||(n[16]=s=>t(o).params.cari=s),class:"form-control form-control-sm mb-2",placeholder:"Cari Penumpang ...",onKeyup:n[17]||(n[17]=(...s)=>t(o).getData&&t(o).getData(...s))},null,544),[[C,t(o).params.cari]])])]),kt,a("div",Et,[a("table",Dt,[Pt,a("tbody",null,[(r(!0),l(h,null,_(t(o).items,(s,A)=>(r(),l("tr",{style:{cursor:"pointer"},key:A,onDblclick:y(D=>t(e).goToDetailClick(s),["prevent"]),onContextmenu:y(D=>t(e).showContextMenu(D,s),["prevent"]),class:f({"table-active":T(s.id)}),onClick:y(D=>t(e).showContextMenu(D,s),["prevent"])},[a("td",null,d(A+1+(t(o).params.page-1)*t(o).params.limit),1),a("td",null,d(s.santri.niup),1),a("td",null,d(s.santri.nama_lengkap),1),s.dropspot?(r(),l("td",wt,d(s.dropspot.nama),1)):(r(),l("td",Ct,St)),s.dropspot?(r(),l("td",At,d(s.dropspot.area.nama),1)):(r(),l("td",It,Lt)),s.dropspot?(r(),l("td",Tt,d(k(s.dropspot.harga)),1)):(r(),l("td",jt,"Rp. 0")),a("td",null,d(k(s.jumlah_bayar)),1),a("td",null,[s.status_bayar==="belum-lunas"?(r(),l("i",Ut,d(s.status_bayar==="belum-lunas"?"belum lunas":""),1)):m("",!0),s.status_bayar==="lunas"?(r(),l("i",Vt,d(s.status_bayar),1)):m("",!0),s.status_bayar==="kurang"?(r(),l("i",Bt,d(s.status_bayar),1)):m("",!0),s.status_bayar==="lebih"?(r(),l("i",Mt,d(s.status_bayar),1)):m("",!0)]),a("td",null,d(s.santri.wilayah),1),a("td",null,d(s.santri.blok),1),a("td",null,d(s.santri.kecamatan),1),a("td",null,d(s.santri.kabupaten),1),a("td",null,d(s.santri.provinsi),1)],42,xt))),128))])])]),t(o).items.length>0?(r(),l("div",Kt,[t(o).meta.x_total_data?(r(),B(w,{key:0,meta:t(o).meta,per_page:t(o).params.limit,onSetPage:n[18]||(n[18]=s=>t(o).setPage(s)),onNext:t(o).nexPage,onPrev:t(o).prevPage,onLast:t(o).setPage,onFirst:t(o).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):m("",!0)])):m("",!0),t(e).contextMenuVisible?(r(),l("div",{key:1,class:"context-menu",style:M({top:`${t(e).contextMenuPosition.y}px`,left:`${t(e).contextMenuPosition.x}px`})},[a("ul",Nt,[t(p).user.role==="sysadmin"||t(p).user.role==="admin"||t(p).user.role==="daerah"||t(p).user.role==="wilayah"?(r(),l("li",{key:0,class:"list-group-item px-5",onClick:n[19]||(n[19]=(...s)=>t(e).handleOpenEditDropspot&&t(e).handleOpenEditDropspot(...s))}," Ubah Dropsot ")):m("",!0),t(p).user.role==="sysadmin"||t(p).user.role==="keuangan"?(r(),l("li",{key:1,class:"list-group-item px-5",onClick:n[20]||(n[20]=(...s)=>t(e).handleOpenEditPembayaran&&t(e).handleOpenEditPembayaran(...s))}," Ubah Status Pembayaran ")):m("",!0),a("li",{class:"list-group-item px-5",onClick:n[21]||(n[21]=(...s)=>t(e).goToDetail&&t(e).goToDetail(...s))}," Lihat Detail Rombongan "),t(p).user.role==="sysadmin"||t(p).user.role==="admin"||t(p).user.role==="daerah"||t(p).user.role==="wilayah"?(r(),l("li",{key:2,class:"list-group-item px-5",onClick:n[22]||(n[22]=(...s)=>t(e).deleteRombongan&&t(e).deleteRombongan(...s))}," Hapus Penumpang ")):m("",!0)])],4)):m("",!0)]),t(e).isOpenEditDropspot===!0?(r(),l("div",{key:0,class:f(["modal fade",{show:t(e).isOpenEditDropspot}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[a("div",zt,[a("div",$t,[a("div",Rt,[Jt,a("button",{class:"btn-close",type:"button",onClick:n[23]||(n[23]=(...s)=>t(e).setOpenEditDropspot&&t(e).setOpenEditDropspot(...s))})]),a("form",{onSubmit:n[28]||(n[28]=y((...s)=>t(e).editDropspot&&t(e).editDropspot(...s),["prevent"]))},[a("div",Wt,[a("div",Ht,[Yt,u(a("select",{class:"form-select","onUpdate:modelValue":n[24]||(n[24]=s=>t(e).idArea=s),onChange:n[25]||(n[25]=(...s)=>t(e).getDropspot&&t(e).getDropspot(...s))},[qt,(r(!0),l(h,null,_(t(e).isArea,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,Gt))),128))],544),[[b,t(e).idArea]])]),a("div",Xt,[Qt,u(a("select",{class:"form-select","onUpdate:modelValue":n[26]||(n[26]=s=>t(e).formEditDropspot.dropspot_id=s),disabled:t(e).idArea===""},[t(e).formEditDropspot.dropspot_id===""?(r(),l("option",ta," Pilih Dropspot ")):m("",!0),(r(!0),l(h,null,_(t(e).isDropspot,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,aa))),128))],8,Zt),[[b,t(e).formEditDropspot.dropspot_id]])])]),a("div",ea,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[27]||(n[27]=(...s)=>t(e).setOpenEditDropspot&&t(e).setOpenEditDropspot(...s))}," Tutup "),sa])],32)])])],2)):m("",!0),t(e).isOpenEditPembayaran===!0?(r(),l("div",{key:1,class:f(["modal fade",{show:t(e).isOpenEditPembayaran}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[a("div",oa,[a("div",na,[a("div",ia,[ra,a("button",{class:"btn-close",type:"button",onClick:n[29]||(n[29]=(...s)=>t(e).setOpenEditPembayaran&&t(e).setOpenEditPembayaran(...s))})]),a("form",{onSubmit:n[33]||(n[33]=y((...s)=>t(e).editPembayaran&&t(e).editPembayaran(...s),["prevent"]))},[a("div",la,[a("div",da,[pa,u(a("input",{type:"number",class:"form-control mt-2","onUpdate:modelValue":n[30]||(n[30]=s=>t(e).formEditPembayaran.jumlah_bayar=s)},null,512),[[C,t(e).formEditPembayaran.jumlah_bayar]])]),a("div",ma,[ua,u(a("select",{class:"form-select","onUpdate:modelValue":n[31]||(n[31]=s=>t(e).formEditPembayaran.status_bayar=s)},ba,512),[[b,t(e).formEditPembayaran.status_bayar]])])]),a("div",ha,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[32]||(n[32]=(...s)=>t(e).setOpenEditPembayaran&&t(e).setOpenEditPembayaran(...s))}," Tutup "),_a])],32)])])],2)):m("",!0),t(e).isOpenImportPembayaran===!0?(r(),l("div",{key:2,class:f(["modal fade",{show:t(e).isOpenImportPembayaran}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[a("div",ya,[a("div",ga,[a("div",fa,[va,a("button",{class:"btn-close",type:"button",onClick:n[34]||(n[34]=(...s)=>t(e).setOpenImportPembayaran&&t(e).setOpenImportPembayaran(...s))})]),a("form",{onSubmit:n[37]||(n[37]=y((...s)=>t(e).importPembayaran&&t(e).importPembayaran(...s),["prevent"]))},[a("div",ka,[a("div",Ea,[Da,a("input",{type:"file",onChange:n[35]||(n[35]=(...s)=>t(e).handleFileChange&&t(e).handleFileChange(...s)),accept:".xlsx",class:"form-control mt-2"},null,32)])]),a("div",Pa,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[36]||(n[36]=(...s)=>t(e).setOpenImportPembayaran&&t(e).setOpenImportPembayaran(...s))}," Tutup "),xa])],32)])])],2)):m("",!0),t(e).isOpen===!0?(r(),l("div",{key:3,class:f(["modal fade",{show:t(e).setOpen}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[a("div",wa,[a("div",Ca,[a("div",Oa,[Sa,a("button",{class:"btn-close",type:"button",onClick:n[38]||(n[38]=(...s)=>t(e).setOpen&&t(e).setOpen(...s))})]),a("div",Aa,[a("div",Ia,[a("div",Fa,[a("img",{src:t(e).fotoDiri,alt:"foto-diri",class:"img-thumbnail",style:{height:"300px","object-fit":"cover"}},null,8,La)]),a("div",Ta,[ja,a("p",null,d(t(e).person.santri?t(e).person.santri.niup:"-"),1),Ua,a("p",null,d(t(e).person.santri?t(e).person.santri.nama_lengkap:"-"),1),Va,a("p",null,d(t(e).person.santri?t(e).person.santri.jenis_kelamin:"-"),1),Ba,a("p",null,d(t(e).person.santri?t(e).person.santri.raw.tempat_lahir+", "+t(e).person.santri.raw.tanggal_lahir:"-"),1),Ma,a("p",null,d(t(e).person.santri?`${t(e).person.santri.raw.umur} Tahun`:"-"),1)]),a("div",Ka,[Na,a("p",null,d(t(e).person.santri?t(e).person.santri.wilayah:"-"),1),za,a("p",null,d(t(e).person.santri?t(e).person.santri.blok:"-"),1),$a,a("p",null,d(t(e).person.santri&&t(e).person.santri.raw.domisili_santri?t(e).person.santri.raw.domisili_santri[t(e).person.santri.raw.domisili_santri.length-1].kamar:"-"),1),Ra,a("p",null,d(t(e).person.santri&&t(e).person.santri.raw.pendidikan?t(e).person.santri.raw.pendidikan[t(e).person.santri.raw.pendidikan.length-1].lembaga:"-"),1),Ja,a("p",null,d(t(e).person.santri&&t(e).person.santri.raw.pendidikan?t(e).person.santri.raw.pendidikan[t(e).person.santri.raw.pendidikan.length-1].jurusan:"-"),1)]),a("div",Wa,[Ha,a("p",null,d(t(e).person.santri?t(e).person.santri.provinsi:"-"),1),Ya,a("p",null,d(t(e).person.santri?t(e).person.santri.kabupaten:"-"),1),qa,a("p",null,d(t(e).person.santri?t(e).person.santri.kecamatan:"-"),1),Ga,a("p",null,d(t(e).person.santri?t(e).person.santri.raw.kodepos:"-"),1),Xa,a("p",null,d(t(e).person.santri?t(e).person.santri.raw.jalan:"-"),1)])]),Qa,a("div",Za,[a("div",te,[a("div",ae,[a("div",ee,[se,t(p).user.role==="sysadmin"||t(p).user.role==="admin"||t(p).user.role==="daerah"||t(p).user.role==="wilayah"?(r(),l("div",{key:0,class:"float-end",style:{cursor:"pointer"},onClick:n[39]||(n[39]=(...s)=>t(e).setClickEditDrop&&t(e).setClickEditDrop(...s))},[P(g,{icon:"pen",class:"icon",style:{"font-size":"15px"}})])):m("",!0)]),a("div",oe,[t(e).editedDrop==!1?(r(),l("div",ne,[ie,a("b",re,d(t(e).dataEdit.dropspot?t(e).dataEdit.dropspot.nama:"-"),1),le,a("b",de,d(t(e).person.dropspot?t(e).person.dropspot.area.nama:"-"),1),pe,a("b",me,d(t(e).person.dropspot?t(e).person.dropspot.area.pic:"-"),1),ue,a("b",ce,d(t(e).person.dropspot?t(e).person.dropspot.area.no_hp:"-"),1)])):(r(),l("div",be,[a("form",{onSubmit:n[44]||(n[44]=y((...s)=>t(e).editDropspot&&t(e).editDropspot(...s),["prevent"]))},[a("div",he,[a("div",_e,[ye,u(a("select",{class:"form-select","onUpdate:modelValue":n[40]||(n[40]=s=>t(e).idArea=s),onChange:n[41]||(n[41]=(...s)=>t(e).getDropspot&&t(e).getDropspot(...s))},[ge,(r(!0),l(h,null,_(t(e).isArea,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,fe))),128))],544),[[b,t(e).idArea]])]),a("div",ve,[ke,u(a("select",{class:"form-select","onUpdate:modelValue":n[42]||(n[42]=s=>t(e).formEditDropspot.dropspot_id=s),disabled:t(e).idArea===""},[t(e).formEditDropspot.dropspot_id===""?(r(),l("option",De," Pilih Dropspot ")):m("",!0),(r(!0),l(h,null,_(t(e).isDropspot,s=>(r(),l("option",{key:s,value:s.id},d(s.nama),9,Pe))),128))],8,Ee),[[b,t(e).formEditDropspot.dropspot_id]])])]),a("div",xe,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[43]||(n[43]=(...s)=>t(e).setClickEditDrop&&t(e).setClickEditDrop(...s))}," Tutup "),we])],32)]))])])]),a("div",Ce,[a("div",Oe,[a("div",Se,[Ae,t(p).user.role==="sysadmin"||t(p).user.role==="admin"||t(p).user.role==="daerah"||t(p).user.role==="wilayah"?(r(),l("div",{key:0,class:"float-end",style:{cursor:"pointer"},onClick:n[45]||(n[45]=(...s)=>t(e).setClickEdirPembayaran&&t(e).setClickEdirPembayaran(...s))},[P(g,{icon:"pen",class:"icon",style:{"font-size":"15px"}})])):m("",!0)]),a("div",Ie,[t(e).edited===!1?(r(),l("div",Fe,[a("div",null,[Le,a("b",Te,d(t(e).dataEdit?k(t(e).dataEdit.dropspot.harga):"-"),1),je,a("b",Ue,d(t(e)?k(t(e).dataEdit.jumlah_bayar):"-"),1),Ve,t(e).dataEdit.status_bayar==="belum-lunas"?(r(),l("i",Be,d(t(e).dataEdit.status_bayar==="belum-lunas"?"Belum Lunas":""),1)):m("",!0),t(e).dataEdit.status_bayar==="lunas"?(r(),l("i",Me,d(t(e).dataEdit.status_bayar),1)):m("",!0),t(e).dataEdit.status_bayar==="kurang"?(r(),l("i",Ke,d(t(e).dataEdit.status_bayar),1)):m("",!0),t(e).dataEdit.status_bayar==="lebih"?(r(),l("i",Ne,d(t(e).dataEdit.status_bayar),1)):m("",!0)])])):(r(),l("div",ze,[a("form",{onSubmit:n[49]||(n[49]=y((...s)=>t(e).editPembayaran&&t(e).editPembayaran(...s),["prevent"]))},[a("div",$e,[a("div",Re,[Je,u(a("input",{type:"number",class:"form-control mt-2","onUpdate:modelValue":n[46]||(n[46]=s=>t(e).formEditPembayaran.jumlah_bayar=s)},null,512),[[C,t(e).formEditPembayaran.jumlah_bayar]])]),a("div",We,[He,u(a("select",{class:"form-select","onUpdate:modelValue":n[47]||(n[47]=s=>t(e).formEditPembayaran.status_bayar=s)},qe,512),[[b,t(e).formEditPembayaran.status_bayar]])])]),a("div",Ge,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[48]||(n[48]=(...s)=>t(e).setClickEdirPembayaran&&t(e).setClickEdirPembayaran(...s))}," Tutup "),Xe])],32)]))])])]),a("div",Qe,[a("div",Ze,[ts,a("div",as,[a("div",null,[es,a("b",ss,d(t(e).person.armada?t(e).person.armada.nama:"-"),1),os,a("b",ns,d(t(e).person.armada&&t(e).person.armada.user?t(e).person.armada.user.nama_lengkap:"-"),1),is,a("b",rs,d(t(e).person.armada&&t(e).person.armada.user?t(e).person.armada.user.no_hp:"-"),1)])])])])])]),a("div",ls,[a("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[50]||(n[50]=(...s)=>t(e).setOpen&&t(e).setOpen(...s))}," Tutup ")])])])],2)):m("",!0)],64)}}};export{us as default};
