import{x as E,C as h,S as P,a as v,g as i,c as n,b as t,d as r,E as c,u as s,F as p,q as _,t as d,v as u,e as f,z as b,n as y,k as S,m as C,l as O,w as V}from"./index-c6286ee1.js";import{u as k}from"./table-461db6d5.js";const A=E("form_santri",{state:()=>({isOpenEdit:!1,idArea:"",isArea:[],isDropspot:[],formEditDropspot:{dropspot_id:""}}),actions:{setOpenEdit(){this.isOpenEdit=!this.isOpenEdit},getArea(){try{h.get("area").then(m=>{this.isArea=m.data.data})}catch{}},async getDropspot(){this.formEditDropspot.dropspot_id="";const m={params:{area:this.idArea}};try{await h.get("dropspot",m).then(o=>{this.isDropspot=o.data.data})}catch{}},async editData(){const m=k();try{await h.post(`santri/daftar/${m.uuid}`,this.formEditDropspot).then(o=>{this.isOpenEdit=!1,this.formEditDropspot.dropspot_id="",this.idArea="",m.uuid="",m.isOpenDetail=!1,m.getData()})}catch(o){P.fire(o.response.data.message,o.response.data.error,"error")}}}}),L=t("h3",{class:"titlePage"},"Data Santri",-1),U=t("hr",null,null,-1),N={class:"filter-box mb-5 row"},K={class:"col-md-2"},T=t("option",{value:"",selected:""},"Semua Wilayah",-1),B=["value"],$=["disabled"],F=t("option",{value:"",selected:""},"Semua Daerah",-1),R=["value"],W={class:"col-md-2"},j=t("option",{value:"",selected:""},"Semua Status Kepulangan",-1),z=t("option",{value:"rombongan"},"Rombongan",-1),M=t("option",{value:"non-rombongan"},"Non Rombongan",-1),I=[j,z,M],J=t("option",{value:"",selected:""},"Semua Jenis Kelamin",-1),q=t("option",{value:"L"},"Laki-Laki",-1),G=t("option",{value:"P"},"Perempuan",-1),H=[J,q,G],Q={class:"serach-box row"},X={class:"col-md-10 d-flex align-items-center mb-2"},Y={class:"col-md-2 d-flex align-items-center"},Z=t("hr",null,null,-1),tt={class:"table-responsive"},st={class:"table table-sm table-hover mt-3"},et=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"NIUP"),t("th",{scope:"col"},"Nama Lengkap"),t("th",{scope:"col"},"JK"),t("th",{scope:"col"},"Wilayah"),t("th",{scope:"col"},"Daerah"),t("th",{scope:"col"},"Kab/Kota"),t("th",{scope:"col"},"Status Kepulangan")])],-1),ot=["onDblclick"],at={class:"text-capitalize"},lt={class:"modal-dialog"},it={class:"modal-content"},nt={class:"modal-header"},dt=t("h1",{class:"modal-title fs-5",id:"modalDetailLabel"}," Detail Santri ",-1),rt={class:"modal-body"},mt={class:"alert alert-secondary p-1 fs-6",role:"alert"},ct={class:"row"},pt={class:"col-md-8 order-sm-2 order-md-2"},ut={class:"mb-3 row"},_t=t("label",{class:"col-sm-4 col-form-label"},"NIUP",-1),bt={class:"col-sm-8"},ht={class:"mb-3 row"},vt=t("label",{class:"col-sm-4 col-form-label"},"Nama Lengkap",-1),gt={class:"col-sm-8"},ft={class:"mb-3 row"},yt=t("label",{class:"col-sm-4 col-form-label"},"Tanggal Lahir",-1),kt={class:"col-sm-8"},Dt=["value"],wt={class:"mb-3 row"},xt=t("label",{class:"col-sm-4 col-form-label"},"Wilayah",-1),Et={class:"col-sm-8"},Pt={class:"mb-3 row"},St=t("label",{class:"col-sm-4 col-form-label"},"Daerah",-1),Ct={class:"col-sm-8"},Ot={class:"mb-3 row"},Vt=t("label",{class:"col-sm-4 col-form-label"},"Kamar",-1),At={class:"col-sm-8"},Lt={class:"mb-3 row"},Ut=t("label",{class:"col-sm-4 col-form-label"},"Kecamatan",-1),Nt={class:"col-sm-8"},Kt=["value"],Tt={class:"mb-3 row"},Bt=t("label",{class:"col-sm-4 col-form-label"},"Kabupaten",-1),$t={class:"col-sm-8"},Ft=["value"],Rt={class:"mb-3 row"},Wt=t("label",{class:"col-sm-4 col-form-label"},"Provinsi",-1),jt={class:"col-sm-8"},zt=["value"],Mt={class:"col-md-4 order-sm-1 order-md-2 mb-5 text-end"},It=["src"],Jt={class:"modal-footer"},qt={class:"modal-dialog"},Gt={class:"modal-content"},Ht={class:"modal-header"},Qt=t("h1",{class:"modal-title fs-5",id:"modalEditLabel"},"Edit Dropsot",-1),Xt={class:"modal-body"},Yt={class:"form-group mb-3"},Zt=t("small",null,"Area",-1),ts=t("option",{value:"",selected:""},"Pilih Area",-1),ss=["value"],es={class:"form-group mb-3"},os=t("small",null,"Dropspot",-1),as=["disabled"],ls={key:0,value:"",selected:""},is=["value"],ns={class:"modal-footer"},ds=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),us={__name:"SantriPage",setup(m){const o=k(),l=A();return l.getArea(),o.getData(),o.getWilayah(),(rs,a)=>{const D=v("app-paginate"),w=v("font-awesome-icon"),x=v("router-link");return i(),n(p,null,[L,U,t("div",N,[t("div",K,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":a[0]||(a[0]=e=>s(o).params.wilayah=e),onChange:a[1]||(a[1]=(...e)=>s(o).getBlok&&s(o).getBlok(...e))},[T,(i(!0),n(p,null,_(s(o).filter.wilayah,e=>(i(),n("option",{key:e,value:e.alias_wilayah},d(e.wilayah),9,B))),128))],544),[[c,s(o).params.wilayah]]),r(t("select",{class:"form-select form-select-sm mb-2",disabled:s(o).params.wilayah==="","onUpdate:modelValue":a[2]||(a[2]=e=>s(o).params.blok=e),onChange:a[3]||(a[3]=(...e)=>s(o).getData&&s(o).getData(...e))},[F,(i(!0),n(p,null,_(s(o).filter.blok,e=>(i(),n("option",{key:e,value:e.id_blok},d(e.blok),9,R))),128))],40,$),[[c,s(o).params.blok]])]),t("div",W,[r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":a[4]||(a[4]=e=>s(o).params.status_kepulangan=e),onChange:a[5]||(a[5]=(...e)=>s(o).getData&&s(o).getData(...e))},I,544),[[c,s(o).params.status_kepulangan]]),r(t("select",{class:"form-select form-select-sm mb-2","onUpdate:modelValue":a[6]||(a[6]=e=>s(o).params.jenis_kelamin=e),onChange:a[7]||(a[7]=(...e)=>s(o).getData&&s(o).getData(...e))},H,544),[[c,s(o).params.jenis_kelamin]])]),t("div",Q,[t("div",X,[t("small",null,"Total data "+d(s(o).meta.x_total_data),1)]),t("div",Y,[r(t("input",{type:"text","onUpdate:modelValue":[a[8]||(a[8]=e=>s(o).params.cari=e),a[9]||(a[9]=(...e)=>s(o).searchPage&&s(o).searchPage(...e))],class:"form-control form-control-sm mb-2",placeholder:"Cari Santri ..."},null,512),[[u,s(o).params.cari]])])]),Z,t("div",tt,[t("table",st,[et,t("tbody",null,[(i(!0),n(p,null,_(s(o).items,(e,g)=>(i(),n("tr",{style:{cursor:"pointer"},key:g,onDblclick:ms=>s(o).handleDoubelClick(e.uuid)},[t("td",null,d(g+1+(s(o).params.page-1)*s(o).params.limit),1),t("td",null,d(e.niup),1),t("td",null,d(e.nama_lengkap),1),t("td",null,d(e.jenis_kelamin),1),t("td",null,d(e.wilayah?e.wilayah:"-"),1),t("td",null,d(e.blok?e.blok:"-"),1),t("td",null,d(e.kabupaten),1),t("td",at,[t("i",null,d(e.status_kepulangan),1)])],40,ot))),128))])])]),s(o).meta.x_total_data?(i(),f(D,{key:0,meta:s(o).meta,per_page:s(o).params.limit,onSetPage:a[10]||(a[10]=e=>s(o).setPage(e)),onNext:s(o).nexPage,onPrev:s(o).prevPage,onLast:s(o).setPage,onFirst:s(o).setPage},null,8,["meta","per_page","onNext","onPrev","onLast","onFirst"])):b("",!0),s(o).isOpenDetail===!0?(i(),n("div",{key:1,class:y(["modal fade modal-lg",{show:s(o).isOpenDetail}]),style:{display:"block"},id:"modalDetail",tabindex:"-1","aria-labelledby":"modalDetailLabel","aria-hidden":"true"},[t("div",lt,[t("div",it,[t("div",nt,[dt,t("button",{class:"btn-close",type:"button",onClick:a[11]||(a[11]=e=>s(o).isOpenDetail=!1)})]),t("div",rt,[t("p",mt,[t("i",null,[S(w,{icon:"bell",class:"icon"}),C(" Data santri hanya bersifat temporary sebagai kebutuhan Pulang Bersama, untuk data lebih detail silahkan lihat di Aplikasi PEDATREN")])]),t("div",ct,[t("div",pt,[t("div",ut,[_t,t("div",bt,[r(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":a[12]||(a[12]=e=>s(o).item.niup=e)},null,512),[[u,s(o).item.niup]])])]),t("div",ht,[vt,t("div",gt,[r(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":a[13]||(a[13]=e=>s(o).item.nama_lengkap=e)},null,512),[[u,s(o).item.nama_lengkap]])])]),t("div",ft,[yt,t("div",kt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(o).item.raw?s(o).item.raw.tempat_lahir+", "+s(o).item.raw.tanggal_lahir:""},null,8,Dt)])]),t("div",wt,[xt,t("div",Et,[r(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":a[14]||(a[14]=e=>s(o).item.wilayah=e)},null,512),[[u,s(o).item.wilayah]])])]),t("div",Pt,[St,t("div",Ct,[r(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":a[15]||(a[15]=e=>s(o).item.blok=e)},null,512),[[u,s(o).item.blok]])])]),t("div",Ot,[Vt,t("div",At,[r(t("input",{type:"text",readonly:"",class:"form-control-plaintext","onUpdate:modelValue":a[16]||(a[16]=e=>s(o).item.raw.domisili_santri[s(o).item.raw.domisili_santri.length-1].kamar=e)},null,512),[[u,s(o).item.raw.domisili_santri[s(o).item.raw.domisili_santri.length-1].kamar]])])]),t("div",Lt,[Ut,t("div",Nt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(o).item.kecamatan},null,8,Kt)])]),t("div",Tt,[Bt,t("div",$t,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(o).item.kabupaten},null,8,Ft)])]),t("div",Rt,[Wt,t("div",jt,[t("input",{type:"text",readonly:"",class:"form-control-plaintext",value:s(o).item.provinsi},null,8,zt)])])]),t("div",Mt,[t("img",{src:s(o).fotoDiri,alt:"foto-diri",class:"img-thumbnail"},null,8,It)])])]),t("div",Jt,[s(o).item.status_kepulangan==="rombongan"?(i(),f(x,{key:0,to:{name:"penumpang-detail",params:{uuid:s(o).item.uuid}}},{default:O(()=>[t("button",{class:"btn btn-primary",type:"button",onClick:a[17]||(a[17]=e=>s(o).isOpenDetail=!1)},"Lihat Data Rombongan")]),_:1},8,["to"])):(i(),n("button",{key:1,class:"btn btn-primary",type:"button",onClick:a[18]||(a[18]=e=>s(l).isOpenEdit=!0)},"Daftarkan Rombongan")),t("button",{type:"button",class:"btn btn-secondary",onClick:a[19]||(a[19]=e=>s(o).isOpenDetail=!1)}," Tutup ")])])])],2)):b("",!0),s(l).isOpenEdit===!0?(i(),n("div",{key:2,class:y(["modal fade",{show:s(l).isOpenEdit}]),style:{display:"block"},id:"modalEdit",tabindex:"-1","aria-labelledby":"modalEditLabel","aria-hidden":"true"},[t("div",qt,[t("div",Gt,[t("div",Ht,[Qt,t("button",{class:"btn-close",type:"button",onClick:a[20]||(a[20]=(...e)=>s(l).setOpenEdit&&s(l).setOpenEdit(...e))})]),t("form",{onSubmit:a[25]||(a[25]=V(e=>s(l).editData(),["prevent"]))},[t("div",Xt,[t("div",Yt,[Zt,r(t("select",{class:"form-select","onUpdate:modelValue":a[21]||(a[21]=e=>s(l).idArea=e),onChange:a[22]||(a[22]=(...e)=>s(l).getDropspot&&s(l).getDropspot(...e))},[ts,(i(!0),n(p,null,_(s(l).isArea,e=>(i(),n("option",{key:e,value:e.id},d(e.nama),9,ss))),128))],544),[[c,s(l).idArea]])]),t("div",es,[os,r(t("select",{class:"form-select","onUpdate:modelValue":a[23]||(a[23]=e=>s(l).formEditDropspot.dropspot_id=e),disabled:s(l).idArea===""},[s(l).formEditDropspot.dropspot_id===""?(i(),n("option",ls," Pilih Dropspot ")):b("",!0),(i(!0),n(p,null,_(s(l).isDropspot,e=>(i(),n("option",{key:e,value:e.id},d(e.nama),9,is))),128))],8,as),[[c,s(l).formEditDropspot.dropspot_id]])])]),t("div",ns,[t("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:a[24]||(a[24]=(...e)=>s(l).setOpenEdit&&s(l).setOpenEdit(...e))}," Tutup "),ds])],32)])])],2)):b("",!0)])],64)}}};export{us as default};
